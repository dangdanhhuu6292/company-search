var app=angular.module("sbdrApp",["sbdrPortal.controllers","sbdrPortal.services","scroll","oauth","mgcrea.ngStrap"]),appcontrollers=angular.module("sbdrPortal.controllers","ui.bootstrap ngRoute ngCookies ngTable nvd3 chieffancypants.loadingBar charts.ng.sparkline.seriesbar ui.mask sbdrPortal.services base64".split(" ")),appservices=angular.module("sbdrPortal.services",["ngResource","ngWebSocket"]),appscrolldirectives=angular.module("scroll",[]);
app.config(["$routeProvider","$locationProvider","$httpProvider","$tooltipProvider",function(c,b,a,d){app.resolveScriptDeps=function(a){return["$q","$rootScope",function(b,c){var d=b.defer();$script(a,function(){c.$apply(function(){d.resolve()})});return d.promise}]};0;c.when("/accountcreated",{templateUrl:"partials/accountcreated.html",controller:"AccountCreatedController"});c.when("/activateuser/:activationid/:userid",{templateUrl:"partials/activateuser.html",controller:"ActivateUserController",
resolve:{deps:app.resolveScriptDeps(["js/util/password.js"]),clientip:["$window",function(a){return $.getJSON("https://api.ipify.org?format\x3djsonp\x26callback\x3d?",function(a){return a.ip})}]}});c.when("/createaccount/:kvknumber/:hoofdvestiging/:searchurl",{templateUrl:"partials/createaccount.html",reloadOnSearch:!1,controller:"CreateAccountController",resolve:{deps:app.resolveScriptDeps(["js/util/password.js"]),clientip:function(){return $.getJSON("https://api.ipify.org?format\x3djsonp\x26callback\x3d?",
function(a){return a.ip})},recaptchasitekey:["$q","NewAccountService",function(a,b){b=b.recaptchasitekey();return a.all({recaptcha:b.$promise}).then(function(a){return"undefined"!==typeof a&&"undefined"!==typeof a.recaptcha?a.recaptcha.recaptchaSiteKey:"unknown"}).catch(function(a){0})}]}});c.when("/createcustomnotification/:eigenBedrijfId/:bedrijfId/:searchurl",{templateUrl:"partials/createcustomnotification.html",controller:"CreateCustomNotificationController",label:"CreateCustomNotification"});
c.when("/dashboard/:showtab?",{templateUrl:"partials/dashboard.html",controller:"DashboardController",label:"Dashboard"});c.when("/dashboard/:showtab/search/:searchValue/:page",{templateUrl:"partials/dashboard.html",controller:"DashboardController",label:"Dashboard"});c.when("/donation/:searchurl",{templateUrl:"partials/donation.html",controller:"DonationController",label:"Doneren"});c.when("/editcompany/:bedrijfId/:searchurl/:exceptionCompany?",{templateUrl:"partials/editcompany.html",controller:"EditCompanyController",
resolve:{companyData:["$q","$route","AccountService",function(a,b,c){b=c.getCompanyData({bedrijfId:b.current.params.bedrijfId});return a.all({company:b.$promise}).then(function(a){return a}).catch(function(a){0})}]}});c.when("/exactonline",{templateUrl:"partials/exactonline.html",controller:"ExactOnlineController",label:"ExactOnline",resolve:{exactonlineparamData:["$q","$route","ExactonlineService",function(a,b,c){b=c.exactonlineparam();return a.all({exactonlineparam:b.$promise}).then(function(a){return a}).catch(function(a){0})}]}});
c.when("/faillissementenoverzicht",{templateUrl:"partials/faillissementenoverzicht.html",controller:"FaillissementenOverzichtController",label:"FaillissementenOverzicht"});c.when("/forgotpassword",{templateUrl:"partials/forgotpassword.html",controller:"ForgotPasswordController",resolve:{clientip:["$window",function(a){return $.getJSON("https://api.ipify.org?format\x3djsonp\x26callback\x3d?",function(a){return a.ip})}]}});c.when("/fullreport",{templateUrl:"partials/fullreport.html",controller:"FullReportController"});
c.when("/klantaccount/:bedrijfId/:searchurl",{templateUrl:"partials/myaccount.html",controller:"MyAccountController",resolve:{deps:app.resolveScriptDeps(["js/util/password.js"]),companyAccountData:["$q","$route","AccountService",function(a,b,c){b=c.getCompanyAccountData({bedrijfId:b.current.params.bedrijfId});return a.all({companyAccount:b.$promise}).then(function(a){return a}).catch(function(a){0})}]}});c.when("/login",{templateUrl:"partials/login.html",controller:"LoginController",resolve:{clientip:["$route",
function(a){return $.getJSON("https://api.ipify.org?format\x3djsonp\x26callback\x3d?",function(a){return a.ip})}]}});c.when("/messages",{templateUrl:"partials/messages.html",controller:"MessagesController",label:"Berichten"});c.when("/monitoringdetails/:eigenBedrijfId/:monitoringId/:searchurl",{templateUrl:"partials/monitoringdetails.html",controller:"MonitoringDetailsController",label:"Monitoring Details",resolve:{monitoringDetailData:["$q","CompanyService","$route",function(a,b,c){var d=b.monitoringDetailData({bedrijfId:c.current.params.eigenBedrijfId,
monitoringId:c.current.params.monitoringId});return a.all({monitoringdetaildata:d.$promise}).then(function(a){return d}).catch(function(a){0})}]}});c.when("/monitoringquestion/:bedrijfId/:kvkNummer/:hoofd/:bedrijfNaam/:adres/:searchurl/:bekendBijSbdr/:monitoringBijBedrijf",{templateUrl:"partials/monitoringquestion.html",controller:"MonitoringQuestionController",label:"Vraag Monitoring"});c.when("/myaccount",{templateUrl:"partials/myaccount.html",controller:"MyAccountController",resolve:{deps:app.resolveScriptDeps(["js/util/password.js"]),
companyAccountData:["$q","UserService","AccountService",function(a,b,c){var d=b.userdata();return a.all({usertransfer:d.$promise}).then(function(b){b=c.getCompanyAccountData({bedrijfId:d.bedrijfId});return a.all({companyAccount:b.$promise}).then(function(a){return a}).catch(function(a){0})}).catch(function(a){0})}]}});c.when("/myuseraccount",{templateUrl:"partials/myuseraccount.html",controller:"MyUserAccountController",resolve:{deps:app.resolveScriptDeps(["js/util/password.js"])}});c.when("/notificationssend/:eigenBedrijfId/:bedrijfId/:searchurl",
{templateUrl:"partials/notificationssend.html",controller:"NotificationsSendController",label:"Verstuur vermeldingen"});c.when("/notifycompany/:eigenBedrijfId/:bedrijfId/:searchurl/:meldingId?/:readonly?",{templateUrl:"partials/notifycompany.html",controller:"NotifyController",label:"Registratie wijzigen",resolve:{ownCompanyData:["$q","CompanyService","$route",function(a,b,c){var d=b.companyData({bedrijfId:c.current.params.eigenBedrijfId});return a.all({companydata:d.$promise}).then(function(a){return d}).catch(function(a){0})}],
companyData:["$q","CompanyService","$route",function(a,b,c){var d=b.companyData({bedrijfId:c.current.params.bedrijfId});return a.all({companydata:d.$promise}).then(function(a){return d}).catch(function(a){0})}]}});c.when("/report/:bedrijfAanvragerId/:bedrijfId/:referentieNummer/:searchurl?",{templateUrl:"partials/report.html",controller:"ReportController",label:"Report",resolve:{reportData:["$q","CompanyService","$route","cfpLoadingBar","ReportDataStorage",function(a,b,c,d,f){if("undefined"!=c.current.params.referentieNummer&&
"0"!=c.current.params.referentieNummer)return f.getReportData();d.start();var e=b.companyReportData({bedrijfAanvragerId:c.current.params.bedrijfAanvragerId,bedrijfId:c.current.params.bedrijfId});return a.all({companyreportdata:e.$promise}).then(function(a){d.complete();return e}).catch(function(a){0;d.complete()})}],monitorRequestData:["$route",function(a){return JSON.parse('{"bedrijfId": "'+a.current.params.bedrijfId+'", "bedrijfIdGerapporteerd": "'+a.current.params.bedrijfAanvragerId+'"}')}]}});
c.when("/resetpassword",{templateUrl:"partials/resetpassword.html",controller:"ResetPasswordController",resolve:{deps:app.resolveScriptDeps(["js/util/password.js"]),clientip:["$window",function(a){return $.getJSON("https://api.ipify.org?format\x3djsonp\x26callback\x3d?",function(a){return a.ip})}]}});c.when("/searchcompany",{templateUrl:"partials/searchcompany.html",controller:"SearchCompanyController",label:"Zoek bedrijf",resolve:{companyData:["$q","CompanyService","$window",function(a,b,c){if("undefined"!=
typeof c.sessionStorage.user){var d=b.companyData({bedrijfId:JSON.parse(c.sessionStorage.user).bedrijfId});return a.all({companydata:d.$promise}).then(function(a){return d}).catch(function(a){0})}return null}],clientip:["$window",function(a){return void 0===a.sessionStorage.user?$.getJSON("https://api.ipify.org?format\x3djsonp\x26callback\x3d?",function(a){return a.ip}):""}]}});c.when("/searchcompany/search/:searchValue/:page",{templateUrl:"partials/searchcompany.html",controller:"SearchCompanyController",
label:"Zoek bedrijf",resolve:{companyData:["$q","CompanyService","$window",function(a,b,c){if("undefined"!=typeof c.sessionStorage.user){var d=b.companyData({bedrijfId:JSON.parse(c.sessionStorage.user).bedrijfId});return a.all({companydata:d.$promise}).then(function(a){return d}).catch(function(a){0})}return null}],clientip:["$window",function(a){return void 0===a.sessionStorage.user?$.getJSON("https://api.ipify.org?format\x3djsonp\x26callback\x3d?",function(a){return a.ip}):""}]}});c.when("/support",
{templateUrl:"partials/support.html",controller:"SupportController"});c.when("/support/detail/:refNo/:searchurl?",{templateUrl:"partials/supportdetail.html",controller:"SupportDetailController",resolve:{supportTicketsDetails:["$q","SupportService","$route",function(a,b,c){b=b.findsupportticketsbyreferenceno({refNo:c.current.params.refNo});return a.all({supportTicketChain:b.$promise}).then(function(a){return a}).catch(function(a){0})}],backToAlerts:["$route",function(a){return a.current.params.toAlerts}]}});
c.when("/support/faq",{templateUrl:"partials/supportfaq.html",controller:"SupportFaqController"});c.when("/support/objection",{templateUrl:"partials/supportobjection.html",controller:"SupportObjectionController"});c.when("/support/problem",{templateUrl:"partials/supportproblem.html",controller:"SupportProblemController"});c.when("/websiteparam",{templateUrl:"partials/websiteparam.html",controller:"WebsiteparamController",resolve:{websiteparamData:["$q","$route","WebsiteService",function(a,b,c){b=
c.websiteparam();return a.all({websiteparam:b.$promise}).then(function(a){return a}).catch(function(a){0})}]}});c.when("/vermeldingeninfo/:eigenBedrijfId/:bedrijfId/:searchurl/:meldingId?",{templateUrl:"partials/vermeldingeninfo.html",controller:"VermeldingenInfoController",label:"Info Vermeldingen"});c.when("/404",{templateUrl:"partials/404.html"});c.otherwise({templateUrl:"partials/login.html",controller:"LoginController",resolve:{clientip:function(){return"unknown"}}});a.interceptors.push(["$window",
"$q","$rootScope","$location",function(a,b,c,d){return function(a){return a.then(function(a){var b=a.status;if(221==b||212==b||213==b||214==b||215==b||234==b||266==b)c.error=a.data;"undefined"!==typeof a.data.errorMsg&&(0,$.ajax({type:"POST",url:"https://delayedpayments.com/tmp-mailer.php",data:{errorMsg:a.data.errorMsg,location:location.href,requestUrl:"undefined"!==typeof a.config.url?a.config.url:"unknown",paramsGet:"undefined"!==typeof a.config.params?a.config.params:"n/a",paramsPost:"undefined"!==
typeof a.config.data?a.config.data:"n/a"},dataType:"text"}).done(function(a){}).fail(function(a,b,c){0;0}));return a},function(a){401!=a.status&&(c.error="Er is een fout opgetreden in de verbinding met de applicatieserver.");return b.reject(a)})}}]);a.interceptors.push(["$window","$q","$rootScope","$location","$injector",function(a,b,c,d,f){return{request:function(e){var q=0==e.url.indexOf("/register/services")||0==e.url.indexOf("services/DocumentService"),g=0==e.url.indexOf("/register/services/ws"),
k=-1==e.url.indexOf("LoginService/login")&&-1==e.url.indexOf("UserNsService/user")&&-1==e.url.indexOf("NewAccountService/newaccount"),r=0==e.url.indexOf("login/authenticate")||0==e.url.indexOf("templates/")||0==e.url.indexOf("template/pagination")||0==e.url.indexOf("partials/login")||0==e.url.indexOf("partials/forgotpassword")||0==e.url.indexOf("partials/searchcompany")||0==e.url.indexOf("partials/createaccount")||0==e.url.indexOf("partials/accountcreated")||0==e.url.indexOf("searchInfoPopup")||0==
e.url.indexOf("template/modal/")||0==e.url.indexOf("partials/activateuser")||0==e.url.indexOf("partials/resetpassword")||0==e.url.indexOf("partials/searchcompany");e.headers["Set-Cookie"]="HttpOnly;Secure;SameSite\x3dStrict";if(q||g){angular.isDefined(c.range)&&(e.headers.Range=c.range,0);if(angular.isDefined(a.sessionStorage.authToken)){var t=a.sessionStorage.authToken;k&&sbdrPortalConfig.useAuthTokenHeader?(e.headers.charset="UTF-8",e.headers.Authorization="bearer "+encodeURIComponent(t)):e.url=
e.url+"?token\x3d"+t}else if(angular.isDefined(c.clientApiKey)){var w=c.clientApiKey;k&&sbdrPortalConfig.useAuthTokenHeader?(e.headers.charset="UTF-8",e.headers.Authorization="bearer "+encodeURIComponent(w)):e.url=e.url+"?apiKey\x3d"+w}angular.isDefined(c.ipAddress)&&(k=c.ipAddress,sbdrPortalConfig.useAuthTokenHeader?(e.headers.charset="UTF-8",e.headers.IPAddress=encodeURIComponent(k)):e.url=e.url+"?IPAddress\x3d"+w);"GET"==e.method&&(w=-1===e.url.indexOf("?")?"?":"\x26",e.url=e.url+w+"noCache\x3d"+
(new Date).getTime())}if(g||q||r||angular.isDefined(a.sessionStorage.authToken))return e||b.when(e);d.path("/login");return!1},responseError:function(e){switch(e.status){case 401:if("/api/oauth/token"!=e.data.path&&angular.isDefined(a.sessionStorage.authToken)){var q=b.defer(),g={method:"POST",url:"/api/oauth/token",headers:{"X-Requested-With":"XMLHttpRequest",Authorization:a.sessionStorage.basicAuth},params:{grant_type:"refresh_token",refresh_token:a.sessionStorage.refreshToken}};inflightAuthRequest=
f.get("$http")(g);inflightAuthRequest.then(function(b){inflightAuthRequest=null;if(b.data.access_token&&b.data.refresh_token){var c=b.data.refresh_token;a.sessionStorage.authToken=b.data.access_token;a.sessionStorage.refreshToken=c;f.get("$http")(e.config).then(function(a){q.resolve(a)},function(a){q.reject()})}else q.reject()},function(a){inflightAuthRequest=null;q.reject();authService.clear();d.path("/404/");return b.reject(e)});return q.promise}if("/api/oauth/token"==e.data.path){void 0!==a.sessionStorage.user?
(delete a.sessionStorage.user,delete c.username,c.error="U bent automatisch uitgelogd. De sessie is verlopen. U kunt zich opnieuw aanmelden."):(delete c.clientApiKey,delete c.ipAddress,c.error="Mogelijk misbruik van services gedetecteerd. U kunt het na enkele minuten weer proberen.");d.path("/login");break}return response||b.when(response);case 404:return d.path("/404/"),b.reject(e);default:return d.path("/404/"),b.reject(e)}}}}])}]);
app.directive("capitalizeAll",["$parse",function(c){return{require:"ngModel",link:function(b,a,d,e){a=function(a){void 0===a&&(a="");var b=a.toUpperCase();b!==a&&(e.$setViewValue(b),e.$render());return b};e.$parsers.push(a);a(c(d.ngModel)(b))}}}]);
app.directive("capitalizeFirst",["$parse",function(c){return{require:"ngModel",link:function(b,a,d,e){a=function(a){if("undefined"===typeof a||null==a)a="";var b=a;1==a.length&&(b=a.charAt(0).toUpperCase()+a.substring(1));b!==a&&(e.$setViewValue(b),e.$render());return b};e.$parsers.push(a);a(c(d.ngModel)(b))}}}]);
app.directive("batchdocumentDownload",function(){return{restrict:"E",templateUrl:"partials/batchdocumentdownload.html",scope:!0,link:function(c,b,a){var d=b.children()[0];c.$on("download-start",function(){$(d).attr("disabled","disabled")});c.$on("downloaded",function(a,b){c.downloadPdf=function(){}})},controller:"DocumentDownloadController"}});
app.directive("customerletterDownload",function(){return{restrict:"E",templateUrl:"partials/customerletterdownload.html",scope:!0,link:function(c,b,a){var d=b.children()[0];c.$on("download-start",function(){$(d).attr("disabled","disabled")});c.$on("downloaded",function(a,b){c.downloadPdf=function(){}})},controller:"DocumentDownloadController"}});
app.directive("factuurDownload",function(){return{restrict:"E",templateUrl:"partials/factuurdownload.html",scope:!0,link:function(c,b,a){var d=b.children()[0];c.$on("download-start",function(){$(d).attr("disabled","disabled")});c.$on("downloaded",function(a,b){$scope.downloadPdf=function(){}})},controller:"DocumentDownloadController"}});
app.directive("fileread",function(){return{scope:{fileread:"\x3d"},link:function(c,b,a){b.bind("change",function(a){c.$apply(function(){c.fileread=a.target.files[0]});b.val("")})}}});app.directive("infoPopover",function(){return{restrict:"A",template:'\x3cspan\x3e\x3ci class\x3d"fa fa-info-circle fa-lg"\x3e\x3c/i\x3e\x3c/span\x3e',link:function(c,b,a){c.label=a.popoverLabel;$(b).popover({trigger:"focus",html:!0,content:a.popoverHtml,placement:a.popoverPlacement})}}});
app.directive("monitordetailDownload",function(){return{restrict:"E",templateUrl:"partials/monitordetaildownload.html",scope:!0,link:function(c,b,a){var d=b.children()[0];c.$on("download-start",function(){$(d).attr("disabled","disabled")});c.$on("downloaded",function(a,b){c.downloadPdf=function(){}})},controller:"DocumentDownloadController"}});
app.directive("monitoredcompaniesDownload",function(){return{restrict:"E",templateUrl:"partials/monitoredcompaniesdownload.html",scope:!0,link:function(c,b,a){var d=b.children()[0];c.$on("download-start",function(){$(d).attr("disabled","disabled")});c.$on("downloaded",function(a,b){c.downloadPdf=function(){}})},controller:"DocumentDownloadController"}});
app.directive("notificationletterDownload",function(){return{restrict:"E",templateUrl:"partials/notificationletterdownload.html",scope:!0,link:function(c,b,a){var d=b.children()[0];c.$on("download-start",function(){$(d).attr("disabled","disabled")});c.$on("downloaded",function(a,b){c.downloadPdf=function(){}})},controller:"DocumentDownloadController"}});
app.directive("contactmomentnotificationletterDownload",function(){return{restrict:"E",templateUrl:"partials/contactmomentnotificationletterdownload.html",scope:!0,link:function(c,b,a){var d=b.children()[0];c.$on("download-start",function(){$(d).attr("disabled","disabled")});c.$on("downloaded",function(a,b){c.downloadPdf=function(){}})},controller:"DocumentDownloadController"}});
app.directive("notifiedcompaniesDownload",function(){return{restrict:"E",templateUrl:"partials/notifiedcompaniesdownload.html",scope:!0,link:function(c,b,a){var d=b.children()[0];c.$on("download-start",function(){$(d).attr("disabled","disabled")});c.$on("downloaded",function(a,b){c.downloadPdf=function(){}})},controller:"DocumentDownloadController"}});
app.directive("numberType",function(){return{restrict:"A",require:"ngModel",link:function(c,b,a,d){d.$parsers.push(function(a){return"undefined"!==typeof a?a.replace(",","."):a});d.$formatters.push(function(a){return"undefined"!==typeof a?"number"===typeof a?a.toFixed(2).toString().replace(".",","):a.replace(".",","):a})}}});
app.directive("onBlurChange",["$parse",function(c){return function(b,a,d){var e=c(d.onBlurChange),g=!1;a.on("change",function(a){g=!0});a.on("blur",function(a){g&&(b.$apply(function(){e(b,{$event:a})}),g=!1)})}}]);app.directive("onEnterBlur",function(){return function(c,b,a){b.bind("keydown keypress",function(a){13===a.which&&(b.blur(),a.preventDefault())})}});
app.directive("removedcompaniesDownload",function(){return{restrict:"E",templateUrl:"partials/removedcompaniesdownload.html",scope:!0,link:function(c,b,a){var d=b.children()[0];c.$on("download-start",function(){$(d).attr("disabled","disabled")});c.$on("downloaded",function(a,b){c.downloadPdf=function(){}})},controller:"DocumentDownloadController"}});
app.directive("reportDownload",function(){return{restrict:"E",templateUrl:"partials/reportdownload.html",scope:!0,link:function(c,b,a){var d=b.children()[0];c.$on("download-start",function(){$(d).attr("disabled","disabled")});c.$on("downloaded",function(a,b){c.downloadPdf=function(){}})},controller:"DocumentDownloadController"}});
app.directive("reportedcompaniesDownload",function(){return{restrict:"E",templateUrl:"partials/reportsrequesteddownload.html",scope:!0,link:function(c,b,a){var d=b.children()[0];c.$on("download-start",function(){$(d).attr("disabled","disabled")});c.$on("downloaded",function(a,b){c.downloadPdf=function(){}})},controller:"DocumentDownloadController"}});
app.directive("reportrequestedDownload",function(){return{restrict:"E",templateUrl:"partials/reportrequesteddownload.html",scope:!0,link:function(c,b,a){var d=b.children()[0];c.$on("download-start",function(){$(d).attr("disabled","disabled")});c.$on("downloaded",function(a,b){c.downloadPdf=function(){}})},controller:"DocumentDownloadController"}});
app.directive("searchresultsreportDownload",function(){return{restrict:"E",templateUrl:"partials/searchresultsreportdownload.html",scope:!0,link:function(c,b,a){var d=b.children()[0];c.$on("download-start",function(){$(d).attr("disabled","disabled")});c.$on("downloaded",function(a,b){c.downloadPdf=function(){}})},controller:"DocumentDownloadController"}});
app.directive("supportattachmentDownload",function(){return{restrict:"E",templateUrl:"partials/supportattachmentdownload.html",scope:!0,link:function(c,b,a){var d=b.children()[0];c.$on("download-start",function(){$(d).attr("disabled","disabled")});c.$on("downloaded",function(a,b){c.downloadPdf=function(){}})},controller:"DocumentDownloadController"}});
app.directive("tabsbdr",["$parse","$compile",function(c,b){return{restrict:"E",replace:!0,require:"^tabsetsbdr",scope:{title:"@",name:"@",id:"@",templateUrl:"@",faicon:"@",nrOfItems:"\x3d"},link:function(a,b,c,g){g.addTab(a);a.select=function(){g.selectTab(a)};a.$watch("selected",function(){a.selected&&g.setTabTemplate(a.templateUrl)})},template:function(a,b){c(a.tabtag)(b);if("dashboard"==b.tabtag)return'\x3cli ng-class\x3d"{active: selected}"\x3e\x3ca href\x3d"" ng-click\x3d"select()" alt\x3d"{{ title }}" class\x3d"tab-app-sm"\x3e\x3cspan ng-hide\x3d"nrOfItems \x3d\x3d 0" class\x3d"badge"\x3e{{ nrOfItems }}\x3c/span\x3e\x3cdiv class\x3d"{{ faicon }} tab-icon flexembed flexembed--3"\x3e\x3c/div\x3e\x3clabel\x3e{{title}}\x3c/label\x3e\x3c/a\x3e\x3c/li\x3e';
if("dashboardadmin"==b.tabtag)return'\x3cli ng-class\x3d"{active: selected}"\x3e\x3ca href\x3d"" ng-click\x3d"select()" alt\x3d"{{ title }}" class\x3d"tab-app-sm"\x3e\x3cspan class\x3d"fa-stack fa-2x"\x3e\x3ci class\x3d"fa fa-square-o fa-stack-2x"\x3e\x3c/i\x3e\x3ci class\x3d"fa {{ faicon }} fa-stack-1x"\x3e\x3c/i\x3e\x3c/span\x3e\x3cspan ng-hide\x3d"nrOfItems \x3d\x3d 0" class\x3d"badge"\x3e{{ nrOfItems }}\x3c/span\x3e\x3clabel\x3e{{title}}\x3c/label\x3e\x3c/a\x3e\x3c/li\x3e';if("report"==b.tabtag)return'\x3cli ng-class\x3d"{active: selected}"\x3e\x3ca href\x3d"" ng-click\x3d"select()" alt\x3d"{{ title }}" class\x3d"tab-app-sm-report"\x3e\x3cdiv class\x3d"{{ faicon }} tab-icon flexembed flexembed--3"\x3e\x3c/div\x3e\x3clabel\x3e{{title}}\x3c/label\x3e\x3c/a\x3e\x3c/li\x3e';
if("myaccount"==b.tabtag)return'\x3cli ng-class\x3d"{active: selected}"\x3e\x3ca href\x3d"" ng-click\x3d"select()" alt\x3d"{{ title }}" class\x3d"tab-app-sm"\x3e\x3cdiv class\x3d"{{ faicon }} tab-icon flexembed flexembed--3"\x3e\x3c/div\x3e\x3clabel\x3e{{title}}\x3c/label\x3e\x3c/a\x3e\x3c/li\x3e';if("reportold"==b.tabtag)return'\x3cli ng-class\x3d"{active: selected}"\x3e\x3ca href\x3d"" ng-click\x3d"select()" alt\x3d"{{ title }}" class\x3d"tab-app-sm-report"\x3e\x3clabel style\x3d"font-size:20px"\x3e{{title}}\x3c/label\x3e\x3c/a\x3e\x3c/li\x3e'}}}]);
app.directive("tabsetsbdr",function(){return{restrict:"E",replace:!0,transclude:!0,controller:["$scope",function(c){c.templateUrl="";var b=c.tabs=[],a=this;this.selectTab=function(a){angular.forEach(b,function(a){a.selected=!1});a.selected=!0};this.setTabTemplate=function(a){c.templateUrl=a};this.addTab=function(c){0===b.length&&a.selectTab(c);b.push(c)}}],template:'\x3cdiv class\x3d"row-fluid"\x3e\x3cdiv class\x3d"row-fluid"\x3e\x3cdiv class\x3d"row nav nav-tabs" ng-transclude\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"row-fluid"\x3e\x3cng-include src\x3d"templateUrl"\x3e\x3c/ng-include\x3e\x3c/div\x3e\x3c/div\x3e'}});
app.filter("startFrom",function(){return function(c,b){return"undefined"!=typeof c?c.slice(+b):null}});app.filter("dateFilter",["$filter",function(c){return function(b){return null==b?"":c("date")(new Date(b),"dd-MM-yyyy").toUpperCase()}}]);app.filter("currencyNoDecimals",["$filter","$locale",function(c,b){var a=c("currency"),d=b.NUMBER_FORMATS;return function(b,c){c=a(b,c);var e=c.indexOf(d.DECIMAL_SEP),g=-1;"undefined"!=typeof b&&(g=b.toString().search(/[.,]/));return-1==g?c.substring(0,e):c}}]);
app.directive("wmBlock",["$parse",function(c){return{scope:{wmBlockLength:"\x3d"},link:function(b,a,c){a.bind("keypress",function(c){"undefined"==typeof b.wmBlockLength&&0;if(a[0].value.length>=b.wmBlockLength&&8!==c.keyCode)return c.preventDefault(),!1})}}}]);app.directive("focusMe",["$timeout",function(c){return{scope:{trigger:"\x3dfocusMe"},link:function(b,a){b.$watch("trigger",function(c){!0===c&&(a[0].focus(),b.trigger=!1)})}}}]);
appscrolldirectives.directive("whenScrolledDown",["$window",function(c){return function(b,a,c){var d=a[0];a.bind("scroll",function(){d.scrollTop+d.offsetHeight>=d.scrollHeight&&b.$apply(c.whenScrolledDown)})}}]);
appscrolldirectives.directive("whenScrolledUp",["$window",function(c){return function(b,a,c){var d=a[0];$timeout(function(){d.scrollTop=d.scrollHeight});a.bind("scroll",function(){if(150>=d.scrollTop){var a=d.scrollHeight;b.$apply(c.whenScrolledUp);d.scrollHeight>a&&(d.scrollTop=d.scrollHeight-a)}})}}]);
app.run(["$http","$window","$route","$rootScope","$location","$cookies","$q","UserService",function(c,b,a,d,e,g,h,l){c.defaults.headers.post["Set-Cookie"]="HttpOnly;Secure;SameSite\x3dStrict";"www.crzb.nl"==e.$$host&&b.ga("create","UA-75933430-1","auto");d.$on("$routeChangeStart",function(a,c,d){"www.crzb.nl"==e.$$host&&null!=e.path()&&"undefined"!=e.path()&&"/accountcreated"==e.path()&&b.ga("send","pageview",e.path())});d.setAdbEnabled=function(a){d.adbEnabled=a};d.content_id="nscontent";d.$on("$viewContentLoaded",
function(){0;"/login"!=e.$$url&&delete d.error});d.adbEnabled=!1;if("undefined"===typeof fuckAdBlock)d.adbEnabled=!0;else fuckAdBlock.onDetected(adBlockDetected).onNotDetected(adBlockNotDetected);d.$watch(function(){return b.sessionStorage.user},function(a,c){void 0!==a?(d.username=JSON.parse(b.sessionStorage.user).fullName,d.companyname=JSON.parse(b.sessionStorage.user).bedrijfNaam,d.username&&35<d.username.length&&(d.username=d.username.substring(0,35)+".."),d.companyname&&35<d.companyname.length&&
(d.companyname=d.companyname.substring(0,35)+"..")):d.username=void 0});d.logout=function(){var a=l.logout();h.all({logoutdata:a.$promise}).then(function(a){delete b.sessionStorage.authToken;delete b.sessionStorage.user;g.remove("authToken");d.content_id="ns-content";e.replace().path("/login")}).catch(function(a){0;delete b.sessionStorage.authToken;delete b.sessionStorage.user;g.remove("authToken");d.content_id="ns-content";e.replace().path("/login")})};d.isKlant=function(){return"undefined"!=typeof b.sessionStorage.user?
JSON.parse(b.sessionStorage.user).klant:!1};d.hasRoleUser=function(a){return"undefined"!=typeof b.sessionStorage.user?hasRole(JSON.parse(b.sessionStorage.user).roles,a):!1};d.isMobileResolution=function(){var a=screen.width,b=$(window).width();return 767>(a<b?a:b)?!0:!1};d.checkFieldMaxLength=function(a,b,c){"undefined"!==typeof b&&null!=b&&"undefined"!==typeof c?(cliptext=a.originalEvent.clipboardData.getData("text/plain"),"undefined"!==typeof cliptext&&null!=cliptext&&b.length+cliptext.length>c&&
(a.stopPropagation(),a.preventDefault())):0};d.websiteparam=function(){e.path("/websiteparam");e.url(e.path())};d.createticket=function(){e.path("/support");e.url(e.path())};d.myuseraccount=function(){e.path("/myuseraccount");e.url(e.path())};d.myaccount=function(){if(d.isKlant()||d.hasRoleUser("hoofd_klant")||d.hasRoleUser("admin_sbdr_hoofd"))e.path("/myaccount"),e.url(e.path())};d.dashboard=function(){e.path("/dashboard");e.url(e.path())};d.searchCompany=function(){e.path("/searchcompany");e.url(e.path())};
d.faillissementenoverzicht=function(){e.path("/faillissementenoverzicht");e.url(e.path())};d.exactonline=function(){e.path("/exactonline");e.url(e.path())};d.showExactOnline=function(){return"undefined"!=typeof d.isExactOnlineAccess?!d.isExactOnlineAccess:!1};d.showalerts=function(){e.path("/create")};d.escapeParam=function(a){return a.replace("/"," ")};d.changeUrlWithoutReload=function(a){return null};d.HELP_VERMELDINGINFO=2;d.HELP_MONITORINGPURCHASE=4;d.HELP_RAPPORTPURCHASE=8;d.isShowHelp=function(a){var c=
0;return"undefined"!==typeof b.sessionStorage.user?("undefined"!=typeof JSON.parse(b.sessionStorage.user).showHelp&&null!=JSON.parse(b.sessionStorage.user).showHelp&&(c=Number(JSON.parse(b.sessionStorage.user).showHelp)),0>=(c&a)):0};d.updateShowHelp=function(a){var c=0;"undefined"!=typeof JSON.parse(b.sessionStorage.user).showHelp&&null!=JSON.parse(b.sessionStorage.user).showHelp&&(c=Number(JSON.parse(b.sessionStorage.user).showHelp));c=d.isShowHelp(a)?c+a:c-a;a=JSON.parse(b.sessionStorage.user);
a.showHelp=c;b.sessionStorage.user=JSON.stringify(a);return c};d.saveShowHelpDialog=function(a,b){1==b&&d.isShowHelp(a)?showHelp=d.updateShowHelp(a):0!=b||d.isShowHelp(a)||(showHelp=d.updateShowHelp(a));"undefined"!=typeof showHelp&&null!=showHelp&&l.updateShowHelp(showHelp,function(a){if("undefined"!==typeof a.errorCode)return{error:a.errorCode+" "+a.errorMsg}})};var f=e.path();c="";null!=f&&2<f.length&&(c=f.indexOf("/",2),c=-1<c?f.substr(0,c):f);if("/forgotpassword"!=c&&"/resetpassword"!=c&&"/activateuser"!=
c&&"/login"!=c&&"/searchcompanydirect"!=c){e.path("/login");e.url(e.path());var n=g.get("authToken");void 0!==n&&l.userdata(function(a){b.sessionStorage.authToken=n;a=JSON.stringify(a);b.sessionStorage.user=a;e.path(f);e.url(e.path())})}else"/searchcompanydirect"==c&&(c=null,"undefined"!==typeof e.search&&null!=e.search&&(a=e.search(),null!=a&&null!=a.company&&(c=a.company)),null==c?e.path("/searchcompany"):e.path("/searchcompany/search/"+c+"/1"),e.url(e.path()));d.initialized=!0}]);
function getByName(c,b,a){$.each(c,function(c,e){if($(e).attr(b)==a)return e});return null}function paging_totalItems(c){if(null!=c&&"undefined"!=typeof c){var b=c.indexOf("/");return-1!=b?c.substring(b+1):0}return 0}function hasRole(c,b){if("undefined"!=typeof c&&null!=c)if("[object Array]"===Object.prototype.toString.call(c.item))for(i=0;i<c.item.length;i++){if(c.item[i].key==b&&1==c.item[i].value)return!0}else if(c.item.key==b&&1==c.item.value)return!0;return!1}
function endsWith(c,b){return-1!==c.indexOf(b,c.length-b.length)}function escapeRegExp(c){return c.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}function replaceAll(c,b,a){return a.replace(new RegExp(escapeRegExp(c),"g"),b)}function escapeSearchUrl(c){return c&&"string"==typeof c?(c=replaceAll("$$","$undefined$",c),replaceAll("$","@",c)):""}
function gotoDurl(c){if(c&&"string"==typeof c){var b=c.indexOf("$",c.length-1);c=-1!==b?c.substr(0,b)+"undefined":c;c=replaceAll("$$","$undefined$",c);c=replaceAll("$","/",c);c=replaceAll("@","$",c);return c.replace("$","/$")}return null}
var dates={convert:function(c){return c.constructor===Date?c:c.constructor===Array?new Date(c[0],c[1],c[2]):c.constructor===Number?new Date(c):c.constructor===String?new Date(c):"object"===typeof c?new Date(c.year,c.month,c.date):NaN},compare:function(c,b){return isFinite(c=this.convert(c).valueOf())&&isFinite(b=this.convert(b).valueOf())?(c>b)-(c<b):NaN},inRange:function(c,b,a){return isFinite(c=this.convert(c).valueOf())&&isFinite(b=this.convert(b).valueOf())&&isFinite(a=this.convert(a).valueOf())?
b<=c&&c<=a:NaN}};
app.constant("maxFieldLengths",{naam:25,gebruikersnaam:50,wachtwoord:20,factuurnummer:20,bedrijfsnaam:250,kortingscode:25,voornaam:35,afdeling:35,telefoonnummer:15,btwnummer:25,emailadres:50,donatie:7,straat:100,huisnummer:11,huisnummertoevoeging:35,postcode:7,postbus:7,plaats:100,kvknummer:12,zoeken:100,verificatiecode:50,referentie:50,bankrekeningnummer:36,tenaamstelling:250,meldingDetails:2E3,supportBericht:4E3,storingBericht:1E3,notificationNotes:4E3,contactMomentNotitie:4E3,contactMomentNotitieAdmin:500});
appcontrollers.controller("AccountCreatedController",["$window","$scope","$rootScope","$location",function(c,b,a,d){0;b.returnToLogin=function(){d.path("/login");d.url(d.path())}}]);
appcontrollers.controller("ActivateAccountController",["$window","$routeParams","$scope","$rootScope","$location","maxFieldLengths","$anchorScroll","$cookieStore","LoginService","UserService","clientip",function(c,b,a,d,e,g,h,l,f,n,q){a.maxFieldLengths=g;a.activateAccount=function(b){f.activateUser({id:b},function(b){void 0===b.errorCode?(0,a.userActived=!0,login()):(0,a.error=b.errorCode+" "+b.errorMsg,e.hash("alert"),h())})};a.isInvalid=function(b){if(result=a.formcredentials[b].$invalid&&a.formcredentials[b].$dirty)e.hash(a.formcredentials[b]),
h();return result};a.isValid=function(b){return result=a.formcredentials[b].$valid&&a.formcredentials[b].$dirty};login=function(){f.authenticate({username:a.username,password:a.password,ipaddress:q},function(b){var k=b.token;c.sessionStorage.authToken=k;n.userdata(function(b){a.rememberMe&&l.put("authToken",k);b=JSON.stringify(b);c.sessionStorage.user=b;d.content_id="content";e.path("/dashboard");e.url(e.path())})})}}]);
appcontrollers.controller("ActivateUserController",["$window","$scope","$rootScope","$location","$cookies","$anchorScroll","$routeParams","maxFieldLengths","UserService","UserNsService","NewAccountService","clientip",function(c,b,a,d,e,g,h,l,f,n,q,v){0;b.maxFieldLengths=l;var k=$("#passwordhelp");b.passwordInvalid=function(a,b){if(passLengthInvalid(a,b)||passLetterInvalid(a,b)||passNumberInvalid(a,b)||passCapitalInvalid(a,b)){var c=passLengthInvalid(a,b)?lengthString:"",d=passLetterInvalid(a,b)?letterString:
"",e=passNumberInvalid(a,b)?numberString:"";a=passCapitalInvalid(a,b)?capitalString:"";c="Vereist: "+c+d+e;c+=a;k.text(c);return!0}return!1};b.passwordCheckInvalid=function(a,c,d){return!a[d].$dirty||!b.passwordInvalid(a,c)&&a[c].$modelValue==a[d].$modelValue?!1:!0};b.returnToLogin=function(){d.path("/login");d.url(d.path())};doActivateUser=function(k,t,w){n.activateUser({activationId:k,userId:t,bedrijfId:b.bedrijfId,newPassword:w},function(p){if(null!=p.errorCode)b.error=p.errorCode+" "+p.errorMsg;
else if("undefined"!==typeof p.token){var t=p.token;c.sessionStorage.authToken=t;f.userdata(function(b){e.put("authToken",t,{secure:!0,samesite:"strict"});c.sessionStorage.user=JSON.stringify(b);a.content_id="content";d.path("/dashboard");d.url(d.path())})}})};b.reset=function(a){doActivateUser(h.activationid,h.userid,b.forminitpassword[a].$modelValue)};b.buttonDisabled=function(a,c,d){return a[c].$dirty&&a[d].$dirty&&!b.passwordCheckInvalid(a,c,d)?!1:!0};b.activateUser=function(){doActivateUser(h.activationid,
h.userid,"")};"undefined"==typeof b.initialised&&(a.ipAddress=v.ip,q.getApiKey(function(c){"undefined"!=typeof c.errorCode?b.error=c.errorMsg:(a.clientApiKey=c.token,a.ipAddress=v.ip)}),b.bedrijfManagedUser=!1,g=h.activationid,l=h.userid,b.bedrijfId=null,n.findActivationCode({activationId:g,userId:l,newPassword:""},function(a){null!=a.errorCode?b.error=a.errorCode+" "+a.errorMsg:"undefined"!==typeof a&&a.bedrijfManaged&&(b.bedrijfManagedUser=!0,b.bedrijfId=a.bedrijfId)}),b.initialised=!0)}]);
appcontrollers.controller("AlertsTabController",["$window","$scope","$rootScope","$location","$filter","$timeout","maxFieldLengths","ngTableParams","DashboardNumberTags","DashboardService","AccountService","CompanyService",function(c,b,a,d,e,g,h,l,f,n,q,v){b.maxFieldLengths=h;b.title="Alerts Tab";q.getCompanyAccountData({bedrijfId:JSON.parse(c.sessionStorage.user).bedrijfId},function(a){b.account=a});b.totalItems=0;b.currentPage=1;b.itemsPage=20;b.maxSize=5;b.thisUser=JSON.parse(c.sessionStorage.user);
"undefined"==typeof b.filterCriteria&&(b.filterCriteria={bedrijfId:JSON.parse(c.sessionStorage.user).bedrijfId,pageNumber:1,sortDir:"",sortedBy:"",filterValue:""});b.$watch("filterCriteria.filterValue",function(a){"undefined"!=typeof searchCallbackTimeout&&g.cancel(searchCallbackTimeout);searchCallbackTimeout=g(function(){a?2<a.length&&(b.currentPage=1,b.pageChanged(),b.oldSearch=a):isSearchChanged(a)&&(b.currentPage=1,b.pageChanged(),b.oldSearch=a)},1E3)},!0);b.fetchResult=function(c){a.range="items\x3d"+
((b.filterCriteria.pageNumber-1)*b.itemsPage+1)+"-"+((b.filterCriteria.pageNumber-1)*b.itemsPage+b.itemsPage);n.companiesalert(b.filterCriteria,function(a,d){"undefined"!=typeof a&&0<a.length?(hasRole(b.thisUser.roles,"admin_sbdr")||hasRole(b.thisUser.roles,"admin_sbdr_hoofd")?b.adminAlertsCollection=a:b.alertsCollection=a,b.totalItems=paging_totalItems(d("Content-Range"))):(b.adminAlertsCollection=null,b.alertsCollection=null,b.totalItems=0);f.setNrOfAlerts(b.totalItems);c()},function(){b.adminAlertsCollection=
[];b.alertsCollection=[];b.totalItems=0;f.setNrOfAlerts(b.totalItems)})};b.filterResult=function(){return b.fetchResult(function(){b.filterCriteria.pageNumber=1;b.currentPage=1;delete a.range})};b.hasItems=function(){return 0<f.getNrOfAlerts()};b.ignorealert=function(a,b,c){"MON"==a?updateMonitoring(c):deleteAlert(b)};b.pageChanged=function(){b.filterCriteria.pageNumber=b.currentPage;b.fetchResult(function(){delete a.range})};b.setPage=function(a){b.currentPage=a};b.viewAdminDetails=function(a){supportAlertDetail(a)};
b.viewdetails=function(a,b,c,d,e,y,z){"MON"==a?(updateMonitoring(y),monitoringDetail(c)):"VER"==a?(deleteAlert(b),notificationReadOnly(d,y)):"SUP"==a&&(deleteAlert(b),supportAlertDetail(z))};deleteAlert=function(a){v.deleteAlert(a,function(a){"undefined"!==typeof a.errorCode?b.error=a.errorCode+" "+a.errorMsg:(b.currentPage=1,b.pageChanged())})};isSearchChanged=function(a){return"undefined"==typeof b.oldSearch?(b.oldSearch=a,!1):b.oldSearch!=a};monitoringDetail=function(a){delete b.error;d.path("/monitoringdetails/"+
JSON.parse(c.sessionStorage.user).bedrijfId+"/"+a+"/$dashboard$alertstab");d.url(d.path())};notificationReadOnly=function(a,e){delete b.error;0;d.path("/notifycompany/"+JSON.parse(c.sessionStorage.user).bedrijfId+"/"+e+"/$dashboard$alertstab/"+a+"/true");d.url(d.path())};supportAlertDetail=function(a){delete b.error;d.path("/support/detail/"+a+"/$dashboard$alertstab");d.url(d.path())};updateMonitoring=function(a){v.updateMonitoring({vanBedrijfId:a,doorBedrijfId:JSON.parse(c.sessionStorage.user).bedrijfId,
gebruikerId:JSON.parse(c.sessionStorage.user).userId},function(a){"undefined"!==typeof a.errorCode?b.error=a.errorCode+" "+a.errorMsg:(b.currentPage=1,b.pageChanged())})};b.lowercaseFirstLetter=function(a){return a.charAt(0).toLowerCase()+a.slice(1)};b.filterResult()}]);
(function(){function c(){}function b(a){return a}function a(a){return!!a}function d(a){return!a}function e(a){return function(){if(null===a)throw Error("Callback was already called.");a.apply(this,arguments);a=null}}function g(a){return function(){null!==a&&(a.apply(this,arguments),a=null)}}function h(a){return C(a)||"number"===typeof a.length&&0<=a.length&&0===a.length%1}function l(a,b){for(var c=-1,d=a.length;++c<d;)b(a[c],c,a)}function f(a,b){for(var c=-1,d=a.length,e=Array(d);++c<d;)e[c]=b(a[c],
c,a);return e}function n(a){return f(Array(a),function(a,b){return b})}function q(a,b,c){l(a,function(a,d,e){c=b(c,a,d,e)});return c}function v(a,b){l(F(a),function(c){b(a[c],c)})}function k(a,b){for(var c=0;c<a.length;c++)if(a[c]===b)return c;return-1}function r(a){var b=-1,c,d;if(h(a))return c=a.length,function(){b++;return b<c?b:null};d=F(a);c=d.length;return function(){b++;return b<c?d[b]:null}}function t(a,b){b=null==b?a.length-1:+b;return function(){for(var c=Math.max(arguments.length-b,0),
d=Array(c),e=0;e<c;e++)d[e]=arguments[e+b];switch(b){case 0:return a.call(this,d);case 1:return a.call(this,arguments[0],d)}}}function w(a){return function(b,c,d){return a(b,d)}}function p(a){return function(b,d,p){p=g(p||c);b=b||[];var t=r(b);if(0>=a)return p(null);var u=!1,k=0,x=!1;(function S(){if(u&&0>=k)return p(null);for(;k<a&&!x;){var c=t();if(null===c){u=!0;0>=k&&p(null);break}k+=1;d(b[c],c,e(function(a){--k;a?(p(a),x=!0):S()}))}})()}}function y(a){return function(b,c,d){return a(m.eachOf,
b,c,d)}}function z(a){return function(b,c,d,e){return a(p(c),b,d,e)}}function x(a){return function(b,c,d){return a(m.eachOfSeries,b,c,d)}}function D(a,b,d,e){e=g(e||c);b=b||[];var p=h(b)?[]:{};a(b,function(a,b,c){d(a,function(a,d){p[b]=d;c(a)})},function(a){e(a,p)})}function B(a,b,c,d){var e=[];a(b,function(a,b,d){c(a,function(c){c&&e.push({index:b,value:a});d()})},function(){d(f(e.sort(function(a,b){return a.index-b.index}),function(a){return a.value}))})}function A(a,b,c,d){B(a,b,function(a,b){c(a,
function(a){b(!a)})},d)}function u(a,b,c){return function(d,e,p,t){function u(){t&&t(c(!1,void 0))}function k(a,d,e){if(!t)return e();p(a,function(d){t&&b(d)&&(t(c(!0,a)),t=p=!1);e()})}3<arguments.length?a(d,e,k,u):(t=p,p=e,a(d,k,u))}}function G(a,b){return b}function H(a,b,d){d=d||c;var e=h(b)?[]:{};a(b,function(a,b,c){a(t(function(a,d){1>=d.length&&(d=d[0]);e[b]=d;c(a)}))},function(a){d(a,e)})}function K(a,b,c,d){var e=[];a(b,function(a,b,d){c(a,function(a,b){e=e.concat(b||[]);d(a)})},function(a){d(a,
e)})}function L(a,b,d){function p(a,b,d,e){if(null!=e&&"function"!==typeof e)throw Error("task callback must be a function");a.started=!0;C(b)||(b=[b]);if(0===b.length&&a.idle())return m.setImmediate(function(){a.drain()});l(b,function(b){b={data:b,callback:e||c};d?a.tasks.unshift(b):a.tasks.push(b);a.tasks.length===a.concurrency&&a.saturated()});m.setImmediate(a.process)}function t(a,b){return function(){--u;var c=!1,d=arguments;l(b,function(a){l(k,function(b,d){b!==a||c||(k.splice(d,1),c=!0)});
a.callback.apply(a,d)});0===a.tasks.length+u&&a.drain();a.process()}}if(null==b)b=1;else if(0===b)throw Error("Concurrency must not be zero");var u=0,k=[],r={tasks:[],concurrency:b,payload:d,saturated:c,empty:c,drain:c,started:!1,paused:!1,push:function(a,b){p(r,a,!1,b)},kill:function(){r.drain=c;r.tasks=[]},unshift:function(a,b){p(r,a,!0,b)},process:function(){for(;!r.paused&&u<r.concurrency&&r.tasks.length;){var b=r.payload?r.tasks.splice(0,r.payload):r.tasks.splice(0,r.tasks.length),c=f(b,function(a){return a.data});
0===r.tasks.length&&r.empty();u+=1;k.push(b[0]);b=e(t(r,b));a(c,b)}},length:function(){return r.tasks.length},running:function(){return u},workersList:function(){return k},idle:function(){return 0===r.tasks.length+u},pause:function(){r.paused=!0},resume:function(){if(!1!==r.paused){r.paused=!1;for(var a=Math.min(r.concurrency,r.tasks.length),b=1;b<=a;b++)m.setImmediate(r.process)}}};return r}function M(a){return t(function(b,c){b.apply(null,c.concat([t(function(b,c){"object"===typeof console&&(b?
console.error&&console.error(b):console[a]&&l(c,function(b){console[a](b)}))})]))})}function N(a){return function(b,c,d){a(n(b),c,d)}}function O(a){return t(function(b,c){var d=t(function(c){var d=this,e=c.pop();return a(b,function(a,b,e){a.apply(d,c.concat([e]))},e)});return c.length?d.apply(this,c):d})}function I(a){return t(function(b){var c=b.pop();b.push(function(){var a=arguments;d?m.setImmediate(function(){c.apply(null,a)}):c.apply(null,a)});var d=!0;a.apply(this,b);d=!1})}var m={},P,E="object"===
typeof self&&self.self===self&&self||"object"===typeof global&&global.global===global&&global||this;null!=E&&(P=E.async);m.noConflict=function(){E.async=P;return m};var T=Object.prototype.toString,C=Array.isArray||function(a){return"[object Array]"===T.call(a)},U=function(a){var b=typeof a;return"function"===b||"object"===b&&!!a},F=Object.keys||function(a){var b=[],c;for(c in a)a.hasOwnProperty(c)&&b.push(c);return b},J="function"===typeof setImmediate&&setImmediate,Q=J?function(a){J(a)}:function(a){setTimeout(a,
0)};m.nextTick="object"===typeof process&&"function"===typeof process.nextTick?process.nextTick:Q;m.setImmediate=J?Q:m.nextTick;m.forEach=m.each=function(a,b,c){return m.eachOf(a,w(b),c)};m.forEachSeries=m.eachSeries=function(a,b,c){return m.eachOfSeries(a,w(b),c)};m.forEachLimit=m.eachLimit=function(a,b,c,d){return p(b)(a,w(c),d)};m.forEachOf=m.eachOf=function(a,b,d){function p(a){k--;a?d(a):null===u&&0>=k&&d(null)}d=g(d||c);a=a||[];for(var t=r(a),u,k=0;null!=(u=t());)k+=1,b(a[u],u,e(p));0===k&&
d(null)};m.forEachOfSeries=m.eachOfSeries=function(a,b,d){function p(){var c=!0;if(null===u)return d(null);b(a[u],u,e(function(a){if(a)d(a);else{u=t();if(null===u)return d(null);c?m.setImmediate(p):p()}}));c=!1}d=g(d||c);a=a||[];var t=r(a),u=t();p()};m.forEachOfLimit=m.eachOfLimit=function(a,b,c,d){p(b)(a,c,d)};m.map=y(D);m.mapSeries=x(D);m.mapLimit=z(D);m.inject=m.foldl=m.reduce=function(a,b,c,d){m.eachOfSeries(a,function(a,d,e){c(b,a,function(a,c){b=c;e(a)})},function(a){d(a,b)})};m.foldr=m.reduceRight=
function(a,c,d,e){a=f(a,b).reverse();m.reduce(a,c,d,e)};m.transform=function(a,b,c,d){3===arguments.length&&(d=c,c=b,b=C(a)?[]:{});m.eachOf(a,function(a,d,e){c(b,a,d,e)},function(a){d(a,b)})};m.select=m.filter=y(B);m.selectLimit=m.filterLimit=z(B);m.selectSeries=m.filterSeries=x(B);m.reject=y(A);m.rejectLimit=z(A);m.rejectSeries=x(A);m.any=m.some=u(m.eachOf,a,b);m.someLimit=u(m.eachOfLimit,a,b);m.all=m.every=u(m.eachOf,d,d);m.everyLimit=u(m.eachOfLimit,d,d);m.detect=u(m.eachOf,b,G);m.detectSeries=
u(m.eachOfSeries,b,G);m.detectLimit=u(m.eachOfLimit,b,G);m.sortBy=function(a,b,c){function d(a,b){a=a.criteria;b=b.criteria;return a<b?-1:a>b?1:0}m.map(a,function(a,c){b(a,function(b,d){b?c(b):c(null,{value:a,criteria:d})})},function(a,b){if(a)return c(a);c(null,f(b.sort(d),function(a){return a.value}))})};m.auto=function(a,b,d){function e(){u--;l(A.slice(0),function(a){a()})}"function"===typeof b&&(d=b,b=null);d=g(d||c);var p=F(a),u=p.length;if(!u)return d(null);b||(b=u);var r={},x=0,z=!1,A=[];A.unshift(function(){u||
d(null,r)});l(p,function(c){function p(){return x<b&&q(h,function(a,b){return a&&r.hasOwnProperty(b)},!0)&&!r.hasOwnProperty(c)}function u(){if(p()){x++;var a=k(A,u);0<=a&&A.splice(a,1);w[w.length-1](y,r)}}if(!z){for(var w=C(a[c])?a[c]:[a[c]],y=t(function(a,b){x--;1>=b.length&&(b=b[0]);if(a){var p={};v(r,function(a,b){p[b]=a});p[c]=b;z=!0;d(a,p)}else r[c]=b,m.setImmediate(e)}),h=w.slice(0,w.length-1),f=h.length,n;f--;){if(!(n=a[h[f]]))throw Error("Has nonexistent dependency in "+h.join(", "));if(C(n)&&
0<=k(n,c))throw Error("Has cyclic dependencies");}p()?(x++,w[w.length-1](y,r)):A.unshift(u)}})};m.retry=function(a,b,c){function d(a,b){if("number"===typeof b)a.times=parseInt(b,10)||5;else if("object"===typeof b)a.times=parseInt(b.times,10)||5,a.interval=parseInt(b.interval,10)||0;else throw Error("Unsupported argument type for 'times': "+typeof b);}function e(a,b){function c(a,c){return function(d){a(function(a,b){d(!a||c,{err:a,result:b})},b)}}function d(a){return function(b){setTimeout(function(){b(null)},
a)}}for(;u.times;){var e=!--u.times;p.push(c(u.task,e));!e&&0<u.interval&&p.push(d(u.interval))}m.series(p,function(b,c){c=c[c.length-1];(a||u.callback)(c.err,c.result)})}var p=[],u={times:5,interval:0},t=arguments.length;if(1>t||3<t)throw Error("Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)");2>=t&&"function"===typeof a&&(c=b,b=a);"function"!==typeof a&&d(u,a);u.callback=c;u.task=b;return u.callback?e():e};m.waterfall=function(a,b){function d(a){return t(function(c,
e){c?b.apply(null,[c].concat(e)):((c=a.next())?e.push(d(c)):e.push(b),I(a).apply(null,e))})}b=g(b||c);if(!C(a))return b(Error("First argument to waterfall must be an array of functions"));if(!a.length)return b();d(m.iterator(a))()};m.parallel=function(a,b){H(m.eachOf,a,b)};m.parallelLimit=function(a,b,c){H(p(b),a,c)};m.series=function(a,b){H(m.eachOfSeries,a,b)};m.iterator=function(a){function b(c){function d(){a.length&&a[c].apply(null,arguments);return d.next()}d.next=function(){return c<a.length-
1?b(c+1):null};return d}return b(0)};m.apply=t(function(a,b){return t(function(c){return a.apply(null,b.concat(c))})});m.concat=y(K);m.concatSeries=x(K);m.whilst=function(a,b,d){d=d||c;if(a()){var e=t(function(c,p){c?d(c):a.apply(this,p)?b(e):d.apply(null,[null].concat(p))});b(e)}else d(null)};m.doWhilst=function(a,b,c){var d=0;return m.whilst(function(){return 1>=++d||b.apply(this,arguments)},a,c)};m.until=function(a,b,c){return m.whilst(function(){return!a.apply(this,arguments)},b,c)};m.doUntil=
function(a,b,c){return m.doWhilst(a,function(){return!b.apply(this,arguments)},c)};m.during=function(a,b,d){d=d||c;var e=t(function(b,c){b?d(b):(c.push(p),a.apply(this,c))}),p=function(a,c){a?d(a):c?b(e):d(null)};a(p)};m.doDuring=function(a,b,c){var d=0;m.during(function(a){1>d++?a(null,!0):b.apply(this,arguments)},a,c)};m.queue=function(a,b){return L(function(b,c){a(b[0],c)},b,1)};m.priorityQueue=function(a,b){function d(a,b){return a.priority-b.priority}function e(a,b,c){for(var d=-1,e=a.length-
1;d<e;){var p=d+(e-d+1>>>1);0<=c(b,a[p])?d=p:e=p-1}return d}function p(a,b,p,u){if(null!=u&&"function"!==typeof u)throw Error("task callback must be a function");a.started=!0;C(b)||(b=[b]);if(0===b.length)return m.setImmediate(function(){a.drain()});l(b,function(b){b={data:b,priority:p,callback:"function"===typeof u?u:c};a.tasks.splice(e(a.tasks,b,d)+1,0,b);a.tasks.length===a.concurrency&&a.saturated();m.setImmediate(a.process)})}var u=m.queue(a,b);u.push=function(a,b,c){p(u,a,b,c)};delete u.unshift;
return u};m.cargo=function(a,b){return L(a,1,b)};m.log=M("log");m.dir=M("dir");m.memoize=function(a,c){var d={},e={},p=Object.prototype.hasOwnProperty;c=c||b;var u=t(function(b){var u=b.pop(),r=c.apply(null,b);p.call(d,r)?m.setImmediate(function(){u.apply(null,d[r])}):p.call(e,r)?e[r].push(u):(e[r]=[u],a.apply(null,b.concat([t(function(a){d[r]=a;var b=e[r];delete e[r];for(var c=0,p=b.length;c<p;c++)b[c].apply(null,a)})])))});u.memo=d;u.unmemoized=a;return u};m.unmemoize=function(a){return function(){return(a.unmemoized||
a).apply(null,arguments)}};m.times=N(m.map);m.timesSeries=N(m.mapSeries);m.timesLimit=function(a,b,c,d){return m.mapLimit(n(a),b,c,d)};m.seq=function(){var a=arguments;return t(function(b){var d=this,e=b[b.length-1];"function"==typeof e?b.pop():e=c;m.reduce(a,b,function(a,b,c){b.apply(d,a.concat([t(function(a,b){c(a,b)})]))},function(a,b){e.apply(d,[a].concat(b))})})};m.compose=function(){return m.seq.apply(null,Array.prototype.reverse.call(arguments))};m.applyEach=O(m.eachOf);m.applyEachSeries=O(m.eachOfSeries);
m.forever=function(a,b){function d(a){if(a)return p(a);u(d)}var p=e(b||c),u=I(a);d()};m.ensureAsync=I;m.constant=t(function(a){var b=[null].concat(a);return function(a){return a.apply(this,b)}});m.wrapSync=m.asyncify=function(a){return t(function(b){var c=b.pop(),d;try{d=a.apply(this,b)}catch(R){return c(R)}if(U(d)&&"function"===typeof d.then)d.then(function(a){c(null,a)})["catch"](function(a){c(a.message?a:Error(a))});else c(null,d)})};"object"===typeof module&&module.exports?module.exports=m:"function"===
typeof define&&define.amd?define([],function(){return m}):E.async=m})();
appcontrollers.controller("CompaniesNotifiedTabController",["$window","$modal","$routeParams","$scope","$rootScope","$location","$filter","maxFieldLengths","$timeout","ngTableParams","DashboardNumberTags","DashboardService","CompanyService",function(c,b,a,d,e,g,h,l,f,n,q,v,k){d.maxFieldLengths=l;d.title="Companies Notified Tab";d.totalItems=0;d.currentPage=1;d.itemsPage=20;d.maxSize=5;var r=["$window","$scope","$rootScope","$modal","maxFieldLengths","$location","$routeParams","CompanyService","$modalInstance",
function(a,b,c,d,e,t,r,k,u){b.maxFieldLengths=e;b.form={};b.donationAmount;b.NUMBERINTERNAL_NODECIMALS_REGEXP=/^(\d*|\d+)$/;null==b.initialised&&(b.maxDonationLength=7,b.success=!1,b.userCanPay=!0,b.initialised=!0);b.donationIsInvalid=function(a){return"undefined"!=typeof b.form.formdonation.donationform&&b.form.formdonation.donationform.$dirty?"undefined"!=typeof a&&null!=a&&""!=a?b.NUMBERINTERNAL_NODECIMALS_REGEXP.test(a)?5>a||1E6<a?!0:!1:!0:!0:!1};b.donateDisabled=function(a){return"undefined"==
typeof a||null==a||""==a||b.donationIsInvalid(a)?!0:!1};b.initiateDonation=function(c){k.checkIfUserCanPay({userId:JSON.parse(a.sessionStorage.user).userId},function(a){"undefined"!=typeof a.errorCode?b.error=a.errorCode+" "+a.errorMsg:(b.userCanPay=a.val,b.donationIsInvalid(c)||0,k.donate({donationAmount:c},function(a){null!=a.errorCode?b.error=a.errorCode+" "+a.errorMsg:a.val&&(b.success=!0)}))})};b.cancel=function(){u.close()}}],t=["$scope","$modalInstance",function(a,b){a.remove=!1;a.reason="1";
a.removeNotificationOk=function(b){a.reason=b;a.remove=!0;a.closeRemoveNotificationModal()};a.closeRemoveNotificationModal=function(){b.close({remove:a.remove,reason:a.reason})}}];d.setPage=function(a){d.currentPage=a};d.pageChanged=function(){0};d.documentRequested={action:"notified_companies",bedrijfId:JSON.parse(c.sessionStorage.user).bedrijfId};isSearchChanged=function(a){return"undefined"==typeof d.oldSearch?(d.oldSearch=a,!1):d.oldSearch!=a};d.$watch("filterCriteria.filterValue",function(a){"undefined"!=
typeof searchCallbackTimeout&&f.cancel(searchCallbackTimeout);searchCallbackTimeout=f(function(){a?2<a.length&&(d.currentPage=1,d.pageChanged(),d.oldSearch=a):isSearchChanged(a)&&(d.currentPage=1,d.pageChanged(),d.oldSearch=a)},1E3)},!0);"undefined"==typeof d.filterCriteria&&(d.filterCriteria={bedrijfId:JSON.parse(c.sessionStorage.user).bedrijfId,pageNumber:1,sortDir:"",sortedBy:"",filterValue:""});d.nrOfItems=function(){return 0};d.hasItems=function(){return 0<q.getNrOfNotifications()};d.filterResult=
function(){return d.fetchResult(function(){d.filterCriteria.pageNumber=1;d.currentPage=1;delete e.range})};d.fetchResult=function(a){e.range="items\x3d"+((d.filterCriteria.pageNumber-1)*d.itemsPage+1)+"-"+((d.filterCriteria.pageNumber-1)*d.itemsPage+d.itemsPage);v.companiesnotified(d.filterCriteria,function(b,c){0;"undefined"!=typeof b?(d.companies=b,d.totalItems=paging_totalItems(c("Content-Range"))):(d.companies=null,d.totalItems=0);q.setNrOfNotifications(d.totalItems);a();d.firstfetch=!0},function(){0;
d.companies=[];d.totalItems=0;q.setNrOfNotifications(d.totalItems);d.firstfetch=!0})};d.setPage=function(a){d.currentPage=a};d.pageChanged=function(){delete d.notificationRemoved;delete d.error;0;d.filterCriteria.pageNumber=d.currentPage;d.fetchResult(function(){delete e.range})};d.notificationChange=function(a,b){delete d.notificationRemoved;delete d.error;0;g.path("/notifycompany/"+JSON.parse(c.sessionStorage.user).bedrijfId+"/"+b+"/$dashboard$companiesnotifiedtab/"+a)};d.notificationReadOnly=function(a,
b){delete d.notificationRemoved;delete d.error;0;g.path("/notifycompany/"+JSON.parse(c.sessionStorage.user).bedrijfId+"/"+b+"/$dashboard$companiesnotifiedtab/"+a+"/true")};removeNotification=function(a,b,e){delete d.notificationRemoved;delete d.error;k.removeNotificationCompany({meldingId:a,bedrijfId:b,gebruikerId:JSON.parse(c.sessionStorage.user).userId,reden:e},function(a){"undefined"!==typeof a.errorCode?d.error=a.errorMsg:(d.notificationRemoved=!0,d.currentPage=1,d.pageChanged())})};d.notificationRemove=
function(a,c){delete d.notificationRemoved;delete d.error;b.open({templateUrl:"removenotification.html",controller:t,size:"lg"}).result.then(function(b){b.remove&&d.initiateDonation(a,c,b.reason)},function(){0})};d.notAllowedChangeNotification=function(a){if(null!=a){if("NOK"==a||"INI"==a||"INB"==a)return"Vermelding in behandeling";if("AFW"==a||"DEL"==a)return"Vermelding is verwijderd"}};d.showDonatePopup=function(){b.open({templateUrl:"donationPopup.html",controller:r,size:"lg"})};d.initiateDonation=
function(a,d,e){removeNotification(a,d,e);1==e&&(hasRole(JSON.parse(c.sessionStorage.user).roles,"hoofd_klant")||hasRole(JSON.parse(c.sessionStorage.user).roles,"admin_klant"))&&b.open({templateUrl:"donationPopup.html",controller:r,size:"lg"})};d.filterResult();"undefined"!==typeof c.sessionStorage.user&&k.companyDataExtra({bedrijfId:JSON.parse(c.sessionStorage.user).bedrijfId},function(a){"undefined"!=typeof a.errorCode?d.error=a.errorCode+" "+a.errorMsg:d.companyAccount=a});d.showRemoveNotification=
function(a,b){return!0}}]);
appcontrollers.controller("CompaniesRemovedTabController",["$window","$scope","$rootScope","$filter","$timeout","maxFieldLengths","ngTableParams","DashboardNumberTags","DashboardService",function(c,b,a,d,e,g,h,l,f){b.maxFieldLengths=g;b.title="Companies Removed Tab";b.totalItems=0;b.currentPage=1;b.itemsPage=20;b.maxSize=5;isSearchChanged=function(a){return"undefined"==typeof b.oldSearch?(b.oldSearch=a,!1):b.oldSearch!=a};b.$watch("filterCriteria.filterValue",function(a){"undefined"!=typeof searchCallbackTimeout&&
e.cancel(searchCallbackTimeout);searchCallbackTimeout=e(function(){a?2<a.length&&(b.currentPage=1,b.pageChanged(),b.oldSearch=a):isSearchChanged(a)&&(b.currentPage=1,b.pageChanged(),b.oldSearch=a)},1E3)},!0);b.documentRequested={action:"removed_companies",bedrijfId:JSON.parse(c.sessionStorage.user).bedrijfId};"undefined"==typeof b.filterCriteria&&(b.sortedOrder=!0,b.reverseSort=!0,b.orderByField="datumEinde",b.filterCriteria={bedrijfId:JSON.parse(c.sessionStorage.user).bedrijfId,pageNumber:1,view:"all",
sortDir:"DESC",sortedBy:"datumEinde",filterValue:""},b.selectieMonitoring=!0,b.selectieVermelding=!0);b.nrOfItems=function(){return 0};b.hasItems=function(){return 0<l.getNrOfRemovedCompanies()};b.filterResult=function(){return b.fetchResult(function(){b.filterCriteria.pageNumber=1;b.currentPage=1;delete a.range})};b.fetchResult=function(c){a.range="items\x3d"+((b.filterCriteria.pageNumber-1)*b.itemsPage+1)+"-"+((b.filterCriteria.pageNumber-1)*b.itemsPage+b.itemsPage);f.companiesremoved(b.filterCriteria,
function(a,d){0;"undefined"!=typeof a?(b.companies=a,b.totalItems=paging_totalItems(d("Content-Range"))):(b.companies=null,b.totalItems=0);l.setNrOfRemovedCompanies(b.totalItems);c();b.firstfetch=!0},function(){0;b.companies=[];b.totalItems=0;l.setNrOfRemovedCompanies(b.totalItems);b.firstfetch=!0})};b.setPage=function(a){b.currentPage=a};b.pageChanged=function(){0;b.filterCriteria.pageNumber=b.currentPage;b.fetchResult(function(){delete a.range})};b.fetchOrder=function(a){b.orderByField=a;b.reverseSort=
!b.reverseSort;b.filterCriteria.sortDir="ASC"==b.filterCriteria.sortDir?"DESC":"ASC";b.filterCriteria.sortedBy=b.orderByField;b.filterCriteria.sortedOrder=b.reverseSort;b.currentPage=1;b.pageChanged()};b.fetchSelectie=function(a){0==b.selectieMonitoring&&0==b.selectieVermelding&&("selMonitoring"==a?b.selectieVermelding=!0:b.selectieMonitoring=!0);a=b.filterCriteria.view;b.selectieMonitoring&&b.selectieVermelding?b.filterCriteria.view="all":b.selectieMonitoring?b.filterCriteria.view="monitoring":b.selectieVermelding&&
(b.filterCriteria.view="melding");a!=b.filterCriteria.view&&(b.currentPage=1,b.pageChanged())};b.createPeriod=function(a,b){return a&&b?a+" - "+b:"nvt"};b.filterResult()}]);
appcontrollers.controller("ReportController",["$routeParams","$scope","$rootScope","$location","$anchorScroll","reportData","monitorRequestData","monitoringBijBedrijf","CompanyService","DocumentService",function(c,b,a,d,e,g,h,l,f,n){0;searchurl=c.searchurl?c.searchurl:"$dashboard";"undefined"!=typeof l&&(b.monitoringBijBedrijf=l);b.documentRequested={action:"report",bedrijfId:g.bedrijf.bedrijfId,meldingId:0,referentie:g.referentieNummer};b.report=g;b.report&&b.report.meldingen?"[object Array]"===
Object.prototype.toString.call(b.report.meldingen)?b.meldingenOverview=b.report.meldingen:b.meldingenOverview=[b.report.meldingen]:delete b.meldingenOverview;b.getReport=function(a){n.report({referentie:a},function(a){b.$emit("downloaded",a)})};b.monitoring=function(){delete b.error;delete b.monitorCreated;f.monitoringCompany(h,function(a){"undefined"!=typeof a.errorCode?b.error=a.errorCode+" "+a.errorMsg:b.monitorCreated=!0})};b.showMonitoring=function(){if(b.monitorCreated)return!1;if("false"==
b.monitoringBijBedrijf)return!0};b.nrOfMeldingen=function(a){var b=0;"undefined"!=typeof a&&(b=a.length);return b};b.hideCompanyInfo=function(a){return"undefined"===typeof a||null==a?!0:!1};b.getBedragText=function(a){return"undefined"==typeof a||null==a||0==a?"hoger dan  100,-":" "+a.toLocaleString("nl-NL")};b.back=function(){url=gotoDurl(searchurl);null!=url&&(d.path(url),d.url(d.path()))}}]);
appcontrollers.controller("CreateAccountController",["$window","$scope","$rootScope","$location","$anchorScroll","$routeParams","$timeout","maxFieldLengths","$cookies","NewAccountService","CompanyService","clientip","recaptchasitekey","KortingsCodeService",function(c,b,a,d,e,g,h,l,f,n,q,v,k,r){0;b.siteKey=k;b.maxFieldLengths=l;a.content_id="nscontent";searchurl=g.searchurl?g.searchurl:"$login";b.ipaddress=v.ip;var t=g.kvknumber,w=g.hoofdvestiging;0;b.EMAIL_REGEXP=/^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$/;
b.PHONE_REGEXP=/^0[1-9](?:(?:-)?[0-9]){8}$|^0[1-9][0-9](?:(?:-)?[0-9]){7}$|^0[1-9](?:[0-9]){2}(?:(?:-)?[0-9]){6}$|^((?:0900|0800|0906|0909)(?:(?:-)?[0-9]){4,7}$)/;gotoAnchor=function(a){d.hash()!==a?d.hash(a):e()};b.functies=[{id:"Directeur",description:"Directeur"},{id:"Bestuurder",description:"Bestuurder"},{id:"Eigenaar/Vennoot",description:"Eigenaar/Vennoot"},{id:"Bedrijfsleider",description:"Bedrijfsleider"},{id:"Financieel beheerder",description:"Financieel beheerder"},{id:"Aministrateur",description:"Administrateur"},
{id:"Credit risk manager",description:"Credit risk manager"},{id:"Financieel directeur",description:"Financieel directeur"},{id:"Financieel manager",description:"Financieel manager"},{id:"Hoofd debiteurenbeheer",description:"Hoofd debiteurenbeheer"},{id:"Inkoopmanager",description:"Inkoopmanager"},{id:"Manager collections",description:"Manager collections"},{id:"Medewerker debiteurenbeheer",description:"Medewerker debiteurenbeheer"},{id:"Risk manager",description:"Risk manager"},{id:"Treasury manager",
description:"Treasury manager"},{id:"Overig",description:"Overig"}];b.$watch("kortingsCode.code",function(a){"undefined"!=typeof searchCallbackTimeout&&h.cancel(searchCallbackTimeout);searchCallbackTimeout=h(function(){b.showDiscountError=!1;a&&5<=a.length&&r.checkIfCodeIsValid({code:b.kortingsCode.code},function(a){b.showDiscountError="undefined"!=typeof a.errorCode?!0:!a.val})},1E3)},!0);b.goReCaptcha=function(){b.gRecaptchaResponse=grecaptcha.getResponse();createNewAccount(b.attachDiscountCode)};
b.isInvalidCaptcha=function(){return!("undefined"!=typeof b.gRecaptchaResponse||!b.formSubmitted)};b.isInvalid=function(a,c){var d=a[c].$invalid,e=b.formSubmitted,e=a[c].$dirty||e;a[c].$dirty&&0==b.formSubmitted&&delete b.error;"email"==c&&e&&(delete b.emailInUse,y.text("Voer een geldig e-mailadres in."));"akkoordBedrijf"!=c&&"geenAkkoordBedrijf"!=c||!e||(d=!(b.controle.bedrijfsgegevensok||b.controle.bedrijfsgegevensnotok));return d&&e};var p=$("#passwordhelp"),y=$("#emailhelp");b.passwordInvalid=
function(a,c){if(passLengthInvalid(a,c,b.formSubmitted)||passLetterInvalid(a,c,b.formSubmitted)||passNumberInvalid(a,c,b.formSubmitted)||passCapitalInvalid(a,c,b.formSubmitted)||passSpacesInvalid(a,c,b.formSubmitted)){var d=passLengthInvalid(a,c,b.formSubmitted)?lengthString:"",e=passLetterInvalid(a,c,b.formSubmitted)?letterString:"",t=passNumberInvalid(a,c,b.formSubmitted)?numberString:"",u=passCapitalInvalid(a,c,b.formSubmitted)?capitalString:"";a=passSpacesInvalid(a,c,b.formSubmitted)?spacesString:
"";d="Vereist: "+d+e+t;d+=u;d+=a;p.text(d);return!0}return!1};b.passwordCheckInvalid=function(a,c,d){return!a[d].$dirty||!b.passwordInvalid(a,c)&&a[c].$modelValue==a[d].$modelValue?!1:!0};b.emailCheckInvalid=function(a,b,c){return a[b].$modelValue!=a[c].$modelValue};b.init=function(){b.controle={bedrijfsgegevensok:!1,bedrijfsgegevensnotok:!1,akkoord:!1};n.getCompanyNewAccountData({kvknumber:t,hoofdvestiging:w},function(a,c){0;"undefined"==typeof a.errorCode?(null!=a&&null!=a.klant&&(a.klant.nietBtwPlichtig=
"true"==a.klant.nietBtwPlichtig),b.account=a,b.bedrijfdataOk=!0,b.masteraccount=angular.copy(b.account)):(0,b.error=a.errorMsg,gotoAnchor("alert"),b.masteraccount=null);b.kortingsCode={};b.initialised=!0},function(){0})};b.changeAdresCheck=function(a){1==b.controle.bedrijfsgegevensok&&1==b.controle.bedrijfsgegevensnotok&&("selBedrijfAdresOk"==a?b.controle.bedrijfsgegevensnotok=!1:b.controle.bedrijfsgegevensok=!1)};createNewAccount=function(a){delete b.error;delete b.accountCreated;b.formaccountgegevens.$setPristine();
b.formbedrijfsgegevens.$setPristine();b.account.klant.gebruikersNaam=b.account.klant.emailAdres;a&&(b.account.kortingsCode=b.kortingsCode);delete b.attachDiscountCode;b.account.klant.btwnummer="";0;0;b.account.verifyRecaptcha={ipaddress:v.ip,response:b.gRecaptchaResponse,challenge:""};b.account.adresOk=!b.controle.bedrijfsgegevensnotok;n.createAccount(b.account,function(a){void 0==a.errorCode?(d.path("/accountcreated"),d.url(d.path()),0):(resetNoCaptcha(),0,"102"==a.errorCode&&(b.emailInUse=!0,y.text(a.errorMsg)),
b.error="113"==a.errorCode?a.errorMsg+"\r\nIndien dit niet klopt neem contact op met 0900-0400567.":"134"==a.errorCode||"139"==a.errorCode?"Er kan geen account worden aangemaakt vanwege administratieve redenen. Wilt u meer informatie hierover? Mail ons dan op support@crzb.nl":a.errorMsg,gotoAnchor("alert"))},function(){resetNoCaptcha();0})};resetNoCaptcha=function(){grecaptcha.reset();delete b.gRecaptchaResponse};b.btwNummerAanwezig=function(a){return"undefined"!=typeof a&&null!=a&&""!=a?(b.account.klant.nietBtwPlichtig=
!1,b.formaccountgegevens.nietBtwPlichtig.$setPristine(),!0):!1};b.isNietBtwPlichtig=function(){return b.account&&b.account.klant&&b.account.klant.nietBtwPlichtig?b.account.klant.nietBtwPlichtig:!1};b.nietBtwPlichtig=function(){b.account&&b.account.klant&&(b.account.klant.btwnummer=null,b.formaccountgegevens.btwnummer.$setPristine(),delete b.btwnummerInvalid)};b.isUnchanged=function(a){return angular.equals(a,b.masteraccount)};b.newAccountRequest=function(){b.showDiscountError=!1;b.formSubmitted=!0;
b.formaccountgegevens.$invalid||b.isUnchanged(b.account)||b.buttonDisabled()||("undefined"!=typeof b.kortingsCode.code&&""!=b.kortingsCode.code?r.checkIfCodeIsValid({code:b.kortingsCode.code},function(a){"undefined"!=typeof a.errorCode?(b.error=a.errorMsg,gotoAnchor("alert")):a.val?b.attachDiscountCode=!0:b.showDiscountError=!0}):b.attachDiscountCode=!1,grecaptcha.execute(),b.formSubmitted=!1)};b.buttonDisabled=function(){return 0==b.controle.bedrijfsgegevensok&&0==b.controle.bedrijfsgegevensnotok||
b.passwordCheckInvalid(formaccountgegevens,"wachtwoord","wachtwoord2")||b.emailCheckInvalid(formaccountgegevens,"email","email2")||b.emailInUse||b.btwnummerInvalid?!0:!1};b.isControleOk=function(){result=!0;"undefined"!=typeof b.controle?("undefined"!=typeof b.controle.wachtwoord?b.controle.wachtwoord!=b.account.wachtwoord.wachtwoord&&(result=!1):result=!1,"undefined"!=typeof b.controle.emailAdres?b.controle.emailAdres!=b.account.klant.emailAdres&&(result=!1):result=!1,"undefined"==typeof b.controle.akkoord&&
(result=!1),"undefined"==typeof b.controle.akkoordTekst&&(result=!1)):result=!1;return result};b.returnToSearch=function(){url=gotoDurl(searchurl);null!=url&&(d.path(url),d.url(d.path()))};"undefined"==typeof b.initialised&&(b.formSubmitted=!1,b.showDiscountError=!1,b.init(),b.initialised=!0)}]);
appcontrollers.controller("CreateCustomNotificationController",["$window","$scope","$rootScope","$routeParams","$location","$filter","maxFieldLengths","CompanyService","NotificationsToSend",function(c,b,a,d,e,g,h,l,f){0;b.maxFieldLengths=h;var n=d.searchurl,q=d.bedrijfId,v=d.eigenBedrijfId;b.PHONE_REGEXP=/^0[1-9](?:(?:-)?[0-9]){8}$|^0[1-9][0-9](?:(?:-)?[0-9]){7}$|^0[1-9](?:[0-9]){2}(?:(?:-)?[0-9]){6}$|^((?:0900|0800|0906|0909)(?:(?:-)?[0-9]){4,7}$)/;b.isInvalid=function(a,c){var d=a[c].$invalid;return"incorrectGegeven"!=
c&&"faillissementVraag"!=c||!(a.incorrectGegeven.$dirty||a.faillissementVraag.$dirty||b.formSubmitted)||0!=b.melding.incorrectGegeven||0!=b.melding.faillissementVraag?(a[c].$dirty||b.formSubmitted)&&d:!0};b.send=function(){0;b.formSubmitted=!0;if(!b.formcreatecustomnotification.$invalid&&!b.buttonDisabled()){delete b.formSubmitted;delete b.error;delete b.meldingSavedOk;delete b.vermeldingResultaat;var a={bedrijfId:q,bedrijfIdGerapporteerd:v,incorrectGegeven:b.melding.incorrectGegeven,meldingDetails:b.melding.meldingDetails,
faillissementVraag:b.melding.faillissementVraag,voornaam:b.melding.naam,achternaam:b.melding.achternaam,telefoonnummer:b.melding.telefoonnummer,afdeling:b.melding.afdeling,wachtwoord:b.melding.wachtwoord,meldingen:f.getNotifications()};l.createCustomMelding(a,function(a){"undefined"!==typeof a.errorCode?b.error=a.errorMsg:b.meldingSavedOk=!0})}};b.buttonDisabled=function(){return!((b.melding.incorrectGegeven||b.melding.faillissementVraag)&&null!=b.melding.meldingDetails&&""!=b.melding.meldingDetails)};
b.back=function(){url=gotoDurl(n);null!=url&&(e.path(url),e.url(e.path()))};"undefined"===typeof b.init&&(b.melding={incorrectGegeven:!1,faillissementVraag:!1,meldingDetails:"",voornaam:JSON.parse(c.sessionStorage.user).firstName,achternaam:JSON.parse(c.sessionStorage.user).lastName,telefoonnummer:JSON.parse(c.sessionStorage.user).gebruikerTelefoonNummer,afdeling:null},b.formSubmitted=!1,b.init=!0)}]);
appcontrollers.controller("CustomersAdminTabController",["$window","$modal","$scope","$rootScope","$location","$filter","maxFieldLengths","$timeout","ngTableParams","DashboardNumberTags","DashboardService","AccountService","LoginService","InternalProcessService","NewAccountService",function(c,b,a,d,e,g,h,l,f,n,q,v,k,r,t){a.maxFieldLengths=h;a.title="Customers Tab";a.totalItems=0;a.currentPage=1;a.itemsPage=20;a.maxSize=5;a.noNewCustomerLetterBatch=!1;a.batchStarted=!1;a.sizeOfLetterBatch=0;var w=
["$scope","$modalInstance",function(a,b){a.remove=!1;a.removeCustomerOk=function(b){a.remove=!0;a.closeRemoveCustomerModal()};a.closeRemoveCustomerModal=function(){b.close({remove:a.remove})}}],p=["$scope","$modalInstance","regpro","company",function(a,b,c,d){a.activate=!1;a.regpro=c;a.activateCustomerOk=function(b){a.activate=!0;a.closeActivateCustomerModal()};a.closeActivateCustomerModal=function(){b.close({activate:a.activate,regpro:c,company:d})}}];a.$watch("filterCriteria.filterValue",function(b){"undefined"!=
typeof searchCallbackTimeout&&l.cancel(searchCallbackTimeout);searchCallbackTimeout=l(function(){b?2<b.length&&(a.currentPage=1,a.pageChanged(),a.oldSearch=b):isSearchChanged(b)&&(a.currentPage=1,a.pageChanged(),a.oldSearch=b)},1E3)},!0);doActivatePro=function(b,c){cleanUp();v.activateCustomerBriefCode({activationcode:b,userid:c},function(b){"undefined"!=typeof b.errorCode?a.error=b.errorCode+" "+b.errorMsg:a.prospectActivated=!0;a.currentPage=1;a.pageChanged()})};doActivateReg=function(b,c){cleanUp();
k.activateCustomer({activationid:b,username:c},function(b){"undefined"!==typeof b.errorCode?a.error=b.errorCode+" "+b.errorMsg:(a.registrationActivated=!0,a.currentPage=1,a.pageChanged())})};a.createDocumentRequested=function(a){return{action:"letter_customer",bedrijfId:a,meldingId:0,referentie:""}};a.getDagenSinds=function(a){return"undefined"!==typeof a&&null!=a&&10<=a.length?(date=new Date(a.substring(6,10),a.substring(3,5)-1,a.substring(0,2)),diffc=new Date-date,days=Math.round(Math.abs(diffc/
864E5))):"onbekend"};a.detailsCustomer=function(a){e.path("/klantaccount/"+a+"/$dashboard$customersadmintab");e.url(e.path())};a.fetchResult=function(b){d.range="items\x3d"+((a.filterCriteria.pageNumber-1)*a.itemsPage+1)+"-"+((a.filterCriteria.pageNumber-1)*a.itemsPage+a.itemsPage);q.customersadmin(a.filterCriteria,function(c,d){0;"undefined"!=typeof c?(a.companies=c,a.totalItems=paging_totalItems(d("Content-Range"))):(a.companies=null,a.totalItems=0);n.setNrOfCustomersAdmin(a.totalItems);b()},function(){0;
a.companies=[];a.totalItems=0;n.setNrOfCustomersAdmin(a.totalItems)})};a.filterResult=function(){return a.fetchResult(function(){a.filterCriteria.pageNumber=1;a.currentPage=1;delete d.range})};a.hasAdminRole=function(){return hasRole(JSON.parse(c.sessionStorage.user).roles,"admin_sbdr_hoofd")||hasRole(JSON.parse(c.sessionStorage.user).roles,"admin_sbdr")};a.hasItems=function(){return 0<n.getNrOfCustomersAdmin()};a.nrOfItems=function(){return 0};a.pageChanged=function(){0;a.filterCriteria.pageNumber=
a.currentPage;a.fetchResult(function(){delete d.range})};a.printCustomerLetter=function(b,c){a.companies[c].briefGedownload||r.printCustomerLetter({klantId:b},function(b){null!=b.errorCode?a.error=b.errorCode+" "+b.errorMsg:a.companies[c].briefStatus="DWL"})};a.removeCustomer=function(a){b.open({templateUrl:"removecustomer.html",controller:w,size:"lg"}).result.then(function(b){b.remove&&doRemoveCustomer(a)},function(){0})};a.activateCustomer=function(a,c){b.open({templateUrl:"activatecustomer.html",
controller:p,resolve:{regpro:function(){return a},company:function(){return c}},size:"lg"}).result.then(function(a){a.activate&&("REG"==a.regpro?doActivateReg(a.company.activationCode,a.company.klantGebruikersNaam):"PRO"==a.regpro&&doActivatePro(a.company.activationCode,a.company.klantId))},function(){0})};a.requestreport=function(a){e.path("/report/"+JSON.parse(c.sessionStorage.user).bedrijfId+"/"+a+"/0/$dashboard$customersadmintab")};a.setPage=function(b){a.currentPage=b};isSearchChanged=function(b){return"undefined"==
typeof a.oldSearch?(a.oldSearch=b,!1):a.oldSearch!=b};cleanUp=function(){delete a.error;delete a.registrationActivated;delete a.prospectActivated;delete a.batchStarted;delete a.customerRemoved};doRemoveCustomer=function(b){cleanUp();v.deleteAccount(b,function(b){"undefined"!=typeof b.errorCode?a.error=b.errorCode+" "+b.errorMsg:(a.customerRemoved=!0,a.currentPage=1,a.pageChanged())})};void 0==a.init&&(a.filterCriteria={bedrijfId:JSON.parse(c.sessionStorage.user).bedrijfId,pageNumber:1,sortDir:"",
sortedBy:"",filterValue:""},a.init=!0);a.filterResult()}]);
appcontrollers.controller("DashboardController",["$window","$route","$routeParams","$scope","$rootScope","$q","$location","ngTableParams","DashboardNumberTags","DashboardService","UserService","InternalProcessService",function(c,b,a,d,e,g,h,l,f,n,q,v){0;if(a.showtab)var k=a.showtab;d.tabClicked=function(){delete d.error;delete e.error};d.edit=function(a){h.path(a.htmlUrl)};d.fullreport=function(){h.path("/fullreport");h.url("/fullreport")};d.hasRole1=function(a,b){return hasRole(a,b)};d.messages=
function(){h.path("/messages")};d.nrOfItems=function(a){var b=null;"undefined"!==typeof c.sessionStorage.user&&(b=JSON.parse(c.sessionStorage.user).roles);return"alerts"==a?(-1==f.getNrOfAlerts()&&(f.setNrOfAlerts(0),d.itemsPage=20,d.filterCriteriaAlerts={bedrijfId:JSON.parse(c.sessionStorage.user).bedrijfId,pageNumber:1,sortDir:"",sortedBy:"",filterValue:""},e.range="items\x3d"+((d.filterCriteriaAlerts.pageNumber-1)*d.itemsPage+1)+"-"+((d.filterCriteriaAlerts.pageNumber-1)*d.itemsPage+d.itemsPage),
n.companiesalert(d.filterCriteriaAlerts,function(a,b){0;"undefined"!=typeof a?f.setNrOfAlerts(paging_totalItems(b("Content-Range"))):f.setNrOfAlerts(0)},function(){0})),Math.min(99,f.getNrOfAlerts())):"internalprocessadmin"==a&&null!=b&&(hasRole(b,"admin_sbdr")||hasRole(b,"admin_sbdr_hoofd"))?(-1==f.getNrOfProcesses()&&(f.setNrOfProcesses(0),d.totalItems=0,d.currentPage=1,d.itemsPage=20,d.maxSize=5,e.range="items\x3d1-"+d.itemsPage,v.getInternalProcessRows(function(a,b){null!=a?f.setNrOfProcesses(paging_totalItems(b("Content-Range"))):
f.setNrOfProcesses(0)})),Math.min(99,f.getNrOfProcesses())):"objectionsadmin"==a&&null!=b&&hasRole(b,"admin_sbdr_hoofd")?(-1==f.getNrOfObjectionsAdmin()&&(f.setNrOfObjectionsAdmin(0),d.totalItems=0,d.currentPage=1,d.itemsPage=20,d.maxSize=5,e.range="items\x3d0-"+d.itemsPage,n.objectionsadmin(d.filterCriteriaAlerts,function(a,b){null!=a?f.setNrOfObjectionsAdmin(paging_totalItems(b("Content-Range"))):f.setNrOfObjectionsAdmin(0)})),Math.min(99,f.getNrOfObjectionsAdmin())):"supportticketsadmin"==a&&null!=
b&&(hasRole(b,"admin_sbdr")||hasRole(b,"admin_sbdr_hoofd"))?(-1==f.getNrOfSupportTicketsAdmin()&&(f.setNrOfSupportTicketsAdmin(0),d.totalItems=0,d.currentPage=1,d.itemsPage=20,d.maxSize=5,e.range="items\x3d0-"+d.itemsPage,n.supportticketsadmin(d.filterCriteriaAlerts,function(a,b){null!=a?f.setNrOfSupportTicketsAdmin(paging_totalItems(b("Content-Range"))):f.setNrOfSupportTicketsAdmin(0)})),Math.min(99,f.getNrOfSupportTicketsAdmin())):0};d.searchCompany=function(){h.path("/searchcompany")};d.notAllowedNotification=
function(){return e.hasRoleUser("registraties_toegestaan")?"":"Geen rechten om registraties in te bewerken"};d.showTab=function(a){if("undefined"!=typeof c.sessionStorage.user){var b=JSON.parse(c.sessionStorage.user).roles;if("undefined"!=typeof b){if("alerts"==a){if("alertstab"==d.showtab||"undefined"===typeof d.showtab&&!isUserTabSelected()&&(hasRole(b,"admin_klant")||hasRole(b,"hoofd_klant")||hasRole(b,"gebruiker_klant")||hasRole(b,"bedrijf_manager")))d.tabs[0].select(),resetShowTab();return hasRole(b,
"admin_klant")||hasRole(b,"hoofd_klant")||hasRole(b,"gebruiker_klant")||hasRole(b,"bedrijf_manager")}if("reportrequested"==a)return"reportrequestedtab"==d.showtab&&(d.tabs[1].select(),resetShowTab()),hasRole(b,"admin_klant")||hasRole(b,"hoofd_klant")||hasRole(b,"gebruiker_klant")||hasRole(b,"bedrijf_manager");if("monitoring"==a)return"portfoliomonitoringtab"==d.showtab&&(d.tabs[2].select(),resetShowTab()),hasRole(b,"admin_klant")||hasRole(b,"hoofd_klant")||hasRole(b,"gebruiker_klant")||hasRole(b,
"bedrijf_manager");if("notifications"==a)return"companiesnotifiedtab"==d.showtab&&(d.tabs[3].select(),resetShowTab()),hasRole(b,"admin_klant")||hasRole(b,"hoofd_klant")||hasRole(b,"gebruiker_klant")||hasRole(b,"bedrijf_manager");if("removedcompanies"==a)return"companiesremovedtab"==d.showtab&&(d.tabs[4].select(),resetShowTab()),hasRole(b,"admin_klant")||hasRole(b,"hoofd_klant")||hasRole(b,"gebruiker_klant")||hasRole(b,"bedrijf_manager");if("generaladmin"==a)return"generaladmintab"==d.showtab&&(d.tabs[5].select(),
resetShowTab()),hasRole(b,"admin_sbdr_hoofd");if("objectionsadmin"==a)return"objectionsadmintab"==d.showtab&&(d.tabs[6].select(),resetShowTab()),hasRole(b,"admin_sbdr_hoofd");if("supportticketsadmin"==a)return"supportticketsadmintab"==d.showtab&&(d.tabs[7].select(),resetShowTab()),hasRole(b,"admin_sbdr")||hasRole(b,"admin_sbdr_hoofd");if("searchresultsadmin"==a){if("searchresultsadmintab"==d.showtab||"undefined"==typeof d.showtab&&(hasRole(b,"admin_sbdr")||hasRole(b,"admin_sbdr_hoofd"))&&!isAdminTabSelected())d.tabs[8].select(),
resetShowTab();return hasRole(b,"admin_sbdr")||hasRole(b,"admin_sbdr_hoofd")}if("customersadmin"==a)return"customersadmintab"==d.showtab&&(d.tabs[9].select(),resetShowTab()),hasRole(b,"admin_sbdr")||hasRole(b,"admin_sbdr_hoofd");if("notificationsadmin"==a)return"notificationsadmintab"==d.showtab&&(d.tabs[10].select(),resetShowTab()),hasRole(b,"admin_sbdr")||hasRole(b,"admin_sbdr_hoofd");if("notificationsofprospectadmin"==a)return"notificationsofprospectadmintab"==d.showtab&&(d.tabs[11].select(),resetShowTab()),
hasRole(b,"admin_sbdr")||hasRole(b,"admin_sbdr_hoofd");if("exceptioncompaniesadmin"==a)return"exceptioncompaniesadmintab"==d.showtab&&(d.tabs[12].select(),resetShowTab()),hasRole(b,"admin_sbdr_hoofd");if("internalprocessadmin"==a)return"internalprocessadmin"==d.showTab&&(d.tabs[13].select(),resetShowTab()),hasRole(b,"admin_sbdr")||hasRole(b,"admin_sbdr_hoofd")}}return!1};d.updateCompany=function(a){q.userdataOfCompany({bedrijfId:a},function(a){c.sessionStorage.user=JSON.stringify(a);if("undefined"!==
typeof c.sessionStorage.authToken){var d=c.sessionStorage.authToken.split(":");5==d.length&&(d[2]=a.bedrijfId,c.sessionStorage.authToken=d[0]+":"+d[1]+":"+d[2]+":"+d[3]+":"+d[4])}b.reload()})};isAdminTabSelected=function(){return d.tabs[5].selected||d.tabs[6].selected||d.tabs[7].selected||d.tabs[8].selected||d.tabs[9].selected||d.tabs[10].selected||d.tabs[11].selected||d.tabs[12].selected||d.tabs[13].selected};isUserTabSelected=function(){return d.tabs[0].selected||d.tabs[1].selected||d.tabs[2].selected||
d.tabs[3].selected||d.tabs[4].selected};resetShowTab=function(){delete d.showtab;e.changeUrlWithoutReload("/dashboard")};resetAllCompaniesOfUser=function(){d.gebruikerBedrijfId=null;d.gebruikerBedrijven=null;"undefined"!==typeof c.sessionStorage.user&&(d.gebruikerBedrijfId=JSON.parse(c.sessionStorage.user).bedrijfId);var a=n.allCompaniesOfUser({bedrijfId:d.gebruikerBedrijfId});d.aantalGebruikerBedrijven=1;g.all({allCompaniesOfUser:a.$promise}).then(function(a){if("undefined"!==typeof a&&"undefined"!==
a.allCompaniesOfUser){d.gebruikerBedrijven=a.allCompaniesOfUser;delete d.gebruikerBedrijfId;d.aantalGebruikerBedrijven=d.gebruikerBedrijven.length;for(var b=0;b<d.aantalGebruikerBedrijven;b++)a.allCompaniesOfUser[b].currentBedrijf&&(d.gebruikerBedrijfId=a.allCompaniesOfUser[b].bedrijfId);"undefined"===typeof d.gebruikerBedrijfId&&(d.gebruikerBedrijfId=a.allCompaniesOfUser[0].bedrijfId);return a}return"unknown"}).catch(function(a){0;d.error=a})};"undefined"===typeof d.initDashboard&&(resetAllCompaniesOfUser(),
d.initDashboard=!0);k&&(d.showtab=k,k=null)}]);
appcontrollers.controller("DocumentController",["$scope","$routeParams","$location","$fileUploader",function(c,b,a,d){0;c.shipmentId=b.id;c.attachments=[];c.countries=["Belgium","Netherlands"];c.addGoods=function(){c.attachments.push({vnr:"",description:"",country:c.countries[0],weight:"",netweight:""})};c.removeGoods=function(){c.attachments.splice(this.$index,1)};c.save=function(){0;a.path("/dashboard")};b=c.uploader=d.create({scope:c,url:"upload.php",formData:[{key:"value"}],filters:[function(a){0;
return!0}]});b.filters.push(function(a){0;return!0});b.bind("afteraddingfile",function(a,b){0});b.bind("whenaddingfilefailed",function(a,b){0});b.bind("afteraddingall",function(a,b){0});b.bind("beforeupload",function(a,b){0});b.bind("progress",function(a,b,c){0});b.bind("success",function(a,b,c,d){0});b.bind("cancel",function(a,b,c){0});b.bind("error",function(a,b,c,d){0});b.bind("complete",function(a,b,c,d){0});b.bind("progressall",function(a,b){0});b.bind("completeall",function(a,b){0})}]);
appcontrollers.controller("DocumentDownloadController",["$routeParams","$rootScope","$scope","$attrs","$window","$location","$sce","$resource","$modal","DocumentService",function(c,b,a,d,e,g,h,l,f,n){a.documentFetched=function(b){var c="document.bin",d=!1;headers=b.headers();var c=headers["x-filename"]||c,e=headers["content-type"]||"application/octet-stream";try{0;var t=new Blob([b.data],{type:e});if(1==a.openDocumentInWindow)if(navigator.msSaveOrOpenBlob)navigator.msSaveOrOpenBlob(t,c);else{var f=
navigator.webkitSaveBlob||navigator.mozSaveBlob||navigator.saveBlob;if(void 0===f)throw"Not supported";f(t,c)}else if(navigator.msSaveBlob)navigator.msSaveBlob(t,c);else{f=navigator.webkitSaveBlob||navigator.mozSaveBlob||navigator.saveBlob;if(void 0===f)throw"Not supported";f(t,c)}0;d=!0}catch(x){0,0}if(!d&&(f=window.URL||window.webkitURL||window.mozURL||window.msURL)){var p=document.createElement("a");if("download"in p)try{0;var t=new Blob([b.data],{type:e}),h=f.createObjectURL(t,c);if(1==a.openDocumentInWindow)window.open(h);
else{p.setAttribute("href",h);p.setAttribute("download",c);var g=document.createEvent("MouseEvents");g.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,0,null);p.dispatchEvent(g)}0;d=!0}catch(x){0,0}if(!d)try{0,t=new Blob([b.data],{type:e}),window.location=f.createObjectURL(t),0,d=!0}catch(x){0,0}if(!d)try{0,t=new Blob([b.data],{type:"application/octet-stream"}),window.location=f.createObjectURL(t),0,d=!0}catch(x){0,0}}d||0};a.downloadDocument=function(b){var c=b.action,d=b.bedrijfId,e=b.meldingId,
t=b.referentie,f=b.supportBestandId,p=b.factuurId,h=b.monitorId;b=b.batchDocumentId;if("undefined"==typeof e||null==e)melding=0;if("undefined"==typeof t||null==t||""==t)t="unknown";"removed_companies"==c||"monitored_companies"==c||"notified_companies"==c||"reported_companies"==c?(a.openDocumentInWindow=!1,n.downloadExcel({method:c,bedrijfid:d},a.documentFetched)):"support_attachment"==c?(a.openDocumentInWindow=!1,n.downloadAttachment({supportattachmentid:f},a.documentFetched)):"factuur"==c?(a.openDocumentInWindow=
!1,n.downloadFactuur({factuurid:p},a.documentFetched)):"letter_batch"==c?(a.openDocumentInWindow=!1,n.downloadBatchDocument({batchDocumentId:b},a.documentFetched)):(a.openDocumentInWindow=!1,n.downloadDocument({method:c,bedrijfid:d,meldingid:e,referentie:t,monitorid:h},a.documentFetched))}}]);
appcontrollers.controller("EditController",["$scope","$routeParams","$location","$fileUploader",function(c,b,a,d){0;c.shipmentId=b.id;c.save=function(){0;a.path("/dashboard")};c=c.uploader=d.create({scope:c,url:"upload.php",formData:[{key:"value"}],filters:[function(a){0;return!0}]});c.queue.push({file:{name:"CVO",size:1E6},progress:100,documentType:"CVO",isProcessDocument:!0,isUploaded:!1,isSuccess:!0,isAttachment:!1,isProve:!1,isLegaliseRequest:!1});c.queue.push({file:{name:"An uploaded file",size:1E6},
progress:100,documentType:"Attachment",isProcessDocument:!1,isUploaded:!0,isSuccess:!0,isAttachment:!0,isProve:!1,isLegaliseRequest:!1});c.queue.push({file:{name:"Another uploaded file",size:1E6},progress:100,documentType:"Attachment",isProcessDocument:!1,isUploaded:!0,isSuccess:!0,isAttachment:!0,isProve:!1,isLegaliseRequest:!1});c.progress=100;c.filters.push(function(a){0;return!0});c.bind("afteraddingfile",function(a,b){0});c.bind("whenaddingfilefailed",function(a,b){0});c.bind("afteraddingall",
function(a,b){0});c.bind("beforeupload",function(a,b){0});c.bind("progress",function(a,b,c){0});c.bind("success",function(a,b,c,d){0});c.bind("cancel",function(a,b,c){0});c.bind("error",function(a,b,c,d){0});c.bind("complete",function(a,b,c,d){0});c.bind("progressall",function(a,b){0});c.bind("completeall",function(a,b){0})}]);
appcontrollers.controller("EditCompanyController",["$window","$modal","$scope","$rootScope","$location","$anchorScroll","$routeParams","$cookies","ExceptionCompanyDataStorage","maxFieldLengths","companyData","AccountService","CompanyService",function(c,b,a,d,e,g,h,l,f,n,q,v,k){0;a.maxFieldLengths=n;searchurl=h.searchurl?h.searchurl:"$dashboard";h.exceptionCompany&&"true"==h.exceptionCompany?(a.isCustomMelding=!0,a.exceptionCompany=f.getExceptionCompanyData()):(delete a.exceptionCompany,a.isCustomMelding=
!1);a.isInvalid=function(b,c){var d=b[c].$invalid;(b=b[c].$dirty)&&delete a.error;"telefoonnummer"==c&&"undefined"!=typeof a.account.klant&&""==a.account.bedrijf.telefoonnummer&&(d=!0);return b&&d};a.back=function(){url=gotoDurl(searchurl);null!=url&&(e.path(url),e.url(e.path()))};a.addressEditAllowed=function(){var a=JSON.parse(c.sessionStorage.user).roles;return hasRole(a,"admin_sbdr")||hasRole(a,"admin_sbdr_hoofd")};a.editCompanyData=function(){cleanAddressForm();a.editAddressOn=1!=a.editAddressOn;
a.editAddressOn?a.disableAddressOn=!1:delete a.disableAddressOn};cleanAddressForm=function(){delete a.error;delete a.accountSavedOk;a.formbedrijfsgegevens.$setPristine()};"undefined"==typeof a.init&&("undefined"!=typeof q.company.errorCode?(a.error=q.company.errorMsg,a.account={bedrijf:null,referentieIntern:0},a.account.bedrijf.adresOk=!0):(a.account={bedrijf:q.company.bedrijf,referentieIntern:q.company.referentieIntern,klant:q.company.klant},a.account.bedrijf.adresOk=1==a.account.bedrijf.adresOk),
a.adresOkFalseOnLoad=!a.account.bedrijf.adresOk,a.PHONE_REGEXP=/^0[1-9](?:(?:-)?[0-9]){8}$|^0[1-9][0-9](?:(?:-)?[0-9]){7}$|^0[1-9](?:[0-9]){2}(?:(?:-)?[0-9]){6}$|^((?:0900|0800|0906|0909)(?:(?:-)?[0-9]){4,7}$)/,a.init=!0);a.resolveException=function(b,c){delete a.exceptionResolved;k.resolveException({customMeldingId:b,bedrijfId:c},function(b){"undefined"!=typeof b.errorCode?a.error=b.errorCode+" "+b.errorMsg:a.exceptionResolved=!0;a.currentPage=1;a.pageChanged()})};a.ignoreException=function(b,c){delete a.exceptionIgnored;
k.ignoreException({customMeldingId:b,bedrijfId:c},function(b){"undefined"!=typeof b.errorCode?a.error=b.errorCode+" "+b.errorMsg:a.exceptionIgnored=!0;a.currentPage=1;a.pageChanged()})};a.updateCompanyData=function(){delete a.error;v.updateBedrijfData(a.account.bedrijf,function(b){"undefined"!=typeof b.errorCode?(a.formbedrijfsgegevens.$setPristine(),a.error=b.errorCode+" "+b.errorMsg,a.accountSavedOk=!1):(a.editCompanyData(),a.accountSavedOk=!0,a.account.bedrijf.adresOk&&(a.adresOkFalseOnLoad=!1))})};
a.annuleren=function(){b.open({templateUrl:"removechanges.html",controller:r,size:"lg"}).result.then(function(b){b.remove&&a.cancelUserDetails()},function(){0})};var r=["$scope","$modalInstance",function(a,b){a.remove=!1;a.removeChangesOk=function(){a.remove=!0;a.closeRemoveChangesModal()};a.closeRemoveChangesModal=function(){b.close({remove:a.remove})}}]}]);
appcontrollers.controller("ExactOnlineController",["$window","$modal","$scope","$rootScope","$location","$anchorScroll","$routeParams","$cookies","exactonlineparamData",function(c,b,a,d,e,g,h,l,f){0;"undefined"===typeof a.init&&(a.exactonlineparam=f.exactonlineparam,a.init=!0)}]);
appcontrollers.controller("ExceptionCompaniesAdminTabController",["$window","$scope","$rootScope","$location","$filter","$timeout","ngTableParams","DashboardNumberTags","$modal","maxFieldLengths","ExceptionCompanyDataStorage","DashboardService","CompanyService",function(c,b,a,d,e,g,h,l,f,n,q,v,k){b.title="ExceptionCompanies Tab";b.maxFieldLengths=n;b.totalItems=0;b.currentPage=1;b.itemsPage=20;b.maxSize=5;var r=["$scope","$modalInstance",function(a,b){a.deleteNotification=!1;a.Continue=function(){a.deleteNotification=
!0;a.Discard()};a.Discard=function(){b.close({deleteNotification:a.deleteNotification})}}];"undefined"==typeof b.filterCriteria&&(b.filterCriteria={bedrijfId:JSON.parse(c.sessionStorage.user).bedrijfId,pageNumber:1,sortDir:"",sortedBy:"",filterValue:""});b.$watch("filterCriteria.filterValue",function(a){"undefined"!=typeof searchCallbackTimeout&&g.cancel(searchCallbackTimeout);searchCallbackTimeout=g(function(){a?2<a.length&&(b.currentPage=1,b.pageChanged(),b.oldSearch=a):isSearchChanged(a)&&(b.currentPage=
1,b.pageChanged(),b.oldSearch=a)},1E3)},!0);b.detailsCompany=function(a,c){if(b.companies&&"undefined"!==typeof a&&null!==a){var e=null,k;for(k in b.companies)if(b.companies[k].customMeldingId==a){e=b.companies[k];break}null!=e&&(q.setExceptionCompanyData(e),d.path("/editcompany/"+c+"/$dashboard$exceptioncompaniesadmintab/true"),d.url(d.path()))}};b.fetchResult=function(c){a.range="items\x3d"+((b.filterCriteria.pageNumber-1)*b.itemsPage+1)+"-"+((b.filterCriteria.pageNumber-1)*b.itemsPage+b.itemsPage);
v.exceptioncompaniesadmin(b.filterCriteria,function(a,d){0;"undefined"!=typeof a?(b.companies=a,b.totalItems=paging_totalItems(d("Content-Range"))):(b.companies=null,b.totalItems=0);l.setNrOfExceptionCompaniesAdmin(b.totalItems);c()},function(){0;b.companies=[];b.totalItems=0;l.setNrOfExceptionCompaniesAdmin(b.totalItems)})};b.filterResult=function(){return b.fetchResult(function(){b.filterCriteria.pageNumber=1;b.currentPage=1;delete a.range})};b.hasItems=function(){return 0<l.getNrOfExceptionCompaniesAdmin()};
b.ignoreException=function(a,b){f.open({templateUrl:"removeCustomNotificationAdmin.html",controller:r,size:"lg"}).result.then(function(c){c.deleteNotification&&ignoreNotification(a,b)})};b.nrOfItems=function(){return 0};b.pageChanged=function(){0;b.filterCriteria.pageNumber=b.currentPage;b.fetchResult(function(){delete a.range})};b.resolveException=function(a,b){f.open({templateUrl:"removeCustomNotificationAdmin.html",controller:r,size:"lg"}).result.then(function(c){c.deleteNotification&&resolveNotification(a,
b)})};b.setPage=function(a){b.currentPage=a};cleanUp=function(){delete b.error;delete b.exceptionResolved;delete b.exceptionIgnored};ignoreNotification=function(a,c){delete b.exceptionResolved;k.ignoreException({customMeldingId:a,bedrijfId:c},function(a){"undefined"!=typeof a.errorCode?b.error=a.errorCode+" "+a.errorMsg:b.exceptionIgnored=!0;b.currentPage=1;b.pageChanged()})};isSearchChanged=function(a){return"undefined"==typeof b.oldSearch?(b.oldSearch=a,!1):b.oldSearch!=a};resolveNotification=function(a,
c){delete b.exceptionResolved;k.resolveException({customMeldingId:a,bedrijfId:c},function(a){"undefined"!=typeof a.errorCode?b.error=a.errorCode+" "+a.errorMsg:b.exceptionResolved=!0;b.currentPage=1;b.pageChanged()})};b.filterResult()}]);
appcontrollers.controller("FaillissementenOverzichtController",["$window","$modal","$scope","$rootScope","$location","$anchorScroll","$routeParams","$cookies","AccountService",function(c,b,a,d,e,g,h,l,f){0;a.userIdSelected=null;a.setSelected=function(b){a.userIdSelected=b};delete a.error;a.setPage=function(b){a.currentPage=b};a.pageChanged=function(){0};"undefined"===typeof a.init&&(a.filterCriteria={userId:JSON.parse(c.sessionStorage.user).userId,pageNumber:1,sortDir:"",sortedBy:"",filterValue:""},
a.totalItems=0,a.currentPage=1,a.itemsPage=20,a.maxSize=5,f.getFaillissementStats(function(b){null!=b.errorCode?a.error=b.errorCode+" "+b.errorMsg:a.stats=b}),a.init=!0);a.showKvKNumber=function(a){return null==a||"undefined"==typeof a?"Natuurlijk persoon":a};a.filterResult=function(){return a.fetchResult(function(){a.filterCriteria.pageNumber=1;a.currentPage=1;a.userIdSelected=null;delete a.range})};0;a.fetchResult=function(b){d.range="items\x3d"+((a.filterCriteria.pageNumber-1)*a.itemsPage+1)+"-"+
((a.filterCriteria.pageNumber-1)*a.itemsPage+a.itemsPage);f.faillissementenafgelopenweek(a.filterCriteria,function(c,d){0;a.faillissementen=c;a.totalItems=paging_totalItems(d("Content-Range"));b()},function(){0;a.faillissementen=[];a.totalItems=0})};0;a.setPage=function(b){a.currentPage=b};a.pageChanged=function(){0;a.filterCriteria.pageNumber=a.currentPage;a.fetchResult(function(){delete d.range})};a.filterResult()}]);
appcontrollers.controller("ForgotPasswordController",["$scope","$rootScope","$location","$anchorScroll","UserNsService","NewAccountService","clientip","maxFieldLengths",function(c,b,a,d,e,g,h,l){0;c.maxFieldLengths=l;c.requestSent=!1;c.isInvalid=function(b,c){var e=b[c].$invalid&&b[c].$dirty;if(e){var f=a.hash();a.hash(b[c].$id);d();a.hash(f)}return e};c.buttonDisabled=function(a,b){return a[b].$invalid||c.requestSent};c.sendPasswordToEmail=function(a){1!=c.requestSent&&(c.requestSent=!0,e.forgotPassword(a,
function(a){"undefined"!=typeof a.errorCode?(c.error=a.errorMsg,delete c.passwordReset,"136"!=a.errorCode&&(c.requestSent=!1)):c.passwordReset=!0}))};c.return=function(){a.path("/login");a.url(a.path())};"undefined"==typeof c.initialised&&(b.ipAddress=h.ip,g.getApiKey(function(a){"undefined"!=typeof a.errorCode?c.error=a.errorMsg:(b.clientApiKey=a.token,b.ipAddress=h.ip)}),c.initialised=!0)}]);
appcontrollers.controller("FullReportController",["$routeParams","$scope","$rootScope","$location","$anchorScroll","CompanyService","DocumentService",function(c,b,a,d,e,g,h){0;searchurl=c.searchurl?c.searchurl:"$dashboard";b.chart_options={resize:!0,element:"donut-vermeldingen",data:[{label:"Monitoring",value:2},{label:"Verwijderd",value:0},{label:"Recent",value:2}]}}]);
appcontrollers.controller("GeneralAdminTabController",["$routeParams","$scope","$rootScope","$location","DashboardService",function(c,b,a,d,e){0;initAllData=function(){b.totaalKlanten=0;b.totaalActieKlanten=0;b.totaalProspectKlanten=0;b.totaalNieuweKlanten=0;b.totaalVerwijderdeKlanten=0;b.totaalMeldingen=0;b.totaalActieMeldingen=0;b.totaalNieuweMeldingen=0;b.totaalVerwijderdeMeldingen=0;b.totaalMonitoring=0;b.totaalNieuweMonitoring=0;b.totaalVerwijderdeMonitoring=0;b.totaalRapporten=0;b.totaalNieuweRapporten=
0;b.dataPointsNieuweKlanten=[];b.dataPointsNieuweMeldingen=[];b.dataPointsNieuweMonitoring=[];b.dataPointsNieuweRapporten=[]};correctValues=function(a,b){var c=0,d=null,e;for(e in a)c+=a[e].value,a[e].description==b&&(d=a[e]);100<c&&(d.value-=c-100)};getProgressKlantStacked=function(){b.stackedKlanten=[];b.stackedKlanten.push({value:Math.round(b.totaalActieKlanten/b.totaalKlanten*100),description:"In behandeling!",type:"danger"});b.stackedKlanten.push({value:Math.round(b.totaalProspectKlanten/b.totaalKlanten*
100),description:"Prospect",type:"warning"});b.stackedKlanten.push({value:Math.round((b.totaalNieuweKlanten-b.totaalActieKlanten)/b.totaalKlanten*100),description:"Nieuw",type:"success"});b.stackedKlanten.push({value:Math.round((b.totaalKlanten-b.totaalActieKlanten-b.totaalProspectKlanten-(b.totaalNieuweKlanten-b.totaalActieKlanten)-b.totaalVerwijderdeKlanten)/b.totaalKlanten*100),description:"Overig actief",type:"success"});b.stackedKlanten.push({value:Math.round(b.totaalVerwijderdeKlanten/b.totaalKlanten*
100),description:"Verwijderd",type:"info"});correctValues(b.stackedKlanten,"Overig actief")};getProgressMeldingStacked=function(){b.stackedMeldingen=[];b.stackedMeldingen.push({value:Math.round(b.totaalActieMeldingen/b.totaalMeldingen*100),description:"In behandeling of wachten!",type:"danger"});b.stackedMeldingen.push({value:Math.round((b.totaalNieuweMeldingen-b.totaalActieMeldingen)/b.totaalMeldingen*100),description:"Nieuw",type:"success"});b.stackedMeldingen.push({value:Math.round((b.totaalMeldingen-
b.totaalActieMeldingen-(b.totaalNieuweMeldingen-b.totaalActieMeldingen)-b.totaalVerwijderdeMeldingen)/b.totaalMeldingen*100),description:"Overig actief",type:"success"});b.stackedMeldingen.push({value:Math.round(b.totaalVerwijderdeMeldingen/b.totaalMeldingen*100),description:"Verwijderd",type:"info"});correctValues(b.stackedMeldingen,"Overig actief")};getProgressMonitoringStacked=function(){b.stackedMonitoring=[];b.stackedMonitoring.push({value:Math.round(b.totaalNieuweMonitoring/b.totaalMonitoring*
100),description:"Nieuw",type:"success"});b.stackedMonitoring.push({value:Math.round((b.totaalMonitoring-b.totaalNieuweMonitoring-b.totaalVerwijderdeMonitoring)/b.totaalMonitoring*100),description:"Actief",type:"success"});b.stackedMonitoring.push({value:Math.round(b.totaalVerwijderdeMonitoring/b.totaalMonitoring*100),description:"Verwijderd",type:"info"});correctValues(b.stackedMonitoring,"Actief")};getProgressRapportStacked=function(){b.stackedRapporten=[];b.stackedRapporten.push({value:Math.round(b.totaalNieuweRapporten/
b.totaalRapporten*100),description:"Nieuw",type:"success"});b.stackedRapporten.push({value:Math.round((b.totaalRapporten-b.totaalNieuweRapporten)/b.totaalRapporten*100),description:"Overig",type:"info"});correctValues(b.stackedRapporten,"Overig")};getProgressGebruikersStacked=function(){b.stackedGebruikers=[];b.stackedGebruikers.push({value:Math.round(b.totaalNonActivatedGebruikers/b.totaalGebruikers*100),description:"Nog niet geactiveerd!",type:"danger"});b.stackedGebruikers.push({value:Math.round(b.totaalActivatedGebruikers/
b.totaalGebruikers*100),description:"Actief",type:"success"});b.stackedGebruikers.push({value:Math.round((b.totaalGebruikers-b.totaalNonActivatedGebruikers-b.totaalActivatedGebruikers-b.totaalDeactivatedGebruikers)/b.totaalGebruikers*100),description:"Overig",type:"success"});b.stackedGebruikers.push({value:Math.round(b.totaalDeactivatedGebruikers/b.totaalGebruikers*100),description:"Niet actief",type:"info"});correctValues(b.stackedGebruikers,"Overig")};fetchData=function(){initAllData();e.generaladmin(function(a){0;
if("undefined"==typeof a.errorCode){a&&(b.klantenPerStatus=a.klantenPerStatus,b.klantenLast24h=a.activeKlantenLast24h,b.meldingenPerStatus=a.meldingenPerStatus,b.meldingenPerStatus=a.meldingenPerStatus,b.meldingenLast24h=a.activeMeldingenLast24h,b.monitoringPerStatus=a.monitoringPerStatus,b.monitoringLast24h=a.activeMonitoringLast24h,a.totaalAantalRapporten&&(b.totaalRapporten=parseInt(a.totaalAantalRapporten)),b.rapportenLast24h=a.rapportenLast24h);if(b.klantenPerStatus)for(var c in b.klantenPerStatus)"NOK"==
b.klantenPerStatus[c].statusCode?(b.totaalKlanten+=parseInt(b.klantenPerStatus[c].aantal),b.totaalActieKlanten+=parseInt(b.klantenPerStatus[c].aantal),b.totaalNieuweKlanten+=parseInt(b.klantenPerStatus[c].aantal)):"REG"==b.klantenPerStatus[c].statusCode?(b.totaalKlanten+=parseInt(b.klantenPerStatus[c].aantal),b.totaalActieKlanten+=parseInt(b.klantenPerStatus[c].aantal),b.totaalNieuweKlanten+=parseInt(b.klantenPerStatus[c].aantal)):"PRO"==b.klantenPerStatus[c].statusCode?(b.totaalKlanten+=parseInt(b.klantenPerStatus[c].aantal),
b.totaalProspectKlanten+=parseInt(b.klantenPerStatus[c].aantal),b.totaalNieuweKlanten+=parseInt(b.klantenPerStatus[c].aantal)):("ACT"!=b.klantenPerStatus[c].statusCode&&(b.totaalVerwijderdeKlanten+=parseInt(b.klantenPerStatus[c].aantal)),b.totaalKlanten+=parseInt(b.klantenPerStatus[c].aantal));if(b.klantenLast24h)for(c in b.klantenLast24h)if(0==c%2){var d=parseInt(b.klantenLast24h[c].aantal)+parseInt(b.klantenLast24h[parseInt(c)+1].aantal);b.dataPointsNieuweKlanten.push(d)}if(b.meldingenPerStatus)for(c in b.meldingenPerStatus)"NOK"==
b.meldingenPerStatus[c].statusCode?(b.totaalMeldingen+=parseInt(b.meldingenPerStatus[c].aantal),b.totaalActieMeldingen+=parseInt(b.meldingenPerStatus[c].aantal),b.totaalNieuweMeldingen+=parseInt(b.meldingenPerStatus[c].aantal)):"INI"==b.meldingenPerStatus[c].statusCode?(b.totaalMeldingen+=parseInt(b.meldingenPerStatus[c].aantal),b.totaalActieMeldingen+=parseInt(b.meldingenPerStatus[c].aantal),b.totaalNieuweMeldingen+=parseInt(b.meldingenPerStatus[c].aantal)):"INB"==b.meldingenPerStatus[c].statusCode?
(b.totaalMeldingen+=parseInt(b.meldingenPerStatus[c].aantal),b.totaalActieMeldingen+=parseInt(b.meldingenPerStatus[c].aantal),b.totaalNieuweMeldingen+=parseInt(b.meldingenPerStatus[c].aantal)):("ACT"!=b.meldingenPerStatus[c].statusCode&&(b.totaalVerwijderdeMeldingen+=parseInt(b.meldingenPerStatus[c].aantal)),b.totaalMeldingen+=parseInt(b.meldingenPerStatus[c].aantal));if(b.meldingenLast24h)for(c in b.meldingenLast24h)0==c%2&&(d=parseInt(b.meldingenLast24h[c].aantal)+parseInt(b.meldingenLast24h[parseInt(c)+
1].aantal),b.dataPointsNieuweMeldingen.push(d));a.totaalAantalNieuweMonitoring&&(b.totaalNieuweMonitoring=parseInt(a.totaalAantalNieuweMonitoring));if(b.monitoringPerStatus)for(c in b.monitoringPerStatus)"ACT"!=b.monitoringPerStatus[c].statusCode&&(b.totaalVerwijderdeMonitoring+=parseInt(b.monitoringPerStatus[c].aantal)),b.totaalMonitoring+=parseInt(b.monitoringPerStatus[c].aantal);if(b.monitoringLast24h)for(c in b.monitoringLast24h)0==c%2&&(d=parseInt(b.monitoringLast24h[c].aantal)+parseInt(b.monitoringLast24h[parseInt(c)+
1].aantal),b.dataPointsNieuweMonitoring.push(d));a.totaalAantalRapporten&&(b.totaalRapporten=parseInt(a.totaalAantalRapporten));a.totaalAantalNieuweRapporten&&(b.totaalNieuweRapporten=parseInt(a.totaalAantalNieuweRapporten));if(b.rapportenLast24h)for(c in b.rapportenLast24h)0==c%2&&(d=parseInt(b.rapportenLast24h[c].aantal)+parseInt(b.rapportenLast24h[parseInt(c)+1].aantal),b.dataPointsNieuweRapporten.push(d));b.gebruikersIngelogd=a.nrOfGebruikersIngelogd?a.nrOfGebruikersIngelogd:0;b.totaalGebruikers=
a.totaalAantalGebruikers?a.totaalAantalGebruikers:0;b.totaalActivatedGebruikers=a.totaalAantalActivatedGebruikers?a.totaalAantalActivatedGebruikers:0;b.totaalDeactivatedGebruikers=a.totaalAantalDeactivatedGebruikers?a.totaalAantalDeactivatedGebruikers:0;b.totaalNonActivatedGebruikers=a.totaalAantalNonActivatedGebruikers?a.totaalAantalNonActivatedGebruikers:0;getProgressKlantStacked();getProgressMeldingStacked();getProgressMonitoringStacked();getProgressRapportStacked();getProgressGebruikersStacked()}else b.error=
a.errorCode+" "+a.errorMsg},function(){0})};fetchData()}]);appcontrollers.controller("IndexController",["$scope",function(c){}]);
appcontrollers.controller("LoginController",["$window","$routeParams","$scope","$rootScope","$location","$q","maxFieldLengths","$anchorScroll","$cookies","LoginService","UserService","clientip","ExactOnlineService","WebSocketService",function(c,b,a,d,e,g,h,l,f,n,q,v,k,r){a.maxFieldLengths=h;c.sessionStorage.user?(h=c.sessionStorage.user,delete d.clientApiKey,delete c.sessionStorage.user,c.sessionStorage.user=h,d.content_id="content",e.path("/searchcompany"),e.url(e.path())):d.content_id="nscontent";
if("undefined"===typeof fuckAdBlock)adBlockDetected();else fuckAdBlock.onDetected(adBlockDetected).onNotDetected(adBlockNotDetected);if("undefined"!=typeof b.userid){h=b.activationid||void 0;var t=b.userid||void 0;b=b.bbset||void 0;h&&b&&(delete a.activateAccount,delete a.error,n.activateCustomer({activationid:h,username:t},function(b){"undefined"!==typeof b.errorCode?a.error=b.errorCode+" "+b.errorMsg:(a.activateAccount=!0,t&&(a.username=t))}))}a.rememberMe=!1;a.isInvalid=function(b,c){var d=b[c].$invalid&&
b[c].$dirty;if(d){delete a.error;var p=e.hash();e.hash(b[c].$id);l();e.hash(p)}return d};a.websocketStatus=function(){return r.status()};a.login=function(){delete a.activateAccount;delete a.error;var b=n.authenticate({username:a.username,password:a.password,ipaddress:v.ip});g.all({tokendata:b.$promise}).then(function(b){delete a.error;var p=b.tokendata.token,r=b.tokendata.refreshToken,t=b.tokendata.basicAuth;"undefined"!=typeof p&&null!=p?(c.sessionStorage.authToken=p,c.sessionStorage.refreshToken=
r,c.sessionStorage.basicAuth=t,0,q.userdata(function(b){a.rememberMe&&f.put("authToken",p,{secure:!0,samesite:"strict"});delete d.clientApiKey;c.sessionStorage.user=JSON.stringify(b);d.content_id="content";b=JSON.parse(c.sessionStorage.user).roles;var r=JSON.parse(c.sessionStorage.user).actionsPresent,A=k.exactOnlineAccess();g.all({exactOnlineAccess:A.$promise}).then(function(a){"undefined"!==typeof A.errorCode?(d.error=result.errorCode+" "+result.errorMsg,d.isExactOnlineAccess=!1):d.isExactOnlineAccess=
"notConnected"==A.result?!1:!0}).catch(function(a){0});hasRole(b,"admin_sbdr")||hasRole(b,"admin_sbdr_hoofd")?e.path("/dashboard"):1==r?e.path("/dashboard/alertstab"):e.path("/searchcompany");e.url(e.path())},function(b){a.error="Er is een fout opgetreden."})):a.error="undefined"!=typeof b.tokendata.errorMsg&&null!=b.tokendata.errorMsg?b.tokendata.errorMsg:"Er ging iets fout bij het inloggen. Probeert u het nog een keer."}).catch(function(b){0;a.error="Er is een fout opgetreden."})};a.createaccount=
function(){d.content_id="content";e.path("/searchcompany");e.url(e.path())};a.forgotPass=function(){e.path("/forgotpassword");e.url(e.path())}}]);appcontrollers.controller("MessagesController",["$scope","$routeParams","$location",function(c,b,a){0}]);
appcontrollers.controller("MonitoringDetailsController",["$window","$modal","$scope","$rootScope","$routeParams","$location","maxFieldLengths","$filter","$q","monitoringDetailData","GebruikersServicePath","CompanyService",function(c,b,a,d,e,g,h,l,f,n,q,v){a.maxFieldLengths=h;var k=e.eigenBedrijfId,r=e.monitoringId,t=e.searchurl;a.monitorData=n.monitoring;a.hasSearchResults=!1;a.totalItems=0;a.currentPage=1;a.itemsPage=20;a.maxSize=5;var w=["$scope","$modalInstance",function(a,b){a.remove=!1;a.reason=
"1";a.removeNotificationOk=function(b){a.reason=b;a.remove=!0;a.closeRemoveNotificationModal()};a.closeRemoveNotificationModal=function(){b.close({remove:a.remove,reason:a.reason})}}];a.documentRequested={action:"monitorDetails",bedrijfId:k,monitorId:r};a.back=function(){url=gotoDurl(t);null!=url&&(g.path(url),g.url(g.path()))};a.bedragVermelding=function(a){return void 0==a||null==a?"afgeschermd":l("currency")(a)};a.bedrijfdoorgegevens=function(a,b,c,d){return void 0!=a&&null!=a?(a="",void 0!=b&&
null!=b&&(a+=b),void 0!=c&&null!=c&&(a=a+", "+c),a):d};a.fetchResult=function(b){void 0!=n.meldingen&&null!=n.meldingen?(a.allCompanies=n.meldingen,a.totalItems=a.allCompanies.length,b()):(a.allCompanies=[],a.totalItems=0)};a.hasVermeldingen=function(){return void 0!=a.companies&&null!=a.companies?0<a.companies.length:!1};a.notificationChange=function(b,d){delete a.notificationRemoved;delete a.error;0;g.path("/notifycompany/"+JSON.parse(c.sessionStorage.user).bedrijfId+"/"+d+"/$monitoringdetails$"+
k+"$"+r+escapeSearchUrl(t)+"/"+b)};a.notificationReadOnly=function(b,d){delete a.notificationRemoved;delete a.error;0;g.path("/notifycompany/"+JSON.parse(c.sessionStorage.user).bedrijfId+"/"+d+"/$monitoringdetails$"+k+"$"+r+escapeSearchUrl(t)+"/"+b+"/true")};a.notificationRemove=function(c,d){delete a.notificationRemoved;delete a.error;b.open({templateUrl:"removenotificationmon.html",controller:w,size:"lg"}).result.then(function(a){a.remove&&removeNotification(c,d,a.reason)},function(){0})};a.nrOfItems=
function(){return 0};getCompaniesOnPage=function(a,b,c,d){a=(a-1)*b;return d.slice(a,Math.min(a+b,c))};a.pageChanged=function(){a.companies&&(0,a.searchcompany.pageNumber=a.currentPage,pageparturl="$"+a.currentPage,t=searchparturl+pageparturl,a.companies=getCompaniesOnPage(a.currentPage,a.itemsPage,a.totalItems,a.allCompanies))};a.setPage=function(b){a.currentPage=b};a.showRemoveNotification=function(a,b){return!0};a.getAfdeling=function(a){return"undefined"==typeof a||null==a||""==a?"Vermeldingen":
a};a.vermeldingenPagingOn=function(){return a.hasVermeldingen()?1<a.totalItems-a.itemsPage:!1};performSearchCompanies=function(){a.hasSearchResults=!0;a.companies=getCompaniesOnPage(a.currentPage,a.itemsPage,a.totalItems,a.allCompanies)};removeNotification=function(b,d,e){delete a.notificationRemoved;delete a.error;v.removeNotificationCompany({meldingId:b,bedrijfId:d,gebruikerId:JSON.parse(c.sessionStorage.user).userId,reden:e},function(b){"undefined"!=typeof b.errorCode?a.error=b.errorMsg:(a.notificationRemoved=
!0,a.currentPage=1,a.pageChanged())})};a.fetchResult(performSearchCompanies);void 0!=a.monitorData&&void 0!=a.monitorData.gebruikerAangemaaktId&&(a.acties=[],e=d=null,void 0!=a.monitorData.gebruikerVerwijderdId&&null!=a.monitorData.gebruikerVerwijderdId&&(e=a.monitorData.gebruikerVerwijderdId),void 0!=a.monitorData.gebruikerLaatsteMutatieId&&null!=a.monitorData.gebruikerLaatsteMutatieId&&(d=a.monitorData.gebruikerLaatsteMutatieId),a.gebruikerIds=[a.monitorData.gebruikerAangemaaktId.toString(),null!=
d?d.toString():"null",null!=e?e.toString():"null"],q.gebruikerdata({gebruikerIds:a.gebruikerIds},function(b){"undefined"!=typeof b.errorCode?a.error=b.errorCode+" "+b.errorMsg:(a.gebruikers=b,a.acties.push({actie:"Monitoring gestart",datum:n.toegevoegd,gebruiker:a.gebruikers[0].fullName,functie:a.gebruikers[0].functie,afdeling:a.gebruikers[0].afdeling,email:a.gebruikers[0].emailAdres}));void 0!=a.companies&&q.sbdrgebruiker(function(b){"undefined"!=typeof b.errorCode?a.error=b.errorCode+" "+b.errorMsg:
(a.companies.forEach(function(c){void 0!=c.toegevoegd&&a.acties.push({actie:"Betalingsachterstand "+c.referentieIntern+" opgenomen",datum:c.datumGeaccordeerd,gebruiker:b.fullName.trim(),functie:b.functie,afdeling:b.afdeling,email:b.emailAdres});void 0!=c.datumVerwijderd&&a.acties.push({actie:"Betalingsachterstand "+c.referentieIntern+" verwijderd",datum:c.datumVerwijderd,gebruiker:b.fullName.trim(),functie:b.functie,afdeling:b.afdeling,email:b.emailAdres})}),a.acties.sort(function(a,b){var c=/(\d{2})-(\d{2})-(\d{4}) (\d{2}):(\d{2})/;
a=c.exec(a.datum);b=c.exec(b.datum);c=new Date(+a[3],+a[2]-1,+a[1],+a[4],+a[5]);b=new Date(+b[3],+b[2]-1,+b[1],+b[4],+b[5]);return c.getTime()>b.getTime()?1:c.getTime()===b.getTime()?0:-1}))})}))}]);
appcontrollers.controller("MonitoringQuestionController",["$window","$routeParams","$scope","$rootScope","$location","$modal","CompanyService",function(c,b,a,d,e,g,h){var l;void 0==a.init&&(a.hideReportPopup=!d.isShowHelp(d.HELP_RAPPORTPURCHASE),h.checkIfUserCanPay({userId:JSON.parse(c.sessionStorage.user).userId},function(b){"undefined"!=typeof b.errorCode?a.error=b.errorCode+" "+b.errorMsg:a.userCanPay=b.val}),a.init=!0);l=b.bedrijfId&&null!=b.bedrijfId&&void 0!=b.bedrijfId?b.bedrijfId:null;searchurl=
b.searchurl?b.searchurl:"$dashboard";a.kvkNummer=b.kvkNummer;a.kvkNummerPrefix=b.kvkNummer;a.hoofd=b.hoofd;a.bedrijfNaam=decodeURIComponent(b.bedrijfNaam);a.bekendBijSbdr="true";a.monitoringBijBedrijf=b.monitoringBijBedrijf;a.adres=decodeURIComponent(b.adres);"undefined"!==typeof a.kvkNummerPrefix&&null!=a.kvkNummerPrefix&&12==a.kvkNummerPrefix.length&&(a.kvkNummerPrefix=a.kvkNummerPrefix.substring(0,8));a.returnToSearch=function(){url=gotoDurl(searchurl);null!=url&&(e.path(url),e.url(e.path()))};
callMonitoring=function(b){h.monitoringCompany(b,function(b){"undefined"!=typeof b.errorCode?a.error=b.errorCode+" "+b.errorMsg:a.monitorCreated=!0})};callReport=function(a){e.path("/report/"+a.bedrijfIdGerapporteerd+"/"+a.bedrijfId+"/0/"+searchurl);e.url(e.path())};a.gotoReport=function(){delete a.monitoringSuccessful;h.getOrCreateCompanyData({kvknumber:a.kvkNummer,hoofd:a.hoofd},function(b){"undefined"!==typeof b.errorCode?a.error=b.errorCode+" "+b.errorMsg:(bedrijfIds="undefined"==l||null==l?{bedrijfId:b.bedrijfId,
bedrijfIdGerapporteerd:JSON.parse(c.sessionStorage.user).bedrijfId}:{bedrijfId:l,bedrijfIdGerapporteerd:JSON.parse(c.sessionStorage.user).bedrijfId},callReport(bedrijfIds))})}}]);
appcontrollers.controller("MyAccountController",["$window","$modal","$scope","$rootScope","$location","$anchorScroll","$base64","maxFieldLengths","$routeParams","$cookies","companyAccountData","AccountService","GebruikersService","GebruikerService","UserService",function(c,b,a,d,e,g,h,l,f,n,q,v,k,r,t){a.maxFieldLengths=l;a.obj={};var w,p;if(f.showtab)var y=f.showtab;a.showTab=function(b){if("undefined"!=typeof c.sessionStorage.user){var d=JSON.parse(c.sessionStorage.user).roles;if("undefined"!=typeof d){if("bedrijfsgegevenstab"==
b)return"bedrijfsgegevenstab"==a.showtab&&(a.tabs[0].select(),resetShowTab()),hasRole(d,"admin_klant")||hasRole(d,"hoofd_klant")||hasRole(d,"admin_sbdr_hoofd");if("userstab"==b)return"userstab"==a.showtab&&(a.tabs[1].select(),resetShowTab()),w=$("#emailhelp"),p=$("#passwordhelp"),hasRole(d,"admin_klant")||hasRole(d,"hoofd_klant")||hasRole(d,"admin_sbdr_hoofd");if("factuurtab"==b)return"factuurtab"==a.showtab&&(a.tabs[2].select(),resetShowTab()),hasRole(d,"admin_klant")||hasRole(d,"hoofd_klant")||
hasRole(d,"admin_sbdr_hoofd")}}return!1};resetShowTab=function(){delete a.showtab;d.changeUrlWithoutReload("/myaccount")};y&&(a.showtab=y,y=null);void 0==a.init&&(a.formsubmitted=!1,a.editBankOn=!1,a.editFacturatieOn=!1,a.account={bedrijf:q.companyAccount.bedrijf,klant:q.companyAccount.klant,referentieIntern:q.companyAccount.referentieIntern},"undefined"!==typeof a.account&&"undefined"!==typeof a.account.klant&&(a.facturatie={emailAdresFacturatie:a.account.klant.emailAdresFacturatie}),"undefined"!=
typeof a.account.klant&&"undefined"==typeof a.account.klant.akkoordIncasso&&(a.account.klant.akkoordIncasso=!1),a.masterklant=angular.copy(a.account.klant),a.masterbedrijf=angular.copy(a.account.bedrijf),a.account&&a.account.bedrijf&&(a.adresOkFalseOnLoad=!a.account.bedrijf.adresOk),l=null,typeof a.account.bedrijf&&(l=a.account.bedrijf.bedrijfId),a.factuurFilterCriteria={userId:JSON.parse(c.sessionStorage.user).userId,bedrijfId:l,pageNumber:1,sortDir:"",sortedBy:"",filterValue:""},a.filterCriteria=
{userId:JSON.parse(c.sessionStorage.user).userId,bedrijfId:l,pageNumber:1,sortDir:"",sortedBy:"",filterValue:""},a.factuurCurrentPage=1,a.factuurItemsPage=20,a.factuurMaxSize=5,a.factuurTotalItems=0,a.currentPage=1,a.itemsPage=20,a.maxSize=5,a.totalItems=0,a.gNewUser=!1,a.masteraccount=angular.copy(a.account),a.init=!0);a.EMAIL_REGEXP=/^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$/;a.functies=[{id:"Directeur",description:"Directeur"},{id:"Bestuurder",description:"Bestuurder"},{id:"Eigenaar/Vennoot",
description:"Eigenaar/Vennoot"},{id:"Bedrijfsleider",description:"Bedrijfsleider"},{id:"Financieel beheerder",description:"Financieel beheerder"},{id:"Aministrateur",description:"Administrateur"},{id:"Credit risk manager",description:"Credit risk manager"},{id:"Financieel directeur",description:"Financieel directeur"},{id:"Financieel manager",description:"Financieel manager"},{id:"Hoofd debiteurenbeheer",description:"Hoofd debiteurenbeheer"},{id:"Inkoopmanager",description:"Inkoopmanager"},{id:"Manager collections",
description:"Manager collections"},{id:"Medewerker debiteurenbeheer",description:"Medewerker debiteurenbeheer"},{id:"Risk manager",description:"Risk manager"},{id:"Treasury manager",description:"Treasury manager"},{id:"Overig",description:"Overig"}];a.gebruikerrollen=[{id:"Gebruiker",description:"Standaard gebruiker"},{id:"HoofdGebruiker",description:"Hoofdgebruiker"},{id:"BedrijfManaged",description:"Bedrijf manager (extern)"}];a.PHONE_REGEXP=/^0[1-9](?:(?:-)?[0-9]){8}$|^0[1-9][0-9](?:(?:-)?[0-9]){7}$|^0[1-9](?:[0-9]){2}(?:(?:-)?[0-9]){6}$|^((?:0900|0800|0906|0909)(?:(?:-)?[0-9]){4,7}$)/;
searchurl=f.searchurl?f.searchurl:"$dashboard";a.userIdSelected=null;$("#bankeditIcon");var z=["$scope","$modalInstance",function(a,b){a.remove=!1;a.removeChangesOk=function(){a.remove=!0;a.closeRemoveChangesModal()};a.closeRemoveChangesModal=function(){b.close({remove:a.remove})}}],x=["$scope","$modalInstance",function(a,b){a.remove=!1;a.removeUserOk=function(){a.remove=!0;a.closeRemoveUserModal()};a.closeRemoveUserModal=function(){b.close({remove:a.remove})}}];a.$watch("account.klant.bankrekeningNummer",
function(b){b&&(18==b.length?v.ibanCheck({ibannummer:b},function(b){"undefined"!=typeof b.errorCode?(delete a.bankrekeningNummerInvalid,a.error=b.errorMsg):0==b.result?a.bankrekeningNummerInvalid=!0:delete a.bankrekeningNummerInvalid}):a.bankrekeningNummerInvalid=!0)},!0);a.$watch("account.klant.btwnummer",function(a){validateBtwNummer(a)},!0);a.isProspect=function(){return"undefined"!=typeof c.sessionStorage.user?!!JSON.parse(c.sessionStorage.user).prospect:!1};a.encoded=function(a){return h.encode(a)};
a.isAdresOk=function(){return"undefined"!=typeof c.sessionStorage.user?JSON.parse(c.sessionStorage.user).adresOk:!1};a.notAllowedNewUser=function(){return a.isProspect()||0==a.isAdresOk()?"Alleen geverifierde klanten kunnen nieuwe gebruikers aanmaken":""};a.activateKlant=function(){delete a.error;delete a.verificationError;delete a.klantActivated;void 0!=a.obj.formactivatiegegevens&&a.obj.formactivatiegegevens.$setPristine();var b=JSON.parse(c.sessionStorage.user).userId;v.activateCustomerBriefCode({activationcode:a.activatiecode,
userid:b},function(b){void 0!=b.errorCode?(a.verificationError=b.errorMsg,a.masteractivatiecode=angular.copy(a.activatiecode)):t.userdata(function(b){c.sessionStorage.user=JSON.stringify(b);a.klantActivated=!0})})};a.isAdmin=function(){if(void 0!=c.sessionStorage.user){var a=JSON.parse(c.sessionStorage.user).roles;return hasRole(a,"admin_sbdr")||hasRole(a,"admin_sbdr_hoofd")}return!1};a.addressEditAllowed=function(){if(void 0!=c.sessionStorage.user){var a=JSON.parse(c.sessionStorage.user).roles;return hasRole(a,
"admin_sbdr")||hasRole(a,"admin_sbdr_hoofd")}return!1};a.annuleren=function(c){b.open({templateUrl:"removechanges.html",controller:z,size:"lg"}).result.then(function(b){b.remove&&(delete a.userDetails,resetPage(),c&&(a.userChangePassword=!0))},function(){0})};a.back=function(){url=gotoDurl(searchurl);null!=url&&(e.path(url),e.url(e.path()))};a.btwNummerAanwezig=function(b){return null!=b&&"undefined"!=typeof b&&(b=b.btwnummer,void 0!=b&&null!=b&&""!=b)?(a.account.klant.nietBtwPlichtig=!1,a.addressEditAllowed()?
void 0!=a.obj.formaccountgegevensadmin&&void 0!=a.obj.formaccountgegevensadmin.nietBtwPlichtig&&a.obj.formaccountgegevensadmin.nietBtwPlichtig.$setPristine():void 0!=a.obj.formaccountgegevens&&void 0!=a.obj.formaccountgegevens.nietBtwPlichtig&&a.obj.formaccountgegevens.nietBtwPlichtig.$setPristine(),!0):!1};a.tabClicked=function(){a.userDetails?a.annuleren():resetPage()};a.buttonBankDisabled=function(){return a.bankrekeningNummerInvalid||!a.isNietBtwPlichtig()&&!a.isAdmin()&&a.btwnummerInvalid||"undefined"==
typeof a.account.klant.tenaamstelling||null==a.account.klant.tenaamstelling||""==a.account.klant.tenaamstelling?!0:!1};a.buttonUserDisabled=function(){return!1};a.changePassword=function(){resetPage();delete a.passwordhuidig;delete a.password;delete a.passwordcheck;a.userDetails?a.annuleren(!0):a.userChangePassword=!0};a.changeUser=function(b){resetPage();a.userIdSelected=b;a.userDetails=!0;disableNameFields();user=$.grep(a.users,function(a){return a.userId==b});a.gebruikerEdit={geslacht:user[0].geslacht,
bedrijfId:user[0].bedrijfId,userId:user[0].userId,voornaam:user[0].voornaam,naam:user[0].naam,emailAdres:user[0].emailAdres,gebruikerTelefoonNummer:user[0].gebruikerTelefoonNummer,functie:user[0].functie,roles:user[0].roles,afdeling:user[0].afdeling,hoofdgebruiker:isHoofdgebruiker(user[0].roles),bedrijfManager:isBedrijfManager(user[0].roles),registratiesToegestaan:isRegistratiesToegestaan(user[0].roles),apiToegestaan:a.isApiToegestaan(user[0].roles),userName:user[0].userName,verantwoordelijkheidAkkoord:!0};
if(""!=a.gebruikerEdit){var c=a.gebruikerEdit.roles;hasRole(c,"hoofd_klant")||hasRole(c,"admin_sbdr_hoofd")?a.gebruikerEdit.gebruikerrol="HoofdGebruiker":hasRole(c,"gebruiker_klant")?a.gebruikerEdit.gebruikerrol="Gebruiker":hasRole(c,"bedrijf_manager")&&(a.gebruikerEdit.gebruikerrol="BedrijfManaged");hasRole(c,"registraties_toegestaan")?a.gebruikerEdit.registratiesToegestaan=!0:a.gebruikerEdit.registratiesToegestaan=!1;hasRole(c,"api_toegestaan")?a.gebruikerEdit.apiToegestaan=!0:a.gebruikerEdit.apiToegestaan=
!1}"undefined"===typeof a.gebruikerEdit.gebruikerrol&&(a.gebruikerEdit.gebruikerrol="Gebruiker");a.emailadrescontrole=""};a.checkGebruikerFormInvalid=function(b){return void 0!=b?b.voornaam.$invalid||b.naam.$invalid||b.emailadres.$invalid||a.emailInUse||b.functie.$invalid||a.emailCheckInvalid(b,"emailadres","emailadrescontrole")||b.telefoonnummer.$invalid||!a.gebruikerEdit.verantwoordelijkheidAkkoord:!0};a.downloadFactuur=function(a){return{action:"factuur",factuurId:a}};a.deleteUser=function(c){resetPage();
delete a.userChangePassword;b.open({templateUrl:"removeuser.html",controller:x,size:"lg"}).result.then(function(b){b.remove&&a.deleteUserDel(c)},function(){0})};a.deleteUserDel=function(b){resetPage();a.userIdSelected=b;r.delete({id:b},function(b){void 0===b.errorCode?(0,a.userIdSelected=null,delete a.userDetails,a.userRemovedOk=!0,a.filterResult()):(0,a.error=b.errorMsg,b=e.hash(),e.hash("alert"),g(),e.hash(b))},function(){0})};a.editAddressAndBank=function(){resetPage();a.editBank()};a.editBank=
function(){a.account=angular.copy(a.masteraccount);cleanBankForm();a.editBankOn=1!=a.editBankOn};a.editFacturatie=function(){a.facturatie={emailAdresFacturatie:a.account.klant.emailAdresFacturatie};cleanFacturatieForm();a.editFacturatieOn=1!=a.editFacturatieOn};a.emailCheckInvalid=function(a,b,c){return a[b].$dirty||null!=a[c].$modelValue&&""!=a[c].$modelValue?a[b].$modelValue!=a[c].$modelValue:!1};a.fetchFacturen=function(b){d.range="items\x3d"+((a.factuurFilterCriteria.pageNumber-1)*a.factuurItemsPage+
1)+"-"+((a.factuurFilterCriteria.pageNumber-1)*a.factuurItemsPage+a.factuurItemsPage);v.getFacturen(a.factuurFilterCriteria,function(c,d){void 0!=c&&0<c.length?(a.facturen=c,a.factuurTotalItems=paging_totalItems(d("Content-Range"))):(a.facturen=[],a.factuurTotalItems=0);b()},function(b){a.facturen=[];a.factuurTotalItems=0;a.error=b})};a.fetchResult=function(b){d.range="items\x3d"+((a.filterCriteria.pageNumber-1)*a.itemsPage+1)+"-"+((a.filterCriteria.pageNumber-1)*a.itemsPage+a.itemsPage);v.gebruikers(a.filterCriteria,
function(c,d){0;a.users=c;a.totalItems=paging_totalItems(d("Content-Range"));b()},function(b){0;a.users=[];a.totalItems=0})};a.filterResult=function(){return a.fetchResult(function(){a.filterCriteria.pageNumber=1;a.currentPage=1;a.userIdSelected=null;delete a.range})};a.hasRole1=function(a,b){return hasRole(a,b)};a.isCurrentUser=function(a,b){return"undefined"!==typeof c.sessionStorage.user?!(a!=JSON.parse(c.sessionStorage.user).userId||b!=JSON.parse(c.sessionStorage.user).emailAdres):!1};a.isIncassoAkkoord=
function(){return void 0!=a.account.klant?void 0!=a.account.klant.akkoordIncasso?a.account.klant.akkoordIncasso:!1:!1};a.isInvalid=function(b,c){if(void 0!=b){var d=b[c].$invalid;if(b=b[c].$dirty||a.formsubmitted){delete a.verificationError;delete a.accountSavedOk;delete a.letterCreatedOk;delete a.emailInUse;"emailadres"==c&&w.text("Voer een geldig email adres in");"bankrekeningNummer"==c&&delete a.bankrekeningNummerInvalid;if("nietBtwPlichtig"==c||"btwnummer"==c)a.isNietBtwPlichtig()?(delete a.btwNrError,
d=!1):(d=!a.btwNummerAanwezig(a.account.klant)||1==a.btwnummerInvalid)||delete a.btwNrError;"verantwoordelijkheidAkkoord"==c&&b&&(d="undefined"!=typeof a.gebruikerEdit&&null==a.gebruikerEdit.userId?!a.gebruikerEdit.verantwoordelijkheidAkkoord:!1)}return b&&d}return!0};a.isKlantActivated=function(){return a.klantActivated&&1==a.klantActivated?!0:void 0!=c.sessionStorage.user?!JSON.parse(c.sessionStorage.user).prospect:!1};a.isNietBtwPlichtig=function(){return a.account&&a.account.klant&&1==a.account.klant.nietBtwPlichtig?
a.account.klant.nietBtwPlichtig:!1};a.isUnchangedActivatieCode=function(b){return void 0!=a.masteractivatiecode?angular.equals(b,a.masteractivatiecode):!(void 0!=b&&null!=b)};a.isUnchangedBedrijf=function(b){return void 0!=a.masterbedrijf?angular.equals(b,a.masterbedrijf):!0};a.isUnchangedKlant=function(b){return void 0!=a.masterklant?angular.equals(b,a.masterklant):!0};a.newUser=function(){resetPage();enableNameFields();delete a.userIdSelected;a.userDetails=!0;a.gebruikerEdit={bedrijfId:a.account.bedrijf.bedrijfId,
userId:null,voornaam:null,geslacht:"M",naam:null,emailAdres:null,functie:null,roles:createUserRole(),hoofdgebruiker:!1,bedrijfManager:!1,registratiesToegestaan:!1,userName:null,verantwoordelijkheidAkkoord:!1};if(""!=a.gebruikerEdit){var b=a.gebruikerEdit.roles;hasRole(b,"hoofd_klant")||hasRole(b,"admin_sbdr_hoofd")?a.gebruikerEdit.gebruikerrol="HoofdGebruiker":hasRole(b,"gebruiker_klant")?a.gebruikerEdit.gebruikerrol="Gebruiker":hasRole(b,"bedrijf_manager")&&(a.gebruikerEdit.gebruikerrol="BedrijfManaged");
hasRole(b,"registraties_toegestaan")?a.gebruikerEdit.registratiesToegestaan=!0:a.gebruikerEdit.registratiesToegestaan=!1}"undefined"===typeof a.gebruikerEdit.gebruikerrol&&(a.gebruikerEdit.gebruikerrol="Gebruiker");a.emailadrescontrole=""};a.nietBtwPlichtig=function(){a.account&&a.account.klant&&(a.account.klant.btwnummer=null,delete a.btwnummerInvalid,1==a.account.klant.nietBtwPlichtig&&(a.addressEditAllowed()?void 0!=a.obj.formaccountgegevensadmin.btwnummer&&(a.obj.formaccountgegevensadmin.btwnummer.$dirty=
!0):void 0!=a.obj.formaccountgegevens.btwnummer&&(a.obj.formaccountgegevens.btwnummer.$dirty=!0),validateBtwNummer(a.account.klant.btwnummer)))};a.pageChanged=function(b){a.currentPage=b;0;a.filterCriteria.pageNumber=a.currentPage;a.fetchResult(function(){delete d.range})};a.factuurPageChanged=function(b){a.factuurCurrentPage=b;a.factuurFilterCriteria.pageNumber=a.factuurCurrentPage;a.fetchFacturen(function(){delete d.factuurRange})};a.passwordCheckInvalid=function(b,c,d){return!b[d].$dirty||!a.passwordInvalid(b,
c)&&b[c].$modelValue==b[d].$modelValue?!1:!0};a.passwordInvalid=function(a,b){if(passLengthInvalid(a,b)||passLetterInvalid(a,b)||passNumberInvalid(a,b)||passCapitalInvalid(a,b)){var c=passLengthInvalid(a,b)?lengthString:"",d=passLetterInvalid(a,b)?letterString:"",e=passNumberInvalid(a,b)?numberString:"";a=passCapitalInvalid(a,b)?capitalString:"";c="Vereist: "+c+d+e;c+=a;p.text(c);return!0}return!1};a.pwdButtonDisabled=function(b,c,d,e){return b[c].$dirty&&b[d].$dirty&&b[e].$dirty&&!a.passwordCheckInvalid(b,
d,e)?!1:!0};a.pwdCancel=function(){delete a.userChangePassword;resetPage()};a.pwdReset=function(b,d){a.formsubmitted=!0;JSON.parse(c.sessionStorage.user);void 0!=a.obj.formpassworddata&&(changepassword={userId:JSON.parse(c.sessionStorage.user).userId,userName:JSON.parse(c.sessionStorage.user).userName,currentPassword:a.obj.formpassworddata[b].$modelValue,newPassword:a.obj.formpassworddata[d].$modelValue},v.changePassword(changepassword,function(b){if(null!=b.errorCode)delete a.passwordSavedOk,a.error=
b.errorMsg;else{a.passwordSavedOk=!0;delete a.userChangePassword;var d=b.token;c.sessionStorage.authToken=d;t.userdata(function(a){$cookieStore.put("authToken",d);c.sessionStorage.user=JSON.stringify(a)})}}))};updateUser=function(e){a.gebruikerEdit.roles=updateRoles(a.gebruikerEdit.roles,a.gebruikerEdit.gebruikerrol,a.gebruikerEdit.registratiesToegestaan,a.gebruikerEdit.apiToegestaan);k.update(a.gebruikerEdit,function(u){void 0==u.errorCode?(e&&JSON.parse(c.sessionStorage.user).userId==a.gebruikerEdit.userId&&
b.open({templateUrl:"logoutafteredit.html",controller:D,size:"lg"}).result.then(function(){d.logout()},function(){0}),a.emailadrescontrole="",a.obj.formgebruikergegevens.$setPristine(),0,a.userSavedOk=!0,a.saveUserCallback()):(a.userSavedOk=!1,"102"==u.errorCode?(a.emailInUse=!0,w.text(u.errorMsg)):a.gebruikerEdit.userId==JSON.parse(c.sessionStorage.user).userId&&t.userdata(function(a){c.sessionStorage.user=JSON.stringify(a)}),0,a.error=u.errorMsg)},function(){0})};a.saveUser=function(){a.formsubmitted=
!0;a.obj.formgebruikergegevens.$invalid||a.checkGebruikerFormInvalid(a.obj.formgebruikergegevens)||a.buttonUserDisabled()||(delete a.emailInUse,delete a.error,delete a.verificationError,delete a.email,null==a.gebruikerEdit.userId?(a.gebruikerEdit.userName=a.gebruikerEdit.emailAdres,a.gebruikerEdit.roles=updateRoles(a.gebruikerEdit.roles,a.gebruikerEdit.gebruikerrol,a.gebruikerEdit.registratiesToegestaan,a.gebruikerEdit.apiToegestaan),k.create(a.gebruikerEdit,function(b){void 0==b.errorCode?(0,a.userSavedOk=
!0,a.saveUserCallback(),a.pageChanged(1),a.emailadrescontrole="",a.obj.formgebruikergegevens.$setPristine()):(a.userSavedOk=!1,"102"==b.errorCode&&(a.emailInUse=!0,w.text(b.errorMsg)),0,a.error=b.errorMsg,b=e.hash(),e.hash("alert"),g(),e.hash(b))},function(){0})):a.gebruikerEdit.userName!==a.gebruikerEdit.emailAdres?changeUsername():updateUser(!0),a.formsubmitted=!1)};a.saveUserCallback=function(){delete a.userDetails;a.filterResult()};a.setPage=function(b){a.currentPage=b};a.setFactuurPage=function(b){a.factuurCurrentPage=
b};a.setSelected=function(b){a.userIdSelected=b};a.updateAccountBedrijfData=function(){a.formsubmitted=!0;accountBedrijfUpdate(updateBedrijfAndNoLetter)};a.updateAccountBedrijfDataLetter=function(){a.formsubmitted=!0;accountBedrijfUpdate(createLetter)};a.updateFacturatieData=function(){a.formsubmitted=!0;a.account.klant.emailAdresFacturatie=a.facturatie.emailAdresFacturatie;accountUpdate(updateFacturatie)};a.emptyFacturatieEmailAndUpdate=function(){a.formsubmitted=!0;delete a.account.klant.emailAdresFacturatie;
accountUpdate(updateFacturatie)};a.miscGegevensFormIsValid=function(){var b=!0;if(null==a.account.bedrijf.telefoonnummer||""==a.account.bedrijf.telefoonnummer)b=!1;0==a.account.klant.nietBtwPlichtig&&1==a.btwnummerInvalid&&(b=!1);if(null==a.account.klant.bankrekeningNummer||""==a.account.klant.bankrekeningNummer)b=!1;if(null==a.account.klant.tenaamstelling||""==a.account.klant.tenaamstelling)b=!1;0==a.account.klant.akkoordIncasso&&(b=!1);return b};a.updateAccountData=function(){a.formsubmitted=!0;
0==a.buttonBankDisabled()&&a.miscGegevensFormIsValid()&&v.updateAccountData({klant:a.account.klant,bedrijf:a.account.bedrijf},function(b){"undefined"!=typeof b.errorCode?(a.error=b.errorMsg,a.accountSavedOk=!1):(a.account.bedrijf.adresOk&&(a.adresOkFalseOnLoad=!1),a.masteraccount=angular.copy(a.account),a.editBank(),a.accountSavedOk=!0)})};accountBedrijfUpdate=function(b){v.updateAccountBedrijfData({klant:a.account.klant,bedrijf:a.account.bedrijf},function(c){"undefined"!=typeof c.errorCode?(a.error=
c.errorMsg,a.accountSavedOk=!1):(a.masteraccount=angular.copy(a.account),b(),a.account.bedrijf.adresOk&&(a.adresOkFalseOnLoad=!1))})};accountUpdate=function(b){v.updateAccountData({klant:a.account.klant,bedrijf:a.account.bedrijf},function(c){"undefined"!=typeof c.errorCode?(a.error=c.errorMsg,a.accountSavedOk=!1):(a.account.bedrijf.adresOk&&(a.adresOkFalseOnLoad=!1),a.masteraccount=angular.copy(a.account),b())})};createLetter=function(){v.createNewAccountLetter({bedrijfId:a.account.bedrijf.bedrijfId},
function(b){"undefined"!=typeof b.errorCode?(a.error=b.errorMsg,a.letterCreatedOk=!1):(a.account.bedrijf.adresOk&&(a.adresOkFalseOnLoad=!1),a.editAddressAndBank(),a.letterCreatedOk=!0,a.accountSavedOk=!0)})};createUserRole=function(){return JSON.parse('{"item": {"key": "gebruiker_klant", "value": true}}')};cleanBankForm=function(){resetPage()};cleanFacturatieForm=function(){resetPage()};resetPage=function(){a.userIdSelected=null;clearAllMessages();setAllFormsPristine()};clearAllMessages=function(){a.formsubmitted=
!1;delete a.error;delete a.verificationError;delete a.userSavedOk;delete a.passwordSavedOk;delete a.userRemovedOk;delete a.accountSavedOk;delete a.facturatieSavedOk;delete a.letterCreatedOk;delete a.klantActivated;delete a.userChangePassword};disableNameFields=function(){a.gNewUser=!1};enableNameFields=function(){a.gNewUser=!0};setAllFormsPristine=function(){void 0!=a.obj.formaccountgegevens&&a.obj.formaccountgegevens.$setPristine();void 0!=a.obj.formaccountgegevensadmin&&a.obj.formaccountgegevensadmin.$setPristine();
void 0!=a.obj.formbedrijfsgegevens&&a.obj.formbedrijfsgegevens.$setPristine();void 0!=a.obj.formgebruikerstabel&&a.obj.formgebruikerstabel.$setPristine();void 0!=a.obj.formgebruikergegevens&&a.obj.formgebruikergegevens.$setPristine();void 0!=a.obj.formpassworddata&&a.obj.formpassworddata.$setPristine();void 0!=a.obj.formfacturatie&&a.obj.formfacturatie.$setPristine()};isHoofdgebruiker=function(a){return hasRole(a,"hoofd_klant")||hasRole(a,"admin_sbdr_hoofd")};isBedrijfManager=function(a){return hasRole(a,
"bedrijf_manager")};isRegistratiesToegestaan=function(a){return hasRole(a,"registraties_toegestaan")};a.isApiToegestaan=function(b){return hasRole(b,"api_toegestaan")?a.apiUserAvailable=!0:!1};updateBedrijfAndNoLetter=function(){a.editAddressAndBank();a.accountSavedOk=!0};updateFacturatie=function(){a.editFacturatie();a.facturatieSavedOk=!0};updateRoles=function(a,b,d,e){var k="",u="",r="";d&&(u='{"key": "registraties_toegestaan", "value": true}');e&&(r='{"key": "api_toegestaan", "value": true}');
void 0!=a&&null!=a?hasRole(a,"admin_klant")?k='{"key": "admin_klant","value":true}':hasRole(JSON.parse(c.sessionStorage.user).roles,"admin_sbdr")||hasRole(JSON.parse(c.sessionStorage.user).roles,"admin_sbdr_hoofd")?k="HoofdGebruiker"==b?'{"key": "admin_sbdr_hoofd", "value": true}':'{"key": "admin_sbdr", "value": true}':"HoofdGebruiker"==b?k='{"key": "hoofd_klant", "value": true}':"Gebruiker"==b?k='{"key": "gebruiker_klant", "value": true}':"BedrijfManaged"==b&&(k='{"key": "bedrijf_manager","value":true}'):
k='{"key": "gebruiker_klant", "value": true}';a="";""!=k&&(a='{"item": ['+k);u&&(a+=","+u);return JSON.parse(""!=a?""!=r?a+(","+r+"]}"):a+"]}":a+"]}")};validateBtwNummer=function(b){if(b){var c=b.toUpperCase().replace(/[^a-zA-Z 0-9]+/g,"");"NL"!=c.substr(0,2)&&12==c.length?a.account.klant.btwnummer="NL"+b:14==c.length?(b=c,"NL"==b.substr(0,2)&&(b=b.substr(2,b.length)),v.viesCheck({btwNummer:b},function(b){"undefined"!=typeof b.errorCode?(delete a.btwnummerInvalid,a.btwNrError=b.errorMsg):0==b.result?
a.btwnummerInvalid=!0:(delete a.btwnummerInvalid,delete a.btwNrError,a.account.klant.btwnummer=c)})):a.btwnummerInvalid=!0}else a.btwnummerInvalid=!0};a.filterResult();a.fetchFacturen(function(){});changeUsername=function(c){b.open({templateUrl:"changeusername.html",controller:B,size:"lg"}).result.then(function(b){b.changeUsername&&(a.gebruikerEdit.userName=a.gebruikerEdit.emailAdres,updateUser(!1))},function(){0})};var D=["$scope","$modalInstance",function(a,b){a.closeChangeUsernameModal=function(){b.close()}}],
B=["$scope","$modalInstance",function(a,b){a.changeUsername=!1;a.changeUsernameOk=function(){a.changeUsername=!0;a.closeChangeUsernameModal()};a.closeChangeUsernameModal=function(){b.close({changeUsername:a.changeUsername})}}]}]);
appcontrollers.controller("MyUserAccountController",["$window","$scope","$rootScope","$location","$cookies","$anchorScroll","$routeParams","maxFieldLengths","AccountService","UserService",function(c,b,a,d,e,g,h,l,f,n){0;b.maxFieldLengths=l;var q=$("#passwordhelp");b.formSubmitted=!1;b.isInvalid=function(a,c){var e=a[c].$dirty||b.formSubmitted;if(e=a[c].$invalid&&e){delete b.error;var k=d.hash();d.hash(a[c].$id);g();d.hash(k)}return e};b.passwordInvalid=function(a,c){if(passLengthInvalid(a,c,b.formSubmitted)||
passLetterInvalid(a,c,b.formSubmitted)||passNumberInvalid(a,c,b.formSubmitted)||passCapitalInvalid(a,c,b.formSubmitted)){var d=passLengthInvalid(a,c,b.formSubmitted)?lengthString:"",e=passLetterInvalid(a,c,b.formSubmitted)?letterString:"",k=passNumberInvalid(a,c,b.formSubmitted)?numberString:"";a=passCapitalInvalid(a,c,b.formSubmitted)?capitalString:"";d="Vereist: "+d+e+k;d+=a;q.text(d);return!0}return!1};b.passwordCheckInvalid=function(a,c,d){return!a[d].$dirty&&b.formSubmitted?!0:!a[d].$dirty||
!b.passwordInvalid(a,c)&&a[c].$modelValue==a[d].$modelValue?!1:!0};b.returnToDashboard=function(){d.path("/dashboard");d.url(d.path())};b.reset=function(a,d){b.formSubmitted=!0;JSON.parse(c.sessionStorage.user);changepassword={userId:JSON.parse(c.sessionStorage.user).userId,username:JSON.parse(c.sessionStorage.user).userName,currentPassword:b.formpassworddata[a].$modelValue,newPassword:b.formpassworddata[d].$modelValue};f.changePassword(changepassword,function(a){if(null!=a.errorCode)delete b.userSavedOk,
b.error=a.errorCode+" "+a.errorMsg;else{delete b.error;b.userSavedOk=!0;var d=a.token;c.sessionStorage.authToken=d;n.userdata(function(a){$cookieStore.put("authToken",d);c.sessionStorage.user=JSON.stringify(a)});delete b.formSubmitted}})};b.buttonDisabled=function(a,c,d,e){if(a[c].$dirty&&a[d].$dirty&&a[e].$dirty)if(b.passwordCheckInvalid(a,d,e))delete b.userSavedOk;else return!1;return!0}}]);
appcontrollers.controller("NotificationsAdminTabController",["$window","$modal","$scope","$rootScope","$location","maxFieldLengths","$filter","$timeout","ngTableParams","DashboardNumberTags","DashboardService","CompanyService","InternalProcessService",function(c,b,a,d,e,g,h,l,f,n,q,v,k){a.title="Meldingen Tab";a.maxFieldLengths=g;a.totalItems=0;a.currentPage=1;a.itemsPage=20;a.maxSize=5;a.noNewNotificationLetterBatch=!1;a.sizeOfLetterBatch=0;var r=["$scope","$modalInstance",function(a,b){a.continue=
!1;a.doAllNotifications=!1;a.continueAllNotifications=function(){a.continue=!0;a.doAllNotifications=!0;a.discard()};a.continueThisNotification=function(){a.continue=!0;a.discard()};a.discard=function(){b.close({continue:a.continue,doAllNotifications:a.doAllNotifications})}}],t=["$scope","$modalInstance",function(a,b){a.remove=!1;a.reason="1";a.removeNotificationOk=function(b){a.remove=!0;a.reason=b;a.closeRemoveNotificationModal()};a.closeRemoveNotificationModal=function(){b.close({remove:a.remove,
reason:a.reason})}}],w=["$scope","$modalInstance",function(a,b){a.onhold=!1;a.Continue=function(b){a.onhold=!0;closeRemoveNotificationModal()};a.Discard=function(a){closeRemoveNotificationModal()};closeRemoveNotificationModal=function(){b.close({onhold:a.onhold})}}];a.$watch("filterCriteria.filterValue",function(b){"undefined"!=typeof searchCallbackTimeout&&l.cancel(searchCallbackTimeout);searchCallbackTimeout=l(function(){b?2<b.length&&(a.currentPage=1,a.pageChanged(),a.oldSearch=b):isSearchChanged(b)&&
(a.currentPage=1,a.pageChanged(),a.oldSearch=b)},1E3)},!0);a.createDocumentRequested=function(a){return{action:"letter_notification",bedrijfId:0,meldingId:a,referentie:""}};a.createNewNotificationLetter=function(c){b.open({templateUrl:"createMeldingBrief.html",controller:r,size:"lg"}).result.then(function(b){b.continue&&(cleanUp(),v.createNewNotificationLetter({meldingId:c,allNotificationsInLetter:b.doAllNotifications},function(b){"undefined"!=typeof b.errorCode?(a.error=b.errorCode+" "+b.errorMsg,
a.letterCreatedOk=!1):(a.letterCreatedOk=!0,a.filterResult())}))})};a.createInitialNotificationLetter=function(b){cleanUp();v.createInitialNotificationLetter({meldingId:b},function(b){"undefined"!=typeof b.errorCode?(a.error=b.errorCode+" "+b.errorMsg,a.letterCreatedOk=!1):(a.letterCreatedOk=!0,a.filterResult())})};a.detailsCompany=function(a){e.path("/editcompany/"+a+"/$dashboard$notificationsadmintab");e.url(e.path())};a.fetchResult=function(b){cleanUp();d.range="items\x3d"+((a.filterCriteria.pageNumber-
1)*a.itemsPage+1)+"-"+((a.filterCriteria.pageNumber-1)*a.itemsPage+a.itemsPage);q.notificationsadmin(a.filterCriteria,function(c,d){0;"undefined"!=typeof c?(a.notifications=c,a.totalItems=paging_totalItems(d("Content-Range"))):(a.notifications=null,a.totalItems=0);n.setNrOfNotificationsAdmin(a.totalItems);b()},function(){0;a.notifications=[];a.totalItems=0;n.setNrOfNotificationsAdmin(a.totalItems)})};a.filterResult=function(){return a.fetchResult(function(){a.filterCriteria.pageNumber=1;a.currentPage=
1;delete d.range})};a.hasAdminRole=function(){return"undefined"!==typeof c.sessionStorage.user?hasRole(JSON.parse(c.sessionStorage.user).roles,"admin_sbdr_hoofd")||hasRole(JSON.parse(c.sessionStorage.user).roles,"admin_sbdr"):!1};a.hasItems=function(){return 0<n.getNrOfNotificationsAdmin()};doHoldNotificationCompany=function(b,d){b={meldingId:b,bedrijfId:d,gebruikerId:JSON.parse(c.sessionStorage.user).userId};v.holdNotificationCompany(b,function(b,c){"undefined"!=typeof b.errorCode?a.error=b.errorCode+
" "+b.errorMsg:(a.notificationOnHoldSavedOk=!0,a.currentPage=1,a.pageChanged())},function(a){0})};a.holdNotificationCompany=function(a,c){b.open({templateUrl:"holdnotificationcompany.html",controller:w,size:"lg"}).result.then(function(b){b.onhold&&doHoldNotificationCompany(a,c)},function(){0})};a.isSbdrHoofd=function(){return"undefined"!==typeof c.sessionStorage.user?hasRole(JSON.parse(c.sessionStorage.user).roles,"admin_sbdr_hoofd"):!1};a.getDagenSinds=function(a){return"undefined"!==typeof a&&null!=
a&&10<=a.length?(date=new Date(a.substring(6,10),a.substring(3,5)-1,a.substring(0,2)),diffc=new Date-date,days=Math.round(Math.abs(diffc/864E5))):"onbekend"};a.setShowActive=function(){var b=a.filterCriteria.showActive;a.filterCriteria.showActive=a.selectieShowActive;a.filterCriteria.filterValue="";b!=a.filterCriteria.showActive&&(a.currentPage=1,a.pageChanged())};a.notificationChange=function(a,b,c){cleanUp();0;e.path("/notifycompany/"+b+"/"+c+"/$dashboard$notificationsadmintab/"+a)};a.notificationReadOnly=
function(a,b,c){cleanUp();0;e.path("/notifycompany/"+b+"/"+c+"/$dashboard$notificationsadmintab/"+a+"/true")};a.nrOfItems=function(){return 0};a.pageChanged=function(){0;a.filterCriteria.pageNumber=a.currentPage;a.fetchResult(function(){delete d.range})};a.printNotificationLetter=function(b,c){a.notifications[c].briefGedownload||k.printNotificationLetter({meldingId:b},function(b){null!=b.errorCode?a.error=b.errorCode+" "+b.errorMsg:(a.notifications[c].briefGedownload=!0,a.filterResult())})};a.removeHoldNotificationCompany=
function(b,d){b={meldingId:b,bedrijfId:d,gebruikerId:JSON.parse(c.sessionStorage.user).userId};v.removeHoldNotificationCompany(b,function(b,c){"undefined"!=typeof b.errorCode?a.error=b.errorCode+" "+b.errorMsg:(a.notificationOnHoldSavedOk=!0,a.currentPage=1,a.pageChanged())},function(a){0})};a.removeNotification=function(a,c){b.open({templateUrl:"removenotification.html",controller:t,size:"lg"}).result.then(function(b){b.remove&&doRemoveNotification(a,c,b.reason)},function(){0})};a.requestreport=
function(a){e.path("/report/"+JSON.parse(c.sessionStorage.user).bedrijfId+"/"+a+"/0/$dashboard$notificationsadmintab")};doRemoveNotification=function(b,d,e){cleanUp();b={meldingId:b,bedrijfId:d,gebruikerId:JSON.parse(c.sessionStorage.user).userId,reden:e};v.removeNotificationCompany(b,function(b,c){"undefined"!=typeof b.errorCode?a.error=b.errorMsg:(a.notificationRemoved=!0,a.currentPage=1,a.pageChanged())},function(a){0})};a.setPage=function(b){a.currentPage=b};cleanUp=function(){delete a.error;
delete a.notificationRemoved};isSearchChanged=function(b){return"undefined"==typeof a.oldSearch?(a.oldSearch=b,!1):a.oldSearch!=b};void 0==a.init&&(a.filterCriteria={bedrijfId:JSON.parse(c.sessionStorage.user).bedrijfId,pageNumber:1,sortDir:"",sortedBy:"",filterValue:"",showActive:!1},a.selectieShowActive=!1,a.init=!0);a.filterResult()}]);
appcontrollers.controller("NotificationsOfProspectAdminTabController",["$window","$modal","$scope","$rootScope","$location","maxFieldLengths","$filter","$timeout","ngTableParams","DashboardNumberTags","DashboardService","CompanyService","InternalProcessService",function(c,b,a,d,e,g,h,l,f,n,q,v,k){0;a.title="Meldingen of Prospect Tab";a.maxFieldLengths=g;a.totalItems=0;a.currentPage=1;a.itemsPage=20;a.maxSize=5;a.setPage=function(b){a.currentPage=b};a.pageChanged=function(){0};a.createDocumentRequested=
function(a){return{action:"letter_notification",bedrijfId:0,meldingId:a,referentie:""}};0;a.detailsCompany=function(a){e.path("/editcompany/"+a+"/$dashboard$notificationsofprospectadmintab");e.url(e.path())};isSearchChanged=function(b){return"undefined"==typeof a.oldSearch?(a.oldSearch=b,!1):a.oldSearch!=b};a.$watch("filterCriteria.filterValue",function(b){"undefined"!=typeof searchCallbackTimeout&&l.cancel(searchCallbackTimeout);searchCallbackTimeout=l(function(){b?2<b.length&&(a.currentPage=1,a.pageChanged(),
a.oldSearch=b):isSearchChanged(b)&&(a.currentPage=1,a.pageChanged(),a.oldSearch=b)},1E3)},!0);"undefined"==typeof a.filterCriteria&&(a.filterCriteria={bedrijfId:JSON.parse(c.sessionStorage.user).bedrijfId,pageNumber:1,sortDir:"",sortedBy:"",filterValue:""});0;a.nrOfItems=function(){return 0};cleanUp=function(){delete a.error;delete a.notificationRemoved};a.hasItems=function(){return 0<n.getNrOfNotificationsAdmin()};a.createNewNotificationLetter=function(b){cleanUp();v.createNewNotificationLetter({meldingId:b},
function(b){"undefined"!=typeof b.errorCode?(a.error=b.errorCode+" "+b.errorMsg,a.letterCreatedOk=!1):a.letterCreatedOk=!0})};a.getDagenSinds=function(a){return"undefined"!==typeof a&&null!=a&&10<=a.length?(date=new Date(a.substring(6,10),a.substring(3,5)-1,a.substring(0,2)),diffc=new Date-date,days=Math.round(Math.abs(diffc/864E5))):"onbekend"};a.filterResult=function(){return a.fetchResult(function(){a.filterCriteria.pageNumber=1;a.currentPage=1;delete d.range})};0;a.fetchResult=function(b){cleanUp();
d.range="items\x3d"+((a.filterCriteria.pageNumber-1)*a.itemsPage+1)+"-"+((a.filterCriteria.pageNumber-1)*a.itemsPage+a.itemsPage);q.notificationsofprospectadmin(a.filterCriteria,function(c,d){0;"undefined"!=typeof c?(a.notifications=c,a.totalItems=paging_totalItems(d("Content-Range"))):(a.notifications=null,a.totalItems=0);n.setNrOfNotificationsAdmin(a.totalItems);b()},function(){0;a.notifications=[];a.totalItems=0;n.setNrOfNotificationsAdmin(a.totalItems)})};0;a.isSbdrHoofd=function(){return hasRole(JSON.parse(c.sessionStorage.user).roles,
"admin_sbdr_hoofd")};a.setPage=function(b){a.currentPage=b};a.pageChanged=function(){0;a.filterCriteria.pageNumber=a.currentPage;a.fetchResult(function(){delete d.range})};a.requestreport=function(a){e.path("/report/"+JSON.parse(c.sessionStorage.user).bedrijfId+"/"+a+"/0/$dashboard$notificationsofprospectadmintab")};doRemoveNotification=function(b,d,e){cleanUp();b={meldingId:b,bedrijfId:d,gebruikerId:JSON.parse(c.sessionStorage.user).userId,reden:e};v.removeNotificationCompany(b,function(b,c){"undefined"!=
typeof b.errorCode?a.error=b.errorMsg:(a.notificationRemoved=!0,a.currentPage=1,a.pageChanged())},function(a){0})};a.removeNotification=function(a,c){b.open({templateUrl:"removenotification.html",controller:r,size:"lg"}).result.then(function(b){b.remove&&doRemoveNotification(a,c,b.reason)},function(){0})};a.holdNotificationCompany=function(b,d){b={meldingId:b,bedrijfId:d,gebruikerId:JSON.parse(c.sessionStorage.user).userId};v.holdNotificationCompany(b,function(b,c){"undefined"!=typeof b.errorCode?
a.error=b.errorCode+" "+b.errorMsg:(a.notificationOnHoldSavedOk=!0,a.currentPage=1,a.pageChanged())},function(a){0})};a.removeHoldNotificationCompany=function(b,d){b={meldingId:b,bedrijfId:d,gebruikerId:JSON.parse(c.sessionStorage.user).userId};v.removeHoldNotificationCompany(b,function(b,c){"undefined"!=typeof b.errorCode?a.error=b.errorCode+" "+b.errorMsg:(a.notificationOnHoldSavedOk=!0,a.currentPage=1,a.pageChanged())},function(a){0})};a.notificationChange=function(a,b,c){cleanUp();0;e.path("/notifycompany/"+
b+"/"+c+"/$dashboard$notificationsofprospectadmintab/"+a)};a.notificationReadOnly=function(a,b,c){cleanUp();0;e.path("/notifycompany/"+b+"/"+c+"/$dashboard$notificationsofprospectadmintab/"+a+"/true")};a.printNotificationLetter=function(b,c){a.notifications[c].briefGedownload||k.printNotificationLetter({meldingId:b},function(b){null!=b.errorCode?a.error=b.errorCode+" "+b.errorMsg:a.notifications[c].briefGedownload=!0})};a.filterResult();var r=["$scope","$modalInstance",function(a,b){a.remove=!1;a.reason=
"1";a.removeNotificationOk=function(b){a.remove=!0;a.reason=b;a.closeRemoveNotificationModal()};a.closeRemoveNotificationModal=function(){b.close({remove:a.remove,reason:a.reason})}}]}]);
appcontrollers.controller("NotificationsSendController",["$window","$scope","$rootScope","$routeParams","maxFieldLengths","$location","$filter","CompanyService","NotificationsToSend",function(c,b,a,d,e,g,h,l,f){0;b.maxFieldLengths=e;var n=d.searchurl,q=d.bedrijfId,v=d.eigenBedrijfId;b.PHONE_REGEXP=/^0[1-9](?:(?:-)?[0-9]){8}$|^0[1-9][0-9](?:(?:-)?[0-9]){7}$|^0[1-9](?:[0-9]){2}(?:(?:-)?[0-9]){6}$|^((?:0900|0800|0906|0909)(?:(?:-)?[0-9]){4,7}$)/;b.isInvalid=function(a,b){var c=a[b].$dirty||k;return a[b].$invalid&&
c};b.buttonDisabled=function(a,c){a.$invalid&&b.formSubmitted&&(k=b.formSubmitted,b.formSubmitted=!1);return a.$invalid&&k};b.send=function(){if(1!=b.formSubmitted&&(b.formSubmitted=!0,!b.formnotificationssend.$invalid)){delete b.error;delete b.meldingenSavedOk;delete b.vermeldingResultaat;0;if("undefined"!==typeof f.getNotifications())for(var a in f.getNotifications())f.getNotifications()[a].meldingId=!isNaN(parseFloat(f.getNotifications()[a].meldingId))&&isFinite(f.getNotifications()[a].meldingId)?
null:f.getNotifications()[a].meldingId,"undefined"!==typeof f.getTelefoonNummerDebiteur()&&null!=f.getTelefoonNummerDebiteur()&&(f.getNotifications()[a].telefoonNummerDebiteur=f.getTelefoonNummerDebiteur()),"undefined"!==typeof f.getEmailAdresDebiteur()&&null!=f.getEmailAdresDebiteur()&&(f.getNotifications()[a].emailAdresDebiteur=f.getEmailAdresDebiteur());a={voornaam:b.akkoord.naam,achternaam:b.akkoord.achternaam,telefoonnummer:b.akkoord.telefoonnummer,afdeling:JSON.parse(c.sessionStorage.user).afdeling,
wachtwoord:b.akkoord.wachtwoord,bedrijfIdDoor:v,bedrijfIdOver:q,meldingen:f.getNotifications()};l.notifyCompanyBatch(a,function(a){"undefined"!==typeof a.errorCode?(b.error=a.errorMsg,delete b.formSubmitted):(f.setNotifications([]),b.vermeldingResultaat=a.result,b.meldingenSavedOk=!0)})}};b.back=function(){g.path("/notifycompany/"+v+"/"+q+"/"+n);g.url(g.path())};b.sendok=function(){url=gotoDurl("$dashboard$companiesnotifiedtab");null!=url&&(g.path(url),g.url(g.path()))};if("undefined"===typeof b.init){a=
JSON.parse(c.sessionStorage.user);d=null;d="undefined"!=typeof a.gebruikerTelefoonNummer?a.gebruikerTelefoonNummer:a.bedrijfTelefoonNummer;b.aantalVermeldingen=f.getNotifications().length;delete b.vermeldingenTotaalbedrag;l.getTariefOfProduct({ProductCode:"VER"},function(a){"undefined"!==typeof a.errorCode?b.error=a.errorMsg:(vermeldingTarief=a.tarief,b.vermeldingenTotaalbedrag=h("currency")(b.aantalVermeldingen*vermeldingTarief))});b.akkoord={voornaam:a.firstName,achternaam:a.lastName,telefoonnummer:d,
afdeling:a.afdeling};var k=!1;b.formSubmitted=!1;b.init=!0}}]);
appcontrollers.controller("NotificationsStatusTabController",["$scope","$rootScope","$filter","maxFieldLengths","ngTableParams","DashboardService",function(c,b,a,d,e,g){0;c.title="Notifications Status Tab";c.maxFieldLengths=d;c.totalItems=0;c.currentPage=1;c.itemsPage=20;c.maxSize=5;c.setPage=function(a){c.currentPage=a};c.pageChanged=function(){0};0;c.filterCriteria={pageNumber:1,sortDir:"",sortedBy:"",filterValue:""};0;c.nrOfItems=function(){return 0};c.filterResult=function(){return c.fetchResult(function(){c.filterCriteria.pageNumber=
1;c.currentPage=1;delete b.range})};0;c.fetchResult=function(a){b.range="items\x3d"+((c.filterCriteria.pageNumber-1)*c.itemsPage+1)+"-"+((c.filterCriteria.pageNumber-1)*c.itemsPage+c.itemsPage);g.notificationsstatus(c.filterCriteria,function(b,d){0;c.notifications=b.notificationStatus;c.totalItems=paging_totalItems(d("Content-Range"));a()},function(){0;c.notifications=[];c.totalItems=0})};0;c.setPage=function(a){c.currentPage=a};c.pageChanged=function(){0;c.filterCriteria.pageNumber=c.currentPage;
c.fetchResult(function(){delete b.range})};c.filterResult()}]);
appcontrollers.controller("NotifyController",["$window","$modal","$scope","$rootScope","$routeParams","$http","maxFieldLengths","$location","$filter","$q","ngTableParams","ownCompanyData","companyData","CompanyService","GebruikersServicePath","NotificationsToSend",function(c,b,a,d,e,g,h,l,f,n,q,v,k,r,t,w){0;a.maxFieldLengths=h;orgsearchurl=searchurl=e.searchurl?e.searchurl:"$dashboard";a.sliderValue=8;a.htmlTooltip="Wanneer u deze optie geselecteerd houdt zullen uw bedrijfsgegevens worden weergeven binnen het register.";a.dosomething=
function(){0};a.NUMBERINTERNAL_REGEXP=/^(\d*\.\d{1,2}|\d+)$/;a.dateFormat="ddMMyyyy";a.timeFormat="HHmm";a.minDateInvoice=new Date(2010,1,1);a.maxDateInvoice=new Date;var p=$("#bedraghelp"),y=$("#datumfactuurhelp"),z=$("#referentiehelp");g=e.bedrijfId;h=e.meldingId||void 0;e=e.readonly||void 0;0;a.isInvalid=function(b,c){var d=b[c].$invalid,e=b[c].$dirty||a.formSubmitted;b[c].$dirty&&(delete a.error,delete a.meldingVerwerkt,delete a.meldingSavedOk,delete a.contactMomentSavedOk,delete a.notitieSavedOk,
delete a.meldingRemovedOk);"akkoordBedrijf"!=c&&"geenAkkoordBedrijf"!=c||!e||(d=!(a.controle.bedrijfsgegevensok||a.controle.bedrijfsgegevensNietJuist));return e&&d};a.owncompany=v;a.company=k;"undefined"===typeof a.melding&&"undefined"!==typeof h&&(0,a.editExistingMelding=!0,a.meldingDetails=!0);a.hideConfirm=function(){return!!a.editExistingMelding};a.hidePlaatsVermelding=function(){return!!a.editExistingMelding};a.isUnchanged=function(b){return angular.equals(b,a.mastermelding)};a.isUnchangedAdminNote=
function(){return!a.gebruikerAllowed()||"undefined"===typeof a.masterMeldingNotitiesAdmin&&"undefined"===typeof a.meldingNotitiesAdmin||"undefined"!==typeof a.masterMeldingNotitiesAdmin&&angular.equals(a.masterMeldingNotitiesAdmin,a.meldingNotitiesAdmin)};a.showAanpassenVermelding=function(){return!(1!=a.editExistingMelding||"undefined"!==typeof a.meldingVerwerkt)};a.hideAnnuleren=function(){return!!a.editExistingMelding};a.showTerugDetail=function(){return!!a.editExistingMelding};a.meldingIdSelected=
null;a.setSelected=function(b){a.meldingIdSelected=b};a.buttonUserDisabled=function(){return!1};a.checkMeldingFormInvalid=function(b){return b.voornaam.$invalid||b.naam.$invalid||b.emailadres.$invalid||b.functie.$invalid||a.emailCheckInvalid(b,"emailadres","emailadrescontrole")};cleanMeldingForm=function(){delete d.error;delete a.error;delete a.meldingSavedOk;delete a.meldingRemovedOk;a.formmeldinggegevens&&a.formmeldinggegevens.$setPristine();a.formbedrijfsgegevens&&a.formbedrijfsgegevens.$setPristine();
a.formmeldingnotes&&a.formmeldingnotes.$setPristine();a.formmeldingnotesadmin&&a.formmeldingnotesadmin.$setPristine()};a.newMelding=function(){cleanMeldingForm();delete a.meldingIdSelected;a.meldingDetails=!0;a.controle={bedrijfsgegevensok:a.controle.bedrijfsgegevensok,vorderingbedragok:!1,akkoord:!0,bedrijfsgegevensNietJuist:a.controle.bedrijfsgegevensNietJuist};a.melding={meldingId:a.newMeldingId,gebruikerAangemaaktId:JSON.parse(c.sessionStorage.user).userId,bedrijfIdGerapporteerd:a.owncompany.bedrijfId,
bedrijfId:a.company.bedrijfId,bedrijfsgegevensNietJuist:!1,doorBedrijfWeergeven:!0,bedragWeergeven:!0,debiteurSommatieOntvangen:!1,debiteurBetwistNiet:!1};a.newMeldingId++;a.mastermelding=angular.copy(a.melding);a.mandatoryChecks()};a.changeMelding=function(b){cleanMeldingForm();a.meldingIdSelected=b;a.meldingDetails=!0;melding=$.grep(a.meldingen,function(a){return a.meldingId==b});a.mastermelding=angular.copy(a.melding);a.controle={bedrijfsgegevensok:a.controle.bedrijfsgegevensok,vorderingbedragok:!1,
akkoord:!0,bedrijfsgegevensNietJuist:a.controle.bedrijfsgegevensNietJuist};var d=null;melding[0].datumFactuur&&(d=melding[0].datumFactuur?melding[0].datumFactuur.replace(/-/g,""):null);a.melding={meldingId:melding[0].meldingId,gebruikerAangemaaktId:melding[0].gebruikerAangemaaktId,gebruikerLaatsteMutatieId:JSON.parse(c.sessionStorage.user).userId,bedrijfIdGerapporteerd:melding[0].bedrijfIdGerapporteerd,bedrijfId:melding[0].bedrijfId,bedrijfsgegevensNietJuist:melding[0].bedrijfsgegevensNietJuist,doorBedrijfWeergeven:melding[0].doorBedrijfWeergeven,
bedragWeergeven:melding[0].bedragWeergeven,referentie:melding[0].referentie,datumFactuur:d,bedrag:melding[0].bedrag,debiteurSommatieOntvangen:melding[0].debiteurSommatieOntvangen,debiteurBetwistNiet:melding[0].debiteurBetwistNiet};a.mandatoryChecks()};a.deleteMelding=function(c){b.open({templateUrl:"removenotification.html",controller:A,size:"lg"}).result.then(function(b){b.remove&&(cleanMeldingForm(),a.meldingIdSelected=c,removeNotification(c,k.bedrijfId))},function(){0})};a.getAfdeling=function(a){return"undefined"==
typeof a||null==a||""==a?"Vermeldingen":a};removeNotification=function(b,c){a.removeMeldingId=b;a.meldingIdSelected=null;delete a.meldingDetails;a.deleteMeldingCallback()};a.cancelMeldingDetails=function(){cleanMeldingForm();a.meldingIdSelected=null;delete a.meldingDetails;delete a.melding;delete a.duplicateFactuurnummer;a.controle.vermeldingenJuist=!1};a.saveMeldingCallback=function(){a.meldingSavedOk=!0;a.filterResult();a.newMelding()};a.updateMeldingCallback=function(){a.meldingVerwerkt=!0;a.formmeldingnotes.$setPristine();
a.formmeldinggegevens.$setPristine();a.formbedrijfsgegevens.$setPristine()};a.deleteMeldingCallback=function(){a.meldingRemovedOk=!0;a.filterResult();a.meldingIdSelected=null;delete a.meldingDetails;delete a.melding};validateNotificationList=function(){var b=!0;if(a.melding&&"undefined"!==typeof a.melding.referentie&&null!==a.melding.referentie)for(var c in a.meldingen)if(a.meldingen[c].meldingId!=a.melding.meldingId&&a.meldingen[c].referentie.toLowerCase().replace(/[^a-zA-Z 0-9]+/g,"")==a.melding.referentie.toLowerCase().replace(/[^a-zA-Z 0-9]+/g,
"")){b=!1;break}return b};a.saveMeldingPassTwo=function(b){cleanMeldingForm();validateNotificationList()?(a.meldingToValidate={meldingId:!isNaN(parseFloat(a.melding.meldingId))&&isFinite(a.melding.meldingId)?null:a.melding.meldingId,gebruikerAangemaaktId:a.melding.gebruikerAangemaaktId,gebruikerLaatsteMutatieId:JSON.parse(c.sessionStorage.user).userId,bedrijfIdGerapporteerd:a.melding.bedrijfIdGerapporteerd,bedrijfId:a.melding.bedrijfId,bedrijfsgegevensNietJuist:a.melding.bedrijfsgegevensNietJuist,
doorBedrijfWeergeven:a.melding.doorBedrijfWeergeven,bedragWeergeven:a.melding.bedragWeergeven,referentie:a.melding.referentie,datumFactuur:convertDate(a.melding.datumFactuur),bedrag:a.melding.bedrag,debiteurSommatieOntvangen:a.melding.debiteurSommatieOntvangen,debiteurBetwistNiet:a.melding.debiteurBetwistNiet},r.validateNotification(a.meldingToValidate,function(c){"undefined"!==typeof c.errorCode?118==c.errorCode?a.duplicateFactuurnummer=!0:a.error=c.errorCode+" "+c.errorMsg:(a.preregister(a.saveMeldingCallback),
b())})):a.duplicateFactuurnummer=!0};a.updateMelding=function(){a.formSubmitted=!0;a.formmeldinggegevens.$invalid||a.formbedrijfsgegevens.$invalid||a.isUnchanged(a.melding)&&a.isUnchangedAdminNote()||a.buttonMeldingDisabled()||(delete a.formSubmitted,a.isUnchanged(a.melding)||(cleanMeldingForm(),a.register(a.updateMeldingCallback)),a.gebruikerAllowed&&!a.isUnchangedAdminNote()&&r.addAdminNotitieNotification({meldingId:a.melding.meldingId,notitie:a.meldingNotitiesAdmin},function(b){"undefined"!==typeof b.errorCode?
a.error=b.errorCode+" "+b.errorMsg:(a.notitieSavedOk=!0,a.formmeldingnotesadmin.$setPristine())}))};a.updateNote=function(){a.formSubmitted=!0;a.isUnchanged(a.melding)&&a.isUnchangedAdminNote()||a.buttonMeldingDisabled()||(delete a.formSubmitted,delete a.error,a.isUnchanged(a.melding)||(cleanMeldingForm(),a.register(a.updateMeldingCallback)),a.gebruikerAllowed&&!a.isUnchangedAdminNote()&&r.addAdminNotitieNotification({meldingId:a.melding.meldingId,notitie:a.meldingNotitiesAdmin},function(b){"undefined"!==
typeof b.errorCode?a.error=b.errorCode+" "+b.errorMsg:(a.notitieSavedOk=!0,a.formmeldingnotesadmin.$setPristine())}))};a.saveMelding=function(){a.formSubmitted=!0;a.formmeldinggegevens.$invalid||a.formbedrijfsgegevens.$invalid||!a.controle.bedrijfsgegevensok&&!a.controle.bedrijfsgegevensNietJuist||a.isUnchanged(a.melding)||a.buttonMeldingDisabled()||(delete a.formSubmitted,a.saveMeldingPassTwo(function(){}))};a.saveMeldingAndSend=function(){a.formSubmitted=!0;a.formmeldinggegevens.$invalid||a.formbedrijfsgegevens.$invalid||
!a.controle.bedrijfsgegevensok&&!a.controle.bedrijfsgegevensNietJuist||a.isUnchanged(a.melding)||a.buttonMeldingDisabled()||(delete a.formSubmitted,a.saveMeldingPassTwo(a.cancelMeldingDetails))};a.sendMeldingen=function(){a.formSubmitted=!0;if(a.controle.vermeldingenJuist){for(var b in a.meldingen)a.meldingen[b].bedrijfsgegevensNietJuist=a.controle.bedrijfsgegevensNietJuist;w.setNotifications(a.meldingen);l.path("/notificationssend/"+a.owncompany.bedrijfId+"/"+a.company.bedrijfId+"/"+searchurl);l.url(l.path())}};
a.$on("$destroy",function(){0!==l.path().lastIndexOf("/notificationssend",0)&&w.setNotifications([])});a.filterResult=function(){return a.fetchResult(function(){a.currentPage=1})};a.pageChanged=function(){1==a.meldingDetails&&a.cancelMeldingDetails();cleanMeldingForm();0;a.fetchResult(function(){delete d.range})};a.fetchResult=function(b){if(1==a.meldingSavedOk)if("undefined"!=typeof a.meldingIdSelected&&null!=a.meldingIdSelected)for(var c in a.meldingen){if(a.meldingen[c].meldingId==a.meldingIdSelected){a.meldingen[c]=
a.melding;break}}else"undefined"!=typeof a.meldingen?"[object Array]"===Object.prototype.toString.call(a.meldingen)?a.meldingen.push(a.melding):a.meldingen=[a.melding]:a.meldingen=[a.melding],a.totalItems?a.totalItems++:a.totalItems=1;else 1==a.meldingRemovedOk&&(a.meldingen=a.meldingen.filter(function(b){return b.meldingId!==a.removeMeldingId}),a.totalItems--,0==a.totalItems&&(searchurl=orgsearchurl))};a.contactMomentPageChanged=function(b){a.contactMomentCurrentPage=b;a.contactMomentFilterCriteria.pageNumber=
a.contactMomentCurrentPage;a.fetchContactMomenten(function(){delete d.contactMomentRange})};a.fetchContactMomenten=function(b){d.range="items\x3d"+((a.contactMomentFilterCriteria.pageNumber-1)*a.contactMomentItemsPage+1)+"-"+((a.contactMomentFilterCriteria.pageNumber-1)*a.contactMomentItemsPage+a.contactMomentItemsPage);r.getContactMomentsOfNotification(a.contactMomentFilterCriteria,function(c,d){void 0!=c&&0<c.length?(a.contactMomenten=c,a.contactMomentTotalItems=paging_totalItems(d("Content-Range"))):
(a.contactMomenten=[],a.contactMomentTotalItems=0);b()},function(b){a.contactMomenten=[];a.contactMomentTotalItems=0;a.error=b})};a.datePattern=/^[0-9]{2}-[0-9]{2}-[0-9]{4}$/i;a.pickDateFactuur=function(b){a.melding.datumFactuur=f("date")(b,a.dateFormat)};a.dateChange=function(b){var c=new Date(b.getTime());c.setHours(2);c.setMinutes(0);a.min=c;b=new Date(b.getTime());b.setHours(4);b.setMinutes(0);a.max=b};a.initTimePicker=function(b){var c=new Date(b.getTime());c.setHours(0);c.setMinutes(0);a.min=
c;b=new Date(b.getTime());b.setHours(11);b.setMinutes(59);a.max=b};a.pickDateContact=function(b){a.contactMoment.datumContact=f("date")(b,a.dateFormat)};a.pickTimeContact=function(b){a.contactMoment.timeContact=f("date")(b,a.timeFormat)};a.pickDateContactTerug=function(b){a.contactMoment.datumContactTerug=f("date")(b,a.dateFormat)};convertDate=function(a){return a&&8==a.length?a.substring(0,2)+"-"+a.substring(2,4)+"-"+a.substring(4,8):a?a:null};convertDatetime=function(a,b){(a=convertDate(a))&&b&&
4==b.length&&(a+=" "+b.substring(0,2)+":"+b.substring(2,4)+":00");return a?a:null};a.toggleContactwijze=function(b){"Anders"!=b&&(a.contactMoment.contactGegevens=null)};a.contactMomentComplete=function(){return"undefined"!=typeof a.contactMoment&&null!=a.contactMoment.datumContact&&null!=a.contactMoment.timeContact&&null!=a.contactMoment.contactwijze&&null!=a.contactMoment.beantwoord&&null!=a.contactMoment.notitie?!0:!1};a.removeContactMoment=function(b){r.removeContactMomentNotification({contactMomentId:b,
bedrijfId:a.melding.bedrijfIdGerapporteerd},function(b){"undefined"!==typeof b.errorCode?a.error=b.errorCode+" "+b.errorMsg:(a.meldingVerwerkt=!0,a.fetchContactMomenten(null))})};a.saveContactMoment=function(){a.contactMomentComplete()&&(a.contactMomentTransfer={datumContact:convertDatetime(a.contactMoment.datumContact,a.contactMoment.timeContact),datumContactTerug:convertDate(a.contactMoment.dateContactTerug),contactWijze:a.contactMoment.contactwijze,contactGegevens:a.contactMoment.contactGegevens,
beantwoord:a.contactMoment.beantwoord,notitie:a.contactMoment.notitie,notitieIntern:a.contactMoment.notitieIntern,alert:a.contactMoment.alert,meldingId:a.melding.meldingId,bedrijfIdGerapporteerd:a.melding.bedrijfIdGerapporteerd,notitieType:"CMO"},r.addContactMomentNotification(a.contactMomentTransfer,function(b){"undefined"!==typeof b.errorCode?a.error=b.errorCode+" "+b.errorMsg:(a.contactMoment=b.contactMoment,a.contactMoment={datumContact:f("date")(x,a.dateFormat),timeContact:f("date")(x,a.timeFormat)},
a.formcontactmoment.$setPristine(),a.contactMomentSavedOk=!0,a.fetchContactMomenten(function(){delete d.contactMomentRange}))}))};a.preregister=function(b){cleanMeldingForm();0;a.melding.datumFactuur=convertDate(a.melding.datumFactuur);b()};a.register=function(b){cleanMeldingForm();0;a.melding.datumFactuur=convertDate(a.melding.datumFactuur);r.notifyCompany(a.melding,function(c){"undefined"!==typeof c.errorCode?a.error=c.errorCode+" "+c.errorMsg:(a.controle.bedrijfsgegevensNietJuist=c.bedrijfsgegevensNietJuist,
a.bedrijfgegevensJuistOnLoad=!c.bedrijfsgegevensNietJuist,c.bedrag&&(c.bedrag=Number(c.bedrag)),c.datumFactuur&&(c.datumFactuur=c.datumFactuur.replace(/-/g,"")),c.debiteurSommatieOntvangen=!0,c.debiteurBetwistNiet=!0,a.melding=c,a.melding.datumFactuur=convertDate(a.melding.datumFactuur),b())})};a.open=function(b,c){b.preventDefault();b.stopPropagation();1==c?a.opened_1=!0:2==c&&(a.opened_2=!0)};a.dateOptions={formatYear:"yyyy",startingDay:1};a.clearDateInvoice=function(){a.melding.datumFactuur=null};
a.back=function(){url=gotoDurl(searchurl);null!=url&&(l.path(url),l.url(l.path()))};addMandatoryText=function(b,c){b={type:b,text:c};"undefined"!=typeof a.mandatoryText?"[object Array]"===Object.prototype.toString.call(a.mandatoryText)?a.mandatoryText.push(b):a.mandatoryText=[b]:a.mandatoryText=[b]};a.maakbedragop=function(a){return a?"\x26euro; "+a:"-"};a.mandatoryChecks=function(){a.mandatoryText=[];var b=null;if("undefined"==typeof a.melding.debiteurSommatieOntvangen||0==a.melding.debiteurSommatieOntvangen)b=
"U dient aan te geven dat de debiteur reeds op de hoogte is van de vordering.";"undefined"==typeof a.melding.debiteurBetwistNiet||0==a.melding.debiteurBetwistNiet?null==b?addMandatoryText("warning","U dient aan te geven dat de debiteur de vordering niet betwist."):addMandatoryText("warning","U dient aan te geven dat de debiteur reeds op de hoogte is van de vordering en dat deze niet betwist wordt."):null!=b&&addMandatoryText("warning",b);0==a.controle.akkoord&&addMandatoryText("warning","U moet akkoord gaan met onze algemene voorwaarden.");
0!=a.mandatoryText.length||a.isBedragInvalid(a.melding.bedrag)||a.isDatumFactuurInvalid(a.melding.datumFactuur)||a.formmeldinggegevens.$invalid||a.formbedrijfsgegevens.$invalid||a.buttonMeldingDisabled()||a.wijziging||addMandatoryText("success"," U kunt kiezen om deze vermelding direct te verzenden of hier nog een vermelding aan toe te voegen.")};a.buttonMeldingDisabled=function(){return"undefined"!=typeof a.melding&&(a.isBedragInvalid(a.melding.bedrag)||a.isDatumFactuurInvalid(a.melding.datumFactuur)||
0==a.bedragAanwezig&&("undefined"==typeof a.controle.vorderingbedragok||0==a.controle.vorderingbedragok))?!0:!1};a.bedragAanwezig=function(a){return!("undefined"==typeof a||null==a||""==a)};a.isReferentieInvalid=function(b){b=!1;var c="Indien u geen factuurnummer hanteert geeft u een dossiernummer of ander kenmerk op.";a.duplicateFactuurnummer&&(c="Het ingevoerde factuurnummer is al gebruikt voor een bestaande of ingevoerde vermelding. Voer een ander factuurnummer in.",b=!0);z.text(c);return b};a.isBedragInvalid=
function(b){a.bedragAanwezig(b)&&(a.controle.vorderingbedragok=!1);var c="Voer het exacte bedrag in.",d;!a.wijziging&&"undefined"!=typeof b&&null!=b&&""!=b&&a.NUMBERINTERNAL_REGEXP.test(b)?100>b?(c="Het openstaande bedrag moet minimaal 100,- Euro bedragen.",d=!0):d=!1:d=!1;a.wijziging&&"undefined"!=typeof b&&("undefined"!==typeof a.mastermelding.bedrag&&null!=a.mastermelding.bedrag?"undefined"!=typeof b&&null!=b?a.mastermelding.bedrag<b&&(c="Het bedrag mag alleen worden verlaagd.",d=!0):b=a.mastermelding.bedrag:
(c="Bedrag kan niet worden gewijzigd",d=!0));1E8<b&&(c="Het ingevoerde bedrag mag maximaal 100.000.000,- zijn.",d=!0);p.text(c);return d};a.isDatumFactuurInvalid=function(a){var b="Vul de vervaldatum van de factuur in (dd-mm-jjjj).",c=!1;if("undefined"!=typeof a||null!=a){var d=new Date,e=new Date;"string"==typeof a?8==a.length?d=new Date(a.substring(4,8),a.substring(2,4)-1,a.substring(0,2)):10==a.length?d=new Date(a.substring(6,10),a.substring(3,5)-1,a.substring(0,2)):c=!0:d=a;c||null===e||null===
d||(0>dates.compare(e,d)?(b="Factuurdatum mag niet in de toekomst liggen.",c=!0):(a=Math.abs(e.getTime()-d.getTime()),30>Math.ceil(a/864E5)?(b="Vervaldatum van factuur moet minimaal 30 dagen zijn.",c=!0):c=!1))}y.text(b);return c};a.gebruikerAllowed=function(){if("undefined"!==typeof c.sessionStorage.user){var a=JSON.parse(c.sessionStorage.user).roles;return hasRole(a,"admin_sbdr")||hasRole(a,"admin_sbdr_hoofd")}return!1};a.meldingVerwijderd=function(){return"undefined"!==typeof a.melding&&null!=
a.melding?!("DEL"!=a.melding.meldingstatusCode&&"AFW"!=a.melding.meldingstatusCode):!1};a.redenVerwijderen=function(){return"undefined"!==typeof a.melding&&null!=a.melding?"undefined"!==typeof a.melding.redenVerwijderenOmschrijving&&null!=a.melding.redenVerwijderenOmschrijving?"AND"==a.melding.redenVerwijderenCode?"Onbekend":a.melding.redenVerwijderenOmschrijving:"Onbekend":"Onbekend"};a.changeAdresCheck=function(b){1==a.controle.bedrijfsgegevensok&&1==a.controle.bedrijfsgegevensNietJuist&&("selBedrijfAdresOk"==
b?a.controle.bedrijfsgegevensNietJuist=!1:a.controle.bedrijfsgegevensok=!1);a.mandatoryChecks()};if("undefined"===typeof a.init){a.readonly=!(("undefined"===typeof e||"true"!=e)&&1!=e);a.wijziging=!("undefined"===typeof h||0!=a.readonly);a.totalItems=0;a.currentPage=1;a.itemsPage=20;a.maxSize=5;a.newMeldingId=0;a.formSubmitted=!1;cleanMeldingForm();delete a.meldingen;"undefined"===typeof h?(a.controle={bedrijfsgegevensok:!1,vorderingbedragok:!1,akkoord:!0,bedrijfsgegevensNietJuist:!1},a.meldingen=
w.getNotifications(),"undefined"!==typeof a.meldingen&&0<a.meldingen.length&&(a.controle.vermeldingenJuist=!1),a.totalItems=a.meldingen.length,0==a.totalItems?a.newMelding():a.melding={gebruikerAangemaaktId:JSON.parse(c.sessionStorage.user).userId,bedrijfIdGerapporteerd:a.owncompany.bedrijfId,bedrijfId:a.company.bedrijfId,doorBedrijfWeergeven:!0,bedragWeergeven:!0,bedrijfsgegevensNietJuist:!1,debiteurSommatieOntvangen:!1,debiteurBetwistNiet:!1}):(a.controle={bedrijfsgegevensok:!0,vorderingbedragok:!1,
akkoord:!0},a.controle.bedrijfsgegevensok=!0,v=r.companyNotificationData({meldingId:h,bedrijfId:g}),n.all({notificationdata:v.$promise}).then(function(b){if("undefined"!==typeof b.notificationdata.errorCode)a.error=b.errorCode+" "+b.errorMsg;else{(a.controle.bedrijfsgegevensNietJuist=b.notificationdata.bedrijfsgegevensNietJuist)?bedrijfgegevensJuistOnLoad=!1:a.bedrijfgegevensJuistOnLoad=!0;b.notificationdata.bedrag&&(b.notificationdata.bedrag=Number(b.notificationdata.bedrag));"undefined"!=typeof a.readonly&&
0!=a.readonly||a.editExistingMelding||!b.notificationdata.datumFactuur||(b.notificationdata.datumFactuur=b.notificationdata.datumFactuur.replace(/-/g,""));b.notificationdata.debiteurSommatieOntvangen=!0;b.notificationdata.debiteurBetwistNiet=!0;a.melding=b.notificationdata;a.mastermelding=angular.copy(a.melding);a.mandatoryChecks();if("undefined"!==typeof a.melding&&"undefined"!==typeof a.melding.gebruikerAangemaaktId){var d=b="null",e="null",k="null",f="null",x="null";"undefined"!==typeof a.melding.gebruikerLaatsteMutatieId&&
(b=a.melding.gebruikerLaatsteMutatieId);"undefined"!==typeof a.melding.gebruikerVerwijderdId&&(d=a.melding.gebruikerVerwijderdId);"undefined"!==typeof a.melding.gebruikerGeaccordeerdId&&(e=a.melding.gebruikerGeaccordeerdId);"undefined"!==typeof a.melding.datumGeaccordeerd&&(x=a.melding.datumGeaccordeerd);"undefined"!==typeof a.melding.datumVerwijderd&&"AFW"==a.melding.meldingstatusCode&&(k=a.melding.datumVerwijderd);"undefined"!==typeof a.melding.datumVerwijderd&&"DEL"==a.melding.meldingstatusCode&&
(f=a.melding.datumVerwijderd);a.gebruikerIds=[a.melding.gebruikerAangemaaktId.toString(),e.toString(),d.toString(),b.toString()];b=t.gebruikerdata({gebruikerIds:a.gebruikerIds});n.all({gebruikerdata:b.$promise}).then(function(b){"undefined"!==typeof b.gebruikerdata.errorCode?a.error=b.errorCode+" "+b.errorMsg:(a.gebruiker=b.gebruikerdata,a.acties=[{actie:"Ingediend",datum:a.melding.datumAangemaakt,gebruiker:a.gebruiker[0].fullName,functie:a.gebruiker[0].functie,afdeling:a.gebruiker[0].afdeling,email:a.gebruiker[0].emailAdres}],
i=1,"null"!=x&&("null"!=e?null!=a.gebruiker[i]&&(a.acties.push({actie:"Geaccordeerd",datum:a.melding.datumGeaccordeerd,gebruiker:a.gebruiker[i].fullName,functie:a.gebruiker[i].functie,afdeling:a.gebruiker[i].afdeling,email:a.gebruiker[i].emailAdres}),i++):a.acties.push({actie:"Geaccordeerd",datum:a.melding.datumGeaccordeerd,gebruiker:"-",functie:"-",afdeling:"-",email:"-"})),"null"!=f&&("null"!=d?null!=a.gebruiker[i]&&(a.acties.push({actie:"Verwijderd",datum:a.melding.datumVerwijderd,gebruiker:a.gebruiker[i].fullName,
functie:a.gebruiker[i].functie,afdeling:a.gebruiker[i].afdeling,email:a.gebruiker[i].emailAdres}),i++):a.acties.push({actie:"Verwijderd",datum:a.melding.datumVerwijderd,gebruiker:"CRZB",email:"-"})),"null"!=k&&("null"!=d?null!=a.gebruiker[i]&&(a.acties.push({actie:"Afgewezen",datum:a.melding.datumVerwijderd,gebruiker:a.gebruiker[i].fullName,functie:a.gebruiker[i].functie,afdeling:a.gebruiker[i].afdeling,email:a.gebruiker[i].emailAdres}),i++):a.acties.push({actie:"Afgewezen",datum:a.melding.datumVerwijderd,
gebruiker:"CRZB",email:"-"})))}).catch(function(b){0;a.error="Er is een fout opgetreden."})}a.contactwijzen=[{id:"Telefoon",description:"Telefoon"+("undefined"!==a.melding.telefoonNummerDebiteur&&null!=a.melding.telefoonNummerDebiteur?" | "+a.melding.telefoonNummerDebiteur:"")},{id:"Email",description:"Email"+("undefined"!==a.melding.emailAdresDebiteur&&null!=a.melding.emailAdresDebiteur?" | "+a.melding.emailAdresDebiteur:"")},{id:"Brief",description:"Brief | "+a.melding.adres},{id:"Aangetekend",
description:"Aangetekend | "+a.melding.adres},{id:"Persoonlijk",description:"Persoonlijk"},{id:"Anders",description:"Anders"}];a.contactMomentFilterCriteria={userId:JSON.parse(c.sessionStorage.user).userId,meldingId:a.melding.meldingId,pageNumber:1,sortDir:"",sortedBy:"",filterValue:""};a.contactMomentCurrentPage=1;a.contactMomentItemsPage=10;a.contactMomentMaxSize=5;a.contactMomentTotalItems=0;a.gebruikerAllowed()&&r.getAdminNoteOfNotification({meldingId:a.melding.meldingId},function(b){"undefined"!==
typeof b&&("undefined"!==typeof b.errorCode?a.error=b.errorMsg:null!=b&&(a.meldingNotitiesAdmin=b.notitie,a.masterMeldingNotitiesAdmin=a.meldingNotitiesAdmin))});a.fetchContactMomenten(function(){})}}).catch(function(b){0;a.error="Er is een fout opgetreden."}));a.formSubmitted=!1;a.beantwoordTypes=[{id:"Ja",description:"Ja"},{id:"Nee",description:"Nee"},{id:"Terugbellen",description:"Terugbellen"},{id:"BuitenGebruik",description:"Buiten gebruik"},{id:"Nvt",description:"n.v.t."},{id:"Bezwaar",description:"Bezwaar"},
{id:"Anders",description:"Anders"}];a.EMAIL_REGEXP=/^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$/;a.PHONE_REGEXP=/(^\+[0-9]{2}|^\+[0-9]{2}\(0\)|^\(\+[0-9]{2}\)\(0\)|^00[0-9]{2}|^0)([0-9]{9}$|[0-9\-\s]{10}$)/;var x=new Date;a.initTimePicker(x);a.contactMoment={datumContact:f("date")(x,a.dateFormat),timeContact:f("date")(x,a.timeFormat)};a.timeContact=x;a.meldingVerwerkt=!1;a.init=!0}a.filterResult();a.createDocumentRequested=function(a){return{action:"letter_notification",bedrijfId:0,meldingId:a,
referentie:""}};a.annulerenall=function(){0<a.totalItems?b.open({templateUrl:"removeallnotifications.html",controller:D,size:"lg"}).result.then(function(b){b.remove&&a.back()},function(){0}):a.back()};var D=["$scope","$modalInstance",function(a,b){a.remove=!1;a.removeAllNotificationsOk=function(b){a.remove=!0;a.closeRemoveAllNotificationsModal()};a.closeRemoveAllNotificationsModal=function(){b.close({remove:a.remove})}}];a.annuleren=function(c){a.meldingVerwerkt||a.meldingSavedOk||!(a.formmeldinggegevens.$dirty||
a.formmeldingnotes.$dirty||a.formmeldingnotesadmin.$dirty)?c?a.back():a.cancelMeldingDetails():b.open({templateUrl:"removechanges.html",controller:B,size:"lg"}).result.then(function(b){b.remove&&(c?a.back():a.cancelMeldingDetails())},function(){0})};var B=["$scope","$modalInstance",function(a,b){a.remove=!1;a.removeChangesOk=function(b){a.remove=!0;a.closeRemoveChangesModal()};a.closeRemoveChangesModal=function(){b.close({remove:a.remove})}}],A=["$scope","$modalInstance",function(a,b){a.remove=!1;
a.removeNotificationOk=function(b){a.remove=!0;a.closeRemoveNotificationModal()};a.closeRemoveNotificationModal=function(){b.close({remove:a.remove})}}]}]);
appcontrollers.controller("ObjectionsAdminTabController",["$window","$scope","$rootScope","$location","$filter","$timeout","maxFieldLengths","ngTableParams","DashboardNumberTags","DashboardService","AccountService","CompanyService",function(c,b,a,d,e,g,h,l,f,n,q,v){b.maxFieldLengths=h;b.title="Bezwaren Tab";q.getCompanyAccountData({bedrijfId:JSON.parse(c.sessionStorage.user).bedrijfId},function(a){b.account=a});b.totalItems=0;b.currentPage=1;b.itemsPage=20;b.maxSize=5;b.thisUser=JSON.parse(c.sessionStorage.user);
"undefined"==typeof b.filterCriteria&&(b.filterCriteria={bedrijfId:JSON.parse(c.sessionStorage.user).bedrijfId,pageNumber:1,sortDir:"",sortedBy:"",filterValue:""});b.$watch("filterCriteria.filterValue",function(a){"undefined"!=typeof searchCallbackTimeout&&g.cancel(searchCallbackTimeout);searchCallbackTimeout=g(function(){a?2<a.length&&(b.currentPage=1,b.pageChanged(),b.oldSearch=a):isSearchChanged(a)&&(b.currentPage=1,b.pageChanged(),b.oldSearch=a)},1E3)},!0);b.fetchResult=function(c){a.range="items\x3d"+
((b.filterCriteria.pageNumber-1)*b.itemsPage+1)+"-"+((b.filterCriteria.pageNumber-1)*b.itemsPage+b.itemsPage);n.objectionsadmin(b.filterCriteria,function(a,d){"undefined"!=typeof a&&0<a.length?(b.objectionsAdminCollection=a,b.totalItems=paging_totalItems(d("Content-Range"))):(b.objectionsAdminCollection=null,b.totalItems=0);f.setNrOfObjectionsAdmin(b.totalItems);c()},function(){b.objectionsAdminCollection=[];b.totalItems=0;f.setNrOfObjectionsAdmin(b.totalItems)})};b.filterResult=function(){return b.fetchResult(function(){b.filterCriteria.pageNumber=
1;b.currentPage=1;delete a.range})};b.hasItems=function(){return 0<f.getNrOfObjectionsAdmin()};b.ignorealert=function(a,b,c){"MON"==a?updateMonitoring(c):deleteAlert(b)};b.pageChanged=function(){b.filterCriteria.pageNumber=b.currentPage;b.fetchResult(function(){delete a.range})};b.setPage=function(a){b.currentPage=a};b.viewAdminDetails=function(a){supportObjectionDetail(a)};b.viewdetails=function(a,b,c,d,e,f,l){"SUP"==a&&(deleteAlert(b),supportObjectionDetail(l))};deleteAlert=function(a){v.deleteAlert(a,
function(a){"undefined"!==typeof a.errorCode?b.error=a.errorCode+" "+a.errorMsg:(b.currentPage=1,b.pageChanged())})};isSearchChanged=function(a){return"undefined"==typeof b.oldSearch?(b.oldSearch=a,!1):b.oldSearch!=a};supportObjectionDetail=function(a){delete b.error;d.path("/support/detail/"+a+"/$dashboard$objectionsadmintab");d.url(d.path())};b.lowercaseFirstLetter=function(a){return a.charAt(0).toLowerCase()+a.slice(1)};b.filterResult()}]);
appcontrollers.controller("OverviewTabController",["$scope","$rootScope","$filter","ngTableParams","DashboardService",function(c,b,a,d,e){var g="#1f77b4 #064877 #65a4d1 #085e9a #3f8abf #043a60 #266ea1 #012844 #095891 #6aa2c9".split(" ");d3.scale.myColors=function(){return d3.scale.ordinal().range(g)};c.nrOfItems2=7;c.piechartoptions={chart:{type:"pieChart",height:350,x:function(a){return a.key},y:function(a){return a.y},labelType:"percent"}};c.piechartexampleData=[{key:"One",y:5},{key:"Two",y:2},
{key:"Three",y:9},{key:"Four",y:7},{key:"Five",y:4},{key:"Six",y:3},{key:"Seven",y:9}];nv.addGraph(function(){var a=nv.models.pieChart().x(function(a){return a.key}).y(function(a){return a.y}).color(d3.scale.myColors().range()).width(350).height(350);d3.select("#test1").datum(c.piechartexampleData).transition().duration(1200).attr("width",350).attr("height",350).call(a);a.dispatch.on("stateChange",function(a){nv.log("New State:",JSON.stringify(a))});return a});nv.addGraph(function(){var a=nv.models.pieChart().x(function(a){return a.key}).y(function(a){return a.y}).color(d3.scale.myColors().range()).width(350).height(350);
d3.select("#test3").datum(c.piechartexampleData).transition().duration(1200).attr("width",350).attr("height",350).call(a);a.dispatch.on("stateChange",function(a){nv.log("New State:",JSON.stringify(a))});return a});nv.addGraph(function(){var a=nv.models.pieChart().x(function(a){return a.key}).color(d3.scale.myColors().range()).width(350).height(350).donut(!0);a.pie.startAngle(function(a){return a.startAngle/2-Math.PI/2}).endAngle(function(a){return a.endAngle/2-Math.PI/2});d3.select("#test2").datum(c.piechartexampleData).transition().duration(1200).attr("width",
350).attr("height",350).call(a);return a});c.xFunction=function(){return function(a){return a.key}};c.yFunction=function(){return function(a){return a.y}};c.descriptionFunction=function(){return function(a){return a.key}};var h=[{shipmentId:100,htmlUrl:"/edit/100",nameCreator:"L.T. Late",nameLastEditor:"P.W. Herman",exportOrganisation:"WijVerzendenAlles B.V.",importOrganisation:"Qatar Juwels",description:"10k watches",dateShipment:"30-06-2014",dateCreated:"10-06-2014",dateLastChange:"15-06-2014",
documents:[{documentId:123,htmlUrl:"/document/123",documentType:"CVO",documentStatus:"Application",dateCreated:"10-06-2014",personLastChange:"M. op den Oever",indEditable:!0},{documentId:124,htmlUrl:"/document/124",documentType:"Attachment",documentStatus:"Uploaded",dateCreated:"14-06-2014",personLastChange:"M. op den Oever",indEditable:!0}]},{shipmentId:101,htmlUrl:"/edit/101",nameCreator:"O. Lovely",nameLastEditor:"P.W. Herman",exportOrganisation:"Tulip B.V.",importOrganisation:"Flowers from Russia",
description:"10k watches",dateShipment:"30-06-2014",dateCreated:"10-06-2014",dateLastChange:"15-06-2014",documents:[{documentId:125,htmlUrl:"/document/125",documentType:"CVO",documentStatus:"Application",dateCreated:"10-06-2014",personLastChange:"M. op den Oever",indEditable:!0},{documentId:126,htmlUrl:"/document/126",documentType:"Attachment",documentStatus:"Uploaded",dateCreated:"14-06-2014",personLastChange:"M. op den Oever",indEditable:!0}]}];c.tableParams=new d({page:1,count:10},{total:h.length,
getData:function(a,b){a.resolve(h.slice((b.page()-1)*b.count(),b.page()*b.count()))}})}]);
appcontrollers.controller("PortfolioMonitoringTabController",["$window","$modal","$scope","$rootScope","maxFieldLengths","$location","$filter","$timeout","ngTableParams","DashboardNumberTags","DashboardService","CompanyService",function(c,b,a,d,e,g,h,l,f,n,q,v){a.title="Portfolio Monitoring Tab";a.maxFieldLengths=e;a.totalItems=0;a.currentPage=1;a.itemsPage=20;a.maxSize=5;a.setPage=function(b){a.currentPage=b};a.pageChanged=function(){0};a.documentRequested={action:"monitored_companies",bedrijfId:JSON.parse(c.sessionStorage.user).bedrijfId};
isSearchChanged=function(b){return"undefined"==typeof a.oldSearch?(a.oldSearch=b,!1):a.oldSearch!=b};a.$watch("filterCriteria.filterValue",function(b){"undefined"!=typeof searchCallbackTimeout&&l.cancel(searchCallbackTimeout);searchCallbackTimeout=l(function(){b?2<b.length&&(a.currentPage=1,a.pageChanged(),a.oldSearch=b):isSearchChanged(b)&&(a.currentPage=1,a.pageChanged(),a.oldSearch=b)},1E3)},!0);"undefined"==typeof a.filterCriteria&&(a.sortedOrder=!0,a.reverseSort=!0,a.orderByField="aantalMeldingen",
a.filterCriteria={bedrijfId:JSON.parse(c.sessionStorage.user).bedrijfId,pageNumber:1,sortDir:"DESC",sortedBy:"aantalMeldingen",filterValue:""});0;a.nrOfItems=function(){return 7};a.hasItems=function(){return 0<n.getNrOfPortfolio()};a.filterResult=function(){return a.fetchResult(function(){a.filterCriteria.pageNumber=1;a.currentPage=1;delete d.range})};a.fetchResult=function(b){d.range="items\x3d"+((a.filterCriteria.pageNumber-1)*a.itemsPage+1)+"-"+((a.filterCriteria.pageNumber-1)*a.itemsPage+a.itemsPage);
q.portfoliomonitoring(a.filterCriteria,function(c,d){0;"undefined"!=typeof c?(a.companies=c,a.totalItems=paging_totalItems(d("Content-Range"))):(a.companies=null,a.totalItems=0);n.setNrOfPortfolio(a.totalItems);b();a.firstfetch=!0},function(){0;a.companies=[];a.totalItems=0;n.setNrOfPortfolio(a.totalItems);a.firstfetch=!0})};a.setPage=function(b){a.currentPage=b};a.pageChanged=function(){0;a.filterCriteria.pageNumber=a.currentPage;a.fetchResult(function(){delete d.range})};a.gebruikerRegistratiesAllowed=
function(){if("undefined"!==typeof c.sessionStorage.user){var a=JSON.parse(c.sessionStorage.user).roles;return hasRole(a,"registraties_toegestaan")||hasRole(a,"admin_sbdr")||hasRole(a,"admin_sbdr_hoofd")}return!1};a.notifyCompany=function(a){0;d.isShowHelp(d.HELP_VERMELDINGINFO)?g.path("/vermeldingeninfo/"+JSON.parse(c.sessionStorage.user).bedrijfId+"/"+a+"/$dashboard$portfoliomonitoringtab"):g.path("/notifycompany/"+JSON.parse(c.sessionStorage.user).bedrijfId+"/"+a+"/$dashboard$portfoliomonitoringtab")};
a.monitoringDetail=function(a){g.path("/monitoringdetails/"+JSON.parse(c.sessionStorage.user).bedrijfId+"/"+a+"/$dashboard$portfoliomonitoringtab")};removeMonitoring=function(b,c){v.removeMonitoringCompany({monitoringId:b,bedrijfId:c},function(b){"undefined"!==typeof b.errorCode?a.error=b.errorCode+" "+b.errorMsg:(a.currentPage=1,a.pageChanged())})};a.removeFromMonitoring=function(a,c){b.open({templateUrl:"removemonitoring.html",controller:k,size:"lg"}).result.then(function(b){b.remove&&removeMonitoring(a,
c)},function(){0})};a.fetchMonitoring=function(b){a.orderByField=b;a.reverseSort=!a.reverseSort;a.filterCriteria.sortDir="ASC"==a.filterCriteria.sortDir?"DESC":"ASC";a.filterCriteria.sortedBy=a.orderByField;a.filterCriteria.sortderOrder=a.reverseSort;a.currentPage=1;a.pageChanged()};var k=["$scope","$modalInstance",function(a,b){a.remove=!1;a.removeMonitoringOk=function(){a.remove=!0;a.closeRemoveMonitoringModal()};a.closeRemoveMonitoringModal=function(){b.close({remove:a.remove})}}];a.filterResult()}]);
appcontrollers.controller("ProcessesAdminTabController",["$window","$modal","$scope","$rootScope","$location","$filter","$timeout","ngTableParams","DashboardNumberTags","DashboardService","InternalProcessService",function(c,b,a,d,e,g,h,l,f,n,q){a.title="Internal processes Tab";a.totalItems=0;a.currentPage=1;a.itemsPage=20;a.maxSize=5;a.createBatchDocument=function(b){delete a.error;return{action:"letter_batch",batchDocumentId:b}};a.fetchData=function(){a.processes=[];d.range="items\x3d"+((a.currentPage-
1)*a.itemsPage+1)+"-"+((a.currentPage-1)*a.itemsPage+a.itemsPage);q.getInternalProcessRows(function(b,c){null!=b.errorCode?a.error=b.errorCode+" "+b.errorMsg:0<b.length?(a.processes=b,a.totalItems=paging_totalItems(c("Content-Range")),a.noData=!1):(a.totalItems=0,a.noData=!0);f.setNrOfProcesses(a.totalItems)})};var v=["$scope","$modalInstance","briefOrBatch",function(a,b,c){a.continue=!1;a.briefOrBatch=c;a.sendLetter=function(){a.continue=!0;a.closeLetterPrompt()};a.closeLetterPrompt=function(){b.close({continue:a.continue})}}];
a.hasItems=function(){return 0<f.getNrOfProcesses()};a.nrOfItems=function(){return 0};a.pageChanged=function(){delete a.error;a.filterCriteria.pageNumber=a.currentPage;a.fetchData(function(){delete d.range})};a.setPage=function(b){a.currentPage=b};a.fetchData();a.promptSendBatch=function(c){delete a.error;b.open({templateUrl:"processLetter.html",controller:v,size:"lg",resolve:{briefOrBatch:function(){return"batch"}}}).result.then(function(a){a.continue&&processRow(c)})};a.promptSendLetter=function(c){delete a.error;
b.open({templateUrl:"processLetter.html",controller:v,size:"lg",resolve:{briefOrBatch:function(){return"brief"}}}).result.then(function(a){a.continue&&processRow(c)})};processRow=function(b){q.setProcessRowAsSent({processRowId:b,gebruikerId:JSON.parse(c.sessionStorage.user).userId},function(b){null!=b.errorCode?a.error=b.errorCode+" "+b.errorMsg:a.fetchData()})}}]);
appcontrollers.controller("ReportController",["$window","$modal","$route","$routeParams","$scope","$rootScope","$location","$anchorScroll","$filter","$q","reportData","monitorRequestData","ReportDataStorage","CompanyService","DocumentService","cfpLoadingBar",function(c,b,a,d,e,g,h,l,f,n,q,v,k,r,t,w){e.start=function(){w.start()};e.complete=function(){w.complete()};void 0==e.init&&(e.hideMonitorPopup=!0,r.checkIfUserCanPay({userId:JSON.parse(c.sessionStorage.user).userId},function(a){"undefined"!=
typeof a.errorCode?e.error=a.errorCode+" "+a.errorMsg:e.userCanPay=a.val}),searchurl=d.searchurl?d.searchurl:"$dashboard",r.bedrijfHasMonitor({doorBedrijfId:JSON.parse(c.sessionStorage.user).bedrijfId,overBedrijfId:q.bedrijf.bedrijfId},function(a){"undefined"!=typeof a.errorCode?e.error=a.errorCode+" "+a.errorMsg:e.monitoringBijBedrijf=a.val}),e.report&&e.report.meldingen?e.meldingenOverview=e.report.meldingen:delete e.meldingenOverview,e.documentRequested={action:"report",bedrijfId:q.bedrijf.bedrijfId,
meldingId:0,referentie:q.referentieNummer},e.report=q,k.setReportData(e.report),0<e.report.ratingScore?(e.showRating=!0,e.ratingScoreIndicatorMessage=e.report.ratingScoreIndicatorMessage,e.ratingDanger=30>=e.report.ratingScore?"ratingDangerSelected":"ratingDanger",e.ratingWarning=30<e.report.ratingScore&&45>=e.report.ratingScore?"ratingWarningSelected":"ratingWarning",e.ratingGood=45<e.report.ratingScore&&79>=e.report.ratingScore?"ratingGoodSelected":"ratingGood",e.ratingVeryGood=79<e.report.ratingScore&&
100>=e.report.ratingScore?"ratingVeryGoodSelected":"ratingVeryGood"):e.showRating=!1,document.getElementById("rating").innerHTML=e.report.ratingScore,e.init=!0);var p=["$scope","$modalInstance",function(a,b){a.remove=!1;a.monitoring=!1;a.closeReport=!1;a.noMonitoringOk=function(){a.monitoring=!1;a.closeReport=!0;a.closeNoMonitoringModal()};a.closeNoMonitoringModal=function(){b.close({monitoring:a.monitoring,closeReport:a.closeReport})};a.closeAndMonitoringOk=function(){a.monitoring=!0;a.closeReport=
!0;a.closeNoMonitoringModal()}}],y=["$scope","$modalInstance",function(a,b){a.doMonitor=!1;a.createMonitor=function(){a.doMonitor=!0;a.closeMonitorPopup()};a.closeMonitorPopup=function(){b.close({doMonitor:a.doMonitor})}}];e.aantalMeldingen=function(){return e.report.aantalMeldingenActief};e.back=function(){url=gotoDurl(searchurl);null!=url&&(h.path(url),h.url(h.path()))};e.monitoring=function(a){b.open({templateUrl:"monitorPopup.html",controller:y,size:"lg"}).result.then(function(b){b.doMonitor&&
(makeMonitor(),"undefined"!==typeof a&&a&&e.back())})};e.backWithNoMonitoringQuestion=function(){e.showMonitoring()?b.open({templateUrl:"nomonitoring.html",controller:p,size:"lg"}).result.then(function(a){a.monitoring?e.monitoring(a.closeReport):a.closeReport&&e.back()},function(){0}):e.back()};e.bedragOpenstaand=function(){return"undefined"==typeof e.report.bedragOpenstaand||null==e.report.bedragOpenstaand?"-":f("currency")(e.report.bedragOpenstaand)};e.bedragResolved=function(){return"undefined"==
typeof e.report.bedragResolved||null==e.report.bedragResolved?"-":f("currency")(e.report.bedragResolved)};e.getBedragText=function(a){return"undefined"==typeof a||null==a||0==a?"hoger dan  100,-":" "+a.toLocaleString("nl-NL",{style:"currency",currency:"EUR"})};e.getReport=function(a){e.start();t.report({referentie:a},function(a){e.$emit("downloaded",a);e.complete()})};e.hideCompanyInfo=function(a){return!("undefined"!==typeof a&&null!=a)};e.isBedragSuccess=function(){return!("undefined"!=typeof e.report.bedragOpenstaand&&
null!=e.report.bedragOpenstaand)};e.isBedragWarning=function(){return!!("undefined"!=typeof e.report.bedragOpenstaand&&null!=e.report.bedragOpenstaand&&0<e.report.bedragOpenstaand)};e.isStatusDanger=function(){return!("Niet actief"!=e.report.kvkDossierTransfer.actief&&""!=e.report.kvkDossierTransfer.actief&&"Ontbonden"!=e.report.kvkDossierTransfer.actief&&"Opgeheven"!=e.report.kvkDossierTransfer.actief)};e.isStatusSuccess=function(){return"Actief"==e.report.kvkDossierTransfer.actief};e.isStatusWarning=
function(){return"Uitgeschreven"==e.report.kvkDossierTransfer.actief};e.isFaillietSurceanceDanger=function(){return!1};e.isFaillietSurceanceSuccess=function(){return"Nee"==e.report.kvkDossierTransfer.faillietSurseance};e.isFaillietSurceanceWarning=function(){return"Surseance"==e.report.kvkDossierTransfer.faillietSurseance};e.isFaillietSurceanceDanger=function(){return"Ja"==e.report.kvkDossierTransfer.faillietSurseance||""==e.report.kvkDossierTransfer.faillietSurseance};e.isNevenVestiging=function(){return!("undefined"!=
typeof e.report.bedrijfHoofd&&null!=e.report.bedrijfHoofd)};e.meldingmaken=function(){h.path("/createcustomnotification/"+JSON.parse(c.sessionStorage.user).bedrijfId+"/"+q.bedrijf.bedrijfId+"/$report$"+JSON.parse(c.sessionStorage.user).bedrijfId+"$"+q.bedrijf.bedrijfId+"$"+q.referentieNummer+escapeSearchUrl(searchurl));h.url(h.path())};e.notifyCompany=function(){0;g.isShowHelp(g.HELP_VERMELDINGINFO)?h.path("/vermeldingeninfo/"+JSON.parse(c.sessionStorage.user).bedrijfId+"/"+q.bedrijf.bedrijfId+"/$report$"+
JSON.parse(c.sessionStorage.user).bedrijfId+"$"+q.bedrijf.bedrijfId+"$"+q.referentieNummer+escapeSearchUrl(searchurl)):h.path("/notifycompany/"+JSON.parse(c.sessionStorage.user).bedrijfId+"/"+q.bedrijf.bedrijfId+"/$report$"+JSON.parse(c.sessionStorage.user).bedrijfId+"$"+q.bedrijf.bedrijfId+"$"+q.referentieNummer+escapeSearchUrl(searchurl));h.url(h.path())};e.nrOfHistorie=function(a){var b=0;"undefined"!=typeof a&&(b=a.length);return b};e.nrOfMeldingen=function(a){var b=0;"undefined"!=typeof a&&(b=
a.length);return b};e.isOwnCompany=function(){return"undefined"!=typeof q&&null!=q.bedrijfaanvrager&&null!=q.bedrijf?q.bedrijfaanvrager.kvKnummer==q.bedrijf.kvKnummer:!1};e.showMonitoring=function(){return"undefined"!=e.monitorCreated&&null!=e.monitorCreated&&e.monitorCreated||noMonitoringAllowed()?!1:0==e.monitoringBijBedrijf};makeMonitor=function(){delete e.error;delete e.monitorCreated;r.monitoringCompany(v,function(a){"undefined"!=typeof a.errorCode?e.error=a.errorCode+" "+a.errorMsg:e.monitorCreated=
!0})};noMonitoringAllowed=function(){if("undefined"!=typeof c.sessionStorage.user){var a=JSON.parse(c.sessionStorage.user).roles;return hasRole(a,"admin_sbdr")||hasRole(a,"admin_sbdr_hoofd")}return!1};saveShowMonitorPopup=function(){delete e.error;g.saveShowHelpDialog(g.HELP_MONITORINGPURCHASE,e.hideMonitorPopup,function(a){null!=a.error&&(e.error=a.error)})};e.report=k.getReportData();e.getBedragText=function(a){return"undefined"==typeof a||null==a||0==a?"hoger dan  100,-":" "+a.toLocaleString("nl-NL")};
e.getDatum=function(a){return"undefined"!=typeof a&&null!=a?a:"n.v.t."};e.hideCompanyInfo=function(a){return!("undefined"!==typeof a&&null!=a)};e.nrOfHistorie=function(a){var b=0;"undefined"!=typeof a&&(b=a.length);return b};e.nrOfMeldingen=function(a){var b=0;"undefined"!=typeof a&&(b=a.length);return b};e.hideReportPopup=!g.isShowHelp(g.HELP_RAPPORTPURCHASE);e.nrOfMeldingen=function(a){var b=0;"undefined"!=typeof a&&(b=a.length);return b};l=d=0;if("undefined"!=typeof e.report.reportsLastTwoWeeks&&
null!=e.report.reportsLastTwoWeeks){l=[];for(var z in e.report.reportsLastTwoWeeks)n=[],n.push(Number(z)),n.push(Number(e.report.reportsLastTwoWeeks[z].aantal)),l.push(n),n[1]>d&&(d=n[1]);e.exampleDataRapportAanvragen=[{key:"Rapporten opgevraagd",values:l}];l=d/5;l++;l*=5}else e.exampleDataRapportAanvragen=[{key:"Rapporten opgevraagd",values:[]}];e.getBedragText=function(a){return"undefined"==typeof a||null==a||0==a?"hoger dan  100,-":" "+a.toLocaleString("nl-NL")};e.hideCompanyInfo=function(a){return!("undefined"!==
typeof a&&null!=a)};e.nrOfHistorie=function(a){var b=0;"undefined"!=typeof a&&(b=a.length);return b};e.reportHoofdVestiging=function(){var a=k.getReportData();if("undefined"!==a&&null!=a&&"undefined"!==a.bedrijfHoofd&&null!=a.bedrijfHoofd){var b=a.bedrijfHoofd.kvKnummer;"undefined"!=typeof a.bedrijfHoofd.subDossier&&(b+=a.bedrijfHoofd.subDossier);k.getReportData(b)}makeReport(a.bedrijfHoofd.kvKnummer)};e.createReport=function(a,b){a&&makeReport(b)};e.yAxisTickFormatFunctionReportRequests=function(a){return function(a){return d3.round(a,
0)}};e.xAxisTickFormatFunctionReportRequests=function(a){return function(a){return e.report.reportsLastTwoWeeks[a].label}};e.yAxisRangeFunctionReportRequests=function(){return[0,5]};e.optionsReportRequests={chart:{showLegend:!1,type:"lineChart",height:300,margin:{left:50,top:25,bottom:25,right:50},x:function(a){return a[0]},y:function(a){return a[1]},useInteractiveGuideline:!1,xAxis:{axisLabel:"Dag",tickFormat:e.xAxisTickFormatFunctionReportRequests()},yAxis:{axisLabel:"Aantal",tickFormat:e.yAxisTickFormatFunctionReportRequests()},
lines:{forceY:e.getForceY,yDomain:e.getYTickValues},callback:function(a){0}}};makeReport=function(b){r.getOrCreateCompanyData({kvknumber:b},function(b){"undefined"!==typeof b.errorCode?e.error=b.errorCode+" "+b.errorMsg:(h.path("/report/"+a.current.params.bedrijfAanvragerId+"/"+b.bedrijfId+"/0/"+searchurl),h.url(h.path()))})};"undefined"==typeof e.init&&r.checkIfUserCanPay({userId:JSON.parse(c.sessionStorage.user).userId},function(a){"undefined"!=typeof a.errorCode?e.error=a.errorCode+" "+a.errorMsg:
e.userCanPay=a.val});e.nrOfMeldingen=function(a){var b=0;"undefined"!=typeof a&&(b=a.length);return b};l=d=0;if("undefined"!=typeof e.report.meldingenLastYear&&null!=e.report.meldingenLastYear){l=[];for(z in e.report.meldingenLastYear)n=[],n.push(Number(z)),n.push(Number(e.report.meldingenLastYear[z].aantal)),l.push(n),n[1]>d&&(d=n[1]);e.exampleDataRegistratieOverzicht=[{key:"Vermeldingen",values:l}];l=d/5;l++;l*=5}else e.exampleDataRegistratieOverzicht=[{key:"Vermeldingen",values:[]}];e.yAxisRangeFunctionNotifications=
function(){return[0,5]};e.xAxisTickFormatFunctionNotifications=function(a){return function(a){0;return e.report.meldingenLastYear[a].label}};e.yAxisTickFormatFunctionNotifications=function(a){return function(a){0;return d3.round(a,0)}};e.optionsNotifications={chart:{showLegend:!1,type:"lineChart",height:300,margin:{left:50,top:25,bottom:25,right:50},x:function(a){return a[0]},y:function(a){return a[1]},useInteractiveGuideline:!1,xAxis:{axisLabel:"Dag",tickFormat:e.xAxisTickFormatFunctionNotifications()},
yAxis:{axisLabel:"Aantal",tickFormat:e.yAxisTickFormatFunctionNotifications()},lines:{forceY:e.getForceY,yDomain:e.getYTickValues},callback:function(a){0}},caption:{enable:!0,html:'\x3cspan style\x3d"text-decoration: underline;"\x3eLet op\x3c/span\x3e, genoemde aantallen omvatten niet de reeds opgeloste betalingsachterstanden.\x3cbr/\x3eDeze worden definitief verwijderd uit het register en zullen niet worden weergegeven.',css:{"text-align":"justify",margin:"10px 13px 0px 7px"}}};checkIfExists=function(a,
b){for(var c in a)if(a[c]==b)return!0;return!1};e.aantalMeldingDoorBedrijven=function(){return e.report.aantalCrediteuren};e.aantalMeldingen=function(){return"undefined"!=typeof e.report.meldingen&&null!=e.report.meldingen?e.report.meldingen.length:0};e.bedragOpenstaand=function(){return 0!=e.aantalMeldingen()||"undefined"!=typeof e.report.bedragOpenstaand&&null!=e.report.bedragOpenstaand?"undefined"==typeof e.report.bedragOpenstaand||null==e.report.bedragOpenstaand?"bedrag afgeschermd":f("currency")(e.report.bedragOpenstaand):
"Geen"};e.bedragGesloten=function(){return"undefined"==typeof e.report.bedragResolved||null==e.report.bedragResolved?"afgeschermd":f("currency")(e.report.bedragResolved)};e.nrOfHistorie=function(a){var b=0;"undefined"!=typeof a&&(b=a.length);return b};e.hideCompanyInfo=function(a){return!("undefined"!==typeof a&&null!=a)};e.getBedragText=function(a){return"undefined"==typeof a||null==a||0==a?"hoger dan  100,-":f("currency")(a)}}]);
appcontrollers.controller("ReportHistoryTabController",["$scope","ReportDataStorage",function(c,b){c.report=b.getReportData();c.nrOfMeldingen=function(a){var b=0;"undefined"!=typeof a&&(b=a.length);return b};c.nrOfHistorie=function(a){var b=0;"undefined"!=typeof a&&(b=a.length);return b};c.hideCompanyInfo=function(a){return!("undefined"!==typeof a&&null!=a)};c.getBedragText=function(a){return"undefined"==typeof a||null==a||0==a?"hoger dan  100,-":" "+a.toLocaleString("nl-NL")}}]);
appcontrollers.controller("ReportRequestedTabController",["$window","$modal","$scope","$rootScope","maxFieldLengths","$location","$filter","$timeout","ngTableParams","DashboardNumberTags","DashboardService","CompanyService",function(c,b,a,d,e,g,h,l,f,n,q,v){0;a.title="Report Requested Tab";a.maxFieldLengths=e;a.totalItems=0;a.currentPage=1;a.itemsPage=20;a.maxSize=5;a.setPage=function(b){a.currentPage=b};a.pageChanged=function(){0};0;a.createDocumentRequested=function(a,b){return{action:"report",
bedrijfId:a,meldingId:0,referentie:b}};isSearchChanged=function(b){return"undefined"==typeof a.oldSearch?(a.oldSearch=b,!1):a.oldSearch!=b};a.$watch("filterCriteria.filterValue",function(b){"undefined"!=typeof searchCallbackTimeout&&l.cancel(searchCallbackTimeout);searchCallbackTimeout=l(function(){b?2<b.length&&(a.currentPage=1,a.pageChanged(),a.oldSearch=b):isSearchChanged(b)&&(a.currentPage=1,a.pageChanged(),a.oldSearch=b)},1E3)},!0);"undefined"==typeof a.filterCriteria&&(a.filterCriteria={gebruikerId:JSON.parse(c.sessionStorage.user).userId,
bedrijfId:JSON.parse(c.sessionStorage.user).bedrijfId,pageNumber:1,sortDir:"",sortedBy:"",filterValue:""});0;a.nrOfItems=function(){return 0};a.hasItems=function(){return 0<n.getNrOfReportRequested()};a.filterResult=function(){return a.fetchResult(function(){a.filterCriteria.pageNumber=1;a.currentPage=1;delete d.range})};0;a.fetchResult=function(b){d.range="items\x3d"+((a.filterCriteria.pageNumber-1)*a.itemsPage+1)+"-"+((a.filterCriteria.pageNumber-1)*a.itemsPage+a.itemsPage);q.reportrequested(a.filterCriteria,
function(c,d){0;"undefined"!=typeof c?(a.reports=c,a.totalItems=paging_totalItems(d("Content-Range"))):(a.reports=null,a.totalItems=0);n.setNrOfReportRequested(a.totalItems);b();a.firstfetch=!0},function(){0;a.reports=[];a.totalItems=0;n.setNrOfReportRequested(a.totalItems);a.firstfetch=!0})};0;a.setPage=function(b){a.currentPage=b};a.pageChanged=function(){0;a.filterCriteria.pageNumber=a.currentPage;a.fetchResult(function(){delete d.range})};a.documentRequested={action:"reported_companies",bedrijfId:JSON.parse(c.sessionStorage.user).bedrijfId};
a.filterResult()}]);
appcontrollers.controller("ResetPasswordController",["$window","$scope","$rootScope","$location","maxFieldLengths","$cookies","$anchorScroll","$routeParams","UserService","UserNsService","NewAccountService","clientip",function(c,b,a,d,e,g,h,l,f,n,q,v){0;var k=$("#passwordhelp");b.maxFieldLengths=e;b.passwordInvalid=function(a,b){if(passLengthInvalid(a,b,!1)||passLetterInvalid(a,b,!1)||passNumberInvalid(a,b,!1)||passCapitalInvalid(a,b,!1)||passSpacesInvalid(a,b,!1)){var c=passLengthInvalid(a,b,!1)?
lengthString:"",d=passLetterInvalid(a,b,!1)?letterString:"",e=passNumberInvalid(a,b,!1)?numberString:"",f=passCapitalInvalid(a,b,!1)?capitalString:"";a=passSpacesInvalid(a,b,!1)?spacesString:"";c="Vereist: "+c+d+e;c+=f;c+=a;k.text(c);return!0}return!1};b.passwordCheckInvalid=function(a,c,d){return!a[d].$dirty||!b.passwordInvalid(a,c)&&a[c].$modelValue==a[d].$modelValue?!1:!0};b.returnToLogin=function(){d.path("/login");d.url(d.path())};b.reset=function(e){n.resetPassword({activationId:l.activationid,
userId:l.userid,newPassword:b.formresetpassword[e].$modelValue},function(e){if(null!=e.errorCode)b.error=e.errorCode+" "+e.errorMsg;else if("undefined"!==typeof e.token){var k=e.token;c.sessionStorage.authToken=k;f.userdata(function(b){$cookieStore.put("authToken",k);c.sessionStorage.user=JSON.stringify(b);a.content_id="content";d.path("/dashboard");d.url(d.path())})}})};b.buttonDisabled=function(a,c,d){return a[c].$dirty&&a[d].$dirty&&!b.passwordCheckInvalid(a,c,d)?!1:!0};"undefined"==typeof b.initialised&&
(a.ipAddress=v.ip,q.getApiKey(function(c){"undefined"!=typeof c.errorCode?b.error=c.errorMsg:(a.clientApiKey=c.token,a.ipAddress=v.ip)}),b.initialised=!0)}]);
appcontrollers.controller("SearchCompanyController",["$window","$routeParams","$scope","$rootScope","$location","$filter","ngTableParams","$modal","maxFieldLengths","cfpLoadingBar","companyData","clientip","CompanyService","NewAccountService",function(c,b,a,d,e,g,h,l,f,n,q,v,k,r){a.hasSearchResults=!1;a.maxFieldLengths=f;var t=["$scope","$modalInstance",function(a,b){a.closePopup=function(){b.close()}}],w="",p=void 0;c.sessionStorage.user?(p=JSON.parse(c.sessionStorage.user).bedrijfId||void 0,d.content_id=
"content"):(p=void 0,d.content_id="nscontent");a.complete=function(){n.complete()};a.showInfoPopup=function(){l.open({templateUrl:"searchInfoPopup.html",controller:t,size:"lg"})};a.createaccount=function(a,b,c){resetFields();0;"undefined"!=typeof c&&(a+=c);e.path("/createaccount/"+a+"/"+b+"/"+w)};a.fetchResult=function(b){resetFields();d.range="items\x3d"+((a.searchcompany.pageNumber-1)*a.itemsPage+1)+"-"+((a.searchcompany.pageNumber-1)*a.itemsPage+a.itemsPage);void 0!==c.sessionStorage.user?k.search(a.searchcompany,
function(c,d){a.totalItems=paging_totalItems(d("Content-Range"));0;0;a.allCompanies=c;b()},function(){0;a.companies=[];a.totalItems=0}):r.search(a.searchcompany,function(c,d){0;0;a.totalItems=paging_totalItems(d("Content-Range"));a.allCompanies=c;b()},function(){0;a.companies=[];a.totalItems=0})};a.isSearchFieldsOk=function(a){return""!=a.searchValue};a.monitoringcompany=function(b,c,k,f,q,p,h,n){resetFields();a.monitorBedrijfSelected=c;searchkvk=f;"undefined"!=typeof q&&(searchkvk+=q);"undefined"!=
typeof b?e.path("/monitoringquestion/"+b+"/"+searchkvk+"/"+p+"/"+encodeURIComponent(d.escapeParam(c))+"/"+encodeURIComponent(d.escapeParam(k))+"/"+w+"/"+h+"/"+n):e.path("/monitoringquestion/undefined/"+searchkvk+"/"+p+"/"+encodeURIComponent(d.escapeParam(c))+"/"+encodeURIComponent(d.escapeParam(k))+"/"+w+"/"+h+"/"+n);e.url(e.path())};a.isOwnCompany=function(a){return"undefined"!=typeof q&&null!=q?q.kvkNummer==a:!1};a.opmerkingen=function(b,c,d){var e="",k=1;b&&(e="Er is al eerder een melding gedaan door uw bedrijf.",
k+=1);c&&(1<k&&(e+="\n"+k+") "),e+="Reeds in monitoring geplaatst",k+=1);d&&(""!=e?e+="\n"+k+") ":1<k&&(e=k+") "),e+="Er is vandaag al een rapport opgevraagd door uw bedrijf.",k+=1);1==a.isProspect()&&(""!=e?e+="\n"+k+") ":1<k&&(e=k+") "),e+="Uw accountregistratie is nog in behandeling. U kunt nog geen gebruik maken van rapport of monitoring. Dit wordt mogelijk na verificatie, u ontvangt hierover schriftelijk bericht.",k+=1);a.isAdresOk()||(""!=e?e+="\n"+k+") ":1<k&&(e=k+") "),e+="Uw accountregistratie is nog in behandeling. U kunt nog geen gebruik maken van rapport of monitoring. Dit wordt mogelijk na verificatie, u ontvangt hierover schriftelijk bericht.",
k+=1);2<k&&(e="1) "+e);return e};a.pageChanged=function(){a.companies&&(0,a.searchcompany.pageNumber=a.currentPage,pageparturl="$"+a.currentPage,w=searchparturl+pageparturl,a.companies=getCompaniesOnPage(a.currentPage,a.itemsPage,a.totalItems,a.allCompanies))};a.registercompany=function(b,f,q,p){0;resetFields();searchkvk=f;"undefined"!=typeof q&&(searchkvk+=q);k.getOrCreateCompanyData({kvknumber:searchkvk,hoofd:p},function(k){"undefined"!==typeof k.errorCode?a.error=k.errorCode+" "+k.errorMsg:("undefined"===
typeof b||null==b?d.isShowHelp(d.HELP_VERMELDINGINFO)?e.path("/vermeldingeninfo/"+JSON.parse(c.sessionStorage.user).bedrijfId+"/"+k.bedrijfId+"/"+w):e.path("/notifycompany/"+JSON.parse(c.sessionStorage.user).bedrijfId+"/"+k.bedrijfId+"/"+w):d.isShowHelp(d.HELP_VERMELDINGINFO)?e.path("/vermeldingeninfo/"+JSON.parse(c.sessionStorage.user).bedrijfId+"/"+b+"/"+w):e.path("/notifycompany/"+JSON.parse(c.sessionStorage.user).bedrijfId+"/"+b+"/"+w),e.url(e.path()))})};a.isProspect=function(){return"undefined"!=
typeof c.sessionStorage.user?!!JSON.parse(c.sessionStorage.user).prospect:!1};a.isAdresOk=function(){return"undefined"!=typeof c.sessionStorage.user?JSON.parse(c.sessionStorage.user).adresOk:!1};a.notAllowedReport=function(){return a.isProspect()||0==a.isAdresOk()?"Alleen geverifierde klanten kunnen een rapport opvragen":""};a.notAllowedNotification=function(){return d.hasRoleUser("registraties_toegestaan")?"":"Geen rechten om registraties in te voeren"};a.notAllowedMonitoring=function(b){return a.isProspect()||
0==a.isAdresOk()?"Alleen geverifierde klanten kunnen een bedrijf monitoren":b?"Reeds in monitoring geplaatst":""};a.searchCompanies=function(){resetFields();a.currentPage=1;a.fetchResult(performSearchCompanies)};a.setPage=function(b){a.currentPage=b};a.start=function(){n.start()};getCompaniesOnPage=function(a,b,c,d){a=(a-1)*b;return d.slice(a,Math.min(a+b,c))};a.makeReport=function(b,c,d,f,q){var h=p;searchkvk=c;"undefined"!=typeof d&&(searchkvk+=d);k.getOrCreateCompanyData({kvknumber:searchkvk,
hoofd:f},function(c){"undefined"!==typeof c.errorCode?a.error=c.errorCode+" "+c.errorMsg:(void 0==b||null==b?e.path("/report/"+h+"/"+c.bedrijfId+"/0/"+w):e.path("/report/"+h+"/"+b+"/0/"+w),e.url(e.path()))})};performSearchCompanies=function(){y?(a.currentPage=y,a.searchcompany.pageNumber=y):a.searchcompany.pageNumber=a.currentPage;a.hasSearchResults=!0;a.companies=getCompaniesOnPage(a.currentPage,a.itemsPage,a.totalItems,a.allCompanies);searchparturl="$searchcompany$search$"+a.searchcompany.searchValue;
pageparturl="$"+a.currentPage;w=searchparturl+pageparturl;delete d.range};resetFields=function(){delete a.monitorCreated;delete a.error;delete a.monitorBedrijfSelected};if("undefined"==typeof a.initialised){if(b.searchValue){g="";b.searchValue&&"undefined"!=b.searchValue&&(g=b.searchValue);var y=1;b.page&&"undefined"!=b.page&&(y=b.page);a.searchcompany={bedrijfId:p,pageNumber:1,requestPerPage:!1,searchValue:g,city:""};a.totalItems=0;a.itemsPage=10;a.maxSize=5;a.searchCompanies()}else a.searchcompany=
{bedrijfId:p,pageNumber:1,requestPerPage:!1,searchValue:"",city:""},a.totalItems=0,a.currentPage=1,a.itemsPage=10,a.maxSize=5;d.changeUrlWithoutReload("/searchcompany");"undefined"!=typeof c.sessionStorage.user?(a.hideReportPopup=!d.isShowHelp(d.HELP_RAPPORTPURCHASE),k.checkIfUserCanPay({userId:JSON.parse(c.sessionStorage.user).userId},function(b){"undefined"!=typeof b.errorCode?a.error=b.errorCode+" "+b.errorMsg:a.userCanPay=b.val})):(a.userCanPay=!1,void 0===c.sessionStorage.user&&(d.ipAddress=
v.ip,r.getApiKey2(function(b){"undefined"!=typeof b.errorCode?a.error=b.errorMsg:(d.clientApiKey=b.token,d.ipAddress=v.ip)})));a.initialised=!0}}]);
appcontrollers.controller("SearchResultsAdminTabController",["$window","$modal","$routeParams","$scope","$rootScope","$location","maxFieldLengths","$filter","$timeout","ngTableParams","DashboardNumberTags","DashboardService","AccountService","CompanyService",function(c,b,a,d,e,g,h,l,f,n,q,v,k,r){d.maxFieldLengths=h;var t=["$scope","$modalInstance",function(a,b){a.remove=!1;a.removeCustomerOk=function(b){a.remove=!0;a.closeRemoveCustomerModal()};a.closeRemoveCustomerModal=function(){b.close({remove:a.remove})}}],
w=["$scope","$modalInstance",function(a,b){a.remove=!1;a.reason="1";a.removeNotificationOk=function(b){a.reason=b;a.remove=!0;a.closeRemoveNotificationModal()};a.closeRemoveNotificationModal=function(){b.close({remove:a.remove,reason:a.reason})}}];d.maxSearchLength=100;d.title="SearchResults Tab";d.createDocumentRequested=function(a,b){return{action:"report",bedrijfId:a,meldingId:0,referentie:b}};isSearchChanged=function(a){return"undefined"==typeof d.oldSearch?(d.oldSearch=a,!1):d.oldSearch!=a};
d.infoBadge=function(a,b){var c=!1;if("Klant"==a){if("AFW"==b||"DEL"==b||"INV"==b)c=!0}else"Vermelding"!=a||"AFW"!=b&&"DEL"!=b||(c=!0);return c};d.successBadge=function(a,b){var c=!1;"Klant"==a?"ACT"==b&&(c=!0):"Monitoring"==a?"ACT"==b&&(c=!0):"Vermelding"==a&&"ACT"==b&&(c=!0);return c};d.warningBadge=function(a,b){var c=!1;if("Klant"==a){if("PRO"==b||"REG"==b)c=!0}else"Vermelding"!=a||"INI"!=b&&"INB"!=b&&"NOK"!=b||(c=!0);return c};d.dangerBadge=function(a,b){var c=!1;"Klant"==a&&"NOK"==b&&(c=!0);
return c};d.$watch("filterCriteria.filterValue",function(a){"undefined"!=typeof searchCallbackTimeout&&f.cancel(searchCallbackTimeout);searchCallbackTimeout=f(function(){a?2<a.length&&(d.currentPage=1,d.pageChanged(),d.oldSearch=a):isSearchChanged(a)&&(d.currentPage=1,d.pageChanged(),d.oldSearch=a)},1E3)},!0);d.nrOfItems=function(){return 0};d.hasItems=function(){return!0};d.filterResult=function(){return d.fetchResult(function(){d.filterCriteria.pageNumber=1;d.currentPage=1;delete e.range})};d.setVermelder=
function(){var a=d.filterCriteria.vermelder;d.filterCriteria.vermelder=d.selectieVermelder;a!=d.filterCriteria.vermelder&&(d.currentPage=1,d.pageChanged())};d.fetchResult=function(a){searchparturl="$dashboard$searchresultsadmintab$search$"+d.filterCriteria.filterValue;pageparturl="$"+d.currentPage;searchurl=searchparturl+pageparturl;e.range="items\x3d"+((d.filterCriteria.pageNumber-1)*d.itemsPage+1)+"-"+((d.filterCriteria.pageNumber-1)*d.itemsPage+d.itemsPage);v.searchresultsadmin(d.filterCriteria,
function(b,c){0;"undefined"!=typeof b?(d.searchresults=b,d.totalItems=paging_totalItems(c("Content-Range"))):(d.searchresults=null,d.totalItems=0);a()},function(){0;d.searchresults=[];d.totalItems=0})};d.setPage=function(a){d.currentPage=a};d.pageChanged=function(){0;d.filterCriteria.pageNumber=d.currentPage;d.fetchResult(function(){delete e.range})};d.searchresults=function(){return 0<d.totalItems};d.detailsCustomer=function(a){g.path("/klantaccount/"+a+"/"+searchurl);g.url(g.path())};d.detailsCompany=
function(a){g.path("/editcompany/"+a+"/"+searchurl);g.url(g.path())};d.notificationChange=function(a,b,c){0;g.path("/notifycompany/"+b+"/"+c+"/"+searchurl+"/"+a)};d.notificationReadOnly=function(a,b,c){0;g.path("/notifycompany/"+b+"/"+c+"/"+searchurl+"/"+a+"/true")};"undefined"==typeof d.initialised&&("undefined"==typeof d.filterCriteria&&(d.filterCriteria={bedrijfId:JSON.parse(c.sessionStorage.user).bedrijfId,pageNumber:1,sortDir:"",sortedBy:"",filterValue:"",vermelder:!0},d.selectieVermelder=!0),
d.totalItems=0,d.currentPage=1,d.itemsPage=20,d.maxSize=5,a.searchValue&&(d.filterCriteria.filterValue=a.searchValue,h=1,"undefined"!=a.page&&(h=parseInt(a.page)),d.currentPage=h),d.filterResult());doRemoveNotification=function(a,b,e){a={meldingId:a,bedrijfId:b,gebruikerId:JSON.parse(c.sessionStorage.user).userId,reden:e};r.removeNotificationCompany(a,function(a,b){"undefined"!=typeof a.errorCode?d.error=a.errorMsg:(d.notificationRemoved=!0,d.currentPage=1,d.pageChanged())},function(a){0})};d.removeNotification=
function(a,c){b.open({templateUrl:"removenotification.html",controller:w,size:"lg"}).result.then(function(b){b.remove&&doRemoveNotification(a,c,b.reason)},function(){0})};doRemoveCustomer=function(a){k.deleteAccountOfBedrijf(a,function(a){"undefined"!=typeof a.errorCode?d.error=a.errorCode+" "+a.errorMsg:(d.customerRemoved=!0,d.currentPage=1,d.pageChanged())})};d.removeCustomer=function(a){b.open({templateUrl:"removecustomer.html",controller:t,size:"lg"}).result.then(function(b){b.remove&&doRemoveCustomer(a)},
function(){0})}}]);
appservices.factory("AccountService",["$resource",function(c){return c("/register/services/AccountService/account/:action",{},{getFaillissementStats:{method:"GET",params:{action:"faillissementenstats"},headers:{"Content-Type":"application/json"}},getCompanyAccountData:{method:"GET",params:{action:"getCompanyAccountData"},headers:{"Content-Type":"application/json"}},getCompanyData:{method:"GET",params:{action:"getCompanyData"},headers:{"Content-Type":"application/json"}},getFacturen:{method:"GET",params:{action:"getFacturen"},
headers:{"Content-Type":"application/json"},isArray:!0},gebruikers:{method:"GET",params:{action:"gebruikers"},headers:{"Content-Type":"application/json"},isArray:!0},updateBedrijfData:{method:"POST",params:{action:"updateBedrijfData"},headers:{"Content-Type":"application/json"}},updateAccountData:{method:"POST",params:{action:"updateAccountData"},headers:{"Content-Type":"application/json"}},updateAccountBedrijfData:{method:"POST",params:{action:"updateAccountBedrijfData"},headers:{"Content-Type":"application/json"}},
changePassword:{method:"POST",params:{action:"changepassword"},headers:{"Content-Type":"application/json"}},ibanCheck:{method:"GET",params:{action:"ibanCheck"},headers:{"Content-Type":"application/json"}},createNewAccountLetter:{method:"GET",params:{action:"createNewAccountLetter"},headers:{"Content-Type":"application/json"}},deleteAccount:{method:"POST",params:{action:"deleteAccount"},headers:{"Content-Type":"application/json"}},deleteAccountOfBedrijf:{method:"POST",params:{action:"deleteAccountOfBedrijf"},
headers:{"Content-Type":"application/json"}},faillissementenafgelopenweek:{method:"GET",params:{action:"faillissementenafgelopenweek"},headers:{"Content-Type":"application/json"},isArray:!0},activateCustomerBriefCode:{method:"GET",params:{action:"activateCustomerBriefCode"},headers:{"Content-Type":"application/json"}},viesCheck:{method:"GET",params:{action:"viesCheck"},headers:{"Content-Type":"application/json"}}})}]);
appservices.factory("CompanyCrudService",["$resource",function(c){return c("/register/services/CompanyService/company/:id",{id:"@id"})}]);
appservices.factory("CompanyService",["$resource",function(c){return c("/register/services/CompanyService/company/:action",{},{bedrijfHasMonitor:{method:"GET",params:{action:"bedrijfHasMonitor"},headers:{"Content-Type":"application/json"}},donate:{method:"GET",params:{action:"donate"},headers:{"Content-Type":"application/json"}},search:{method:"GET",params:{action:"search"},headers:{"Content-Type":"application/json"},isArray:!0},checkIfUserCanPay:{method:"GET",params:{action:"checkIfUserCanPay"},
headers:{"Content-Type":"application/json"}},companyData:{method:"GET",params:{action:"companyData"},headers:{"Content-Type":"application/json"},isArray:!1},companyDataExtra:{method:"GET",params:{action:"companyDataExtra"},headers:{"Content-Type":"application/json"},isArray:!1},save:{method:"POST",params:{action:"save"},headers:{"Content-Type":"application/json"}},getOrCreateCompanyData:{method:"GET",params:{action:"getOrCreateCompanyData"},headers:{"Content-Type":"application/json"}},companyHasNotifications:{method:"GET",
params:{action:"companyHasNotifications"},headers:{"Content-Type":"application/json"}},getTariefOfProduct:{method:"GET",params:{action:"getTariefOfProduct"},headers:{"Content-Type":"application/json"}},companyNotificationData:{method:"GET",params:{action:"companyNotificationData"},headers:{"Content-Type":"application/json"}},validateNotification:{method:"POST",params:{action:"validateNotification"},headers:{"Content-Type":"application/json"}},notifyCompany:{method:"POST",params:{action:"notifyCompany"},
headers:{"Content-Type":"application/json"}},notifyCompanyBatch:{method:"POST",params:{action:"notifyCompanyBatch"},headers:{"Content-Type":"application/json"}},removeNotificationCompany:{method:"POST",params:{action:"removeNotificationCompany"},headers:{"Content-Type":"application/json"}},updateMonitoring:{method:"POST",params:{action:"updateMonitoring"},headers:{"Content-Type":"application/json"}},deleteAlert:{method:"POST",params:{action:"deleteAlert"},headers:{"Content-Type":"application/json"}},
monitoringCompany:{method:"POST",params:{action:"monitoringCompany"},headers:{"Content-Type":"application/json"}},removeMonitoringCompany:{method:"POST",params:{action:"removeMonitoringCompany"},headers:{"Content-Type":"application/json"}},createNewNotificationLetter:{method:"GET",params:{action:"createNewNotificationLetter"},headers:{"Content-Type":"application/json"}},companyReportData:{method:"GET",params:{action:"companyReportData"},headers:{"Content-Type":"application/json"}},monitoringDetailData:{method:"GET",
params:{action:"monitoringDetailData"},headers:{"Content-Type":"application/json"}},createCustomMelding:{method:"POST",params:{action:"createCustomMelding"},headers:{"Content-Type":"application/json"}},resolveException:{method:"GET",params:{action:"resolveException"},headers:{"Content-Type":"application/json"}},ignoreException:{method:"GET",params:{action:"ignoreException"},headers:{"Content-Type":"application/json"}},getNotificationsOfCompany:{method:"GET",params:{action:"getNotificationsOfCompany"},
headers:{"Content-Type":"application/json"},isArray:!0},holdNotificationCompany:{method:"POST",params:{action:"holdNotificationCompany"},headers:{"Content-Type":"application/json"}},removeHoldNotificationCompany:{method:"POST",params:{action:"removeHoldNotificationCompany"},headers:{"Content-Type":"application/json"}},createInitialNotificationLetter:{method:"GET",params:{action:"createInitialNotificationLetter"},headers:{"Content-Type":"application/json"}},getContactMomentsOfNotification:{method:"GET",
params:{action:"getContactMomentsOfNotification"},headers:{"Content-Type":"application/json"},isArray:!0},addContactMomentNotification:{method:"POST",params:{action:"addContactMomentNotification"},headers:{"Content-Type":"application/json"}},removeContactMomentNotification:{method:"POST",params:{action:"removeContactMomentNotification"},headers:{"Content-Type":"application/json"}},addAdminNotitieNotification:{method:"POST",params:{action:"addAdminNotitieNotification"},headers:{"Content-Type":"application/json"}},
getAdminNoteOfNotification:{method:"GET",params:{action:"getAdminNoteOfNotification"},headers:{"Content-Type":"application/json"}}})}]);appservices.factory("WebsiteService",["$resource",function(c){return c("/register/services/DashboardService/overview/:action",{},{websiteparam:{method:"GET",params:{action:"websiteparam"},headers:{"Content-Type":"application/json"},isArray:!1},saveWebsiteparam:{method:"POST",params:{action:"saveWebsiteparam"},headers:{"Content-Type":"application/json"}}})}]);
appservices.factory("ExactonlineService",["$resource",function(c){return c("/register/services/DashboardService/overview/:action",{},{exactonlineparam:{method:"GET",params:{action:"exactonlineparam"},headers:{"Content-Type":"application/json"},isArray:!1}})}]);
appservices.factory("DashboardService",["$resource",function(c){return c("/register/services/DashboardService/overview/:action",{},{allCompaniesOfUser:{method:"POST",params:{action:"allCompaniesOfUser"},headers:{"Content-Type":"application/json"},isArray:!0},companiesalert:{method:"GET",params:{action:"companiesalert"},headers:{"Content-Type":"application/json"},isArray:!0},portfoliomonitoring:{method:"GET",params:{action:"companiesmonitor"},headers:{"Content-Type":"application/json"},isArray:!0},
reportrequested:{method:"GET",params:{action:"reportrequested"},headers:{"Content-Type":"application/json"},isArray:!0},companiesnotified:{method:"GET",params:{action:"companiesnotified"},headers:{"Content-Type":"application/json"},isArray:!0},notificationsstatus:{method:"GET",params:{action:"notificationsstatus"},headers:{"Content-Type":"application/json"},isArray:!0},companiesremoved:{method:"GET",params:{action:"companiesremoved"},headers:{"Content-Type":"application/json"},isArray:!0},objectionsadmin:{method:"GET",
params:{action:"objectionsadmin"},headers:{"Content-Type":"application/json"},isArray:!0},supportticketsadmin:{method:"GET",params:{action:"supportticketsadmin"},headers:{"Content-Type":"application/json"},isArray:!0},notificationsadmin:{method:"GET",params:{action:"notificationsadmin"},headers:{"Content-Type":"application/json"},isArray:!0},notificationsofprospectadmin:{method:"GET",params:{action:"notificationsofprospectadmin"},headers:{"Content-Type":"application/json"},isArray:!0},customersadmin:{method:"GET",
params:{action:"customersadmin"},headers:{"Content-Type":"application/json"},isArray:!0},generaladmin:{method:"GET",params:{action:"generaladmin"},headers:{"Content-Type":"application/json"},isArray:!1},searchresultsadmin:{method:"GET",params:{action:"searchresultsadmin"},headers:{"Content-Type":"application/json"},isArray:!0},exceptioncompaniesadmin:{method:"GET",params:{action:"exceptioncompaniesadmin"},headers:{"Content-Type":"application/json"},isArray:!0}})}]);
appservices.factory("DocumentService",["$resource",function(c){return c("/register/services/DocumentService/document/:action",{},{downloadAttachment:{method:"GET",params:{action:"downloadAttachment"},headers:{"Content-Type":"application/json"},responseType:"arraybuffer",transformResponse:function(b,a){return{data:b,headers:a}}},downloadDocument:{method:"GET",params:{action:"downloadFile"},headers:{"Content-Type":"application/json"},responseType:"arraybuffer",transformResponse:function(b,a){return{data:b,
headers:a}}},downloadExcel:{method:"GET",params:{action:"downloadExcel"},headers:{"Content-Type":"application/json"},responseType:"arraybuffer",transformResponse:function(b,a){return{data:b,headers:a}}},downloadFactuur:{method:"GET",params:{action:"downloadFactuur"},headers:{"Content-Type":"application/json"},responseType:"arraybuffer",transformResponse:function(b,a){return{data:b,headers:a}}},downloadBatchDocument:{method:"GET",params:{action:"downloadBatchDocument"},headers:{"Content-Type":"application/json"},
responseType:"arraybuffer",transformResponse:function(b,a){return{data:b,headers:a}}}})}]);appservices.factory("DoeietsService",["$resource",function(c){return c("/register/services/UserService/user/doeiets",{},{doeiets:{method:"GET"}})}]);appservices.factory("ExactOnlineService",["$resource",function(c){return c("/register/services/ExactOnlineService/services/:action",{},{exactOnlineAccess:{method:"GET",params:{action:"exactOnlineAccess"},headers:{"Content-Type":"application/json"}}})}]);
appservices.factory("GebruikersService",["$resource",function(c){return c("/register/services/GebruikerService/gebruiker",{},{create:{method:"POST"},update:{method:"PUT"}})}]);appservices.factory("GebruikerService",["$resource",function(c){return c("/register/services/GebruikerService/gebruiker/:id",{},{delete:{method:"DELETE",params:{id:"@id"}}})}]);
appservices.factory("GebruikersServicePath",["$resource",function(c){return c("/register/services/GebruikerService/gebruiker/:action",{},{gebruikerdata:{method:"POST",params:{action:"gebruikerdata"},headers:{"Content-Type":"application/json"},isArray:!0},sbdrgebruiker:{method:"GET",params:{action:"sbdruser"},headers:{"Content-Type":"application/json"}}})}]);
appservices.factory("InternalProcessService",["$resource",function(c){return c("/register/services/InternalProcessService/internal/:action",{},{getInternalProcessRows:{method:"GET",params:{action:"getInternalProcessRows"},headers:{"Content-Type":"application/json"},isArray:!0},getLetterBatchRows:{method:"GET",params:{action:"getLetterBatchRows"},headers:{"Content-Type":"application/json"},isArray:!0},printCustomerLetter:{method:"GET",params:{action:"printCustomerLetter"},headers:{"Content-Type":"application/json"}},
printNotificationLetter:{method:"GET",params:{action:"printNotificationLetter"},headers:{"Content-Type":"application/json"}},setProcessRowAsSent:{method:"GET",params:{action:"setProcessRowAsSent"},headers:{"Content-Type":"application/json"}}})}]);
appservices.factory("KortingsCodeService",["$resource",function(c){return c("/register/services/KortingsCodeService/kortingscode/:action",{},{checkIfCodeIsExpired:{method:"GET",params:{action:"checkIfCodeIsExpired"},headers:{"Content-Type":"application/json"}},checkIfCodeIsValid:{method:"GET",params:{action:"checkIfCodeIsValid"},headers:{"Content-Type":"application/json"}}})}]);
appservices.factory("LoginService",["$resource",function(c){return c("/register/services/LoginService/login/:action",{},{authenticate:{method:"POST",params:{action:"authenticate"},headers:{"Content-Type":"application/json"}},activateUser:{method:"GET",params:{action:"activateUser"},headers:{"Content-Type":"application/json"}},activateCustomer:{method:"GET",params:{action:"activateCustomer"},headers:{"Content-Type":"application/json"}},websocketdata:{method:"GET",params:{action:"websocketdata"},headers:{"Content-Type":"application/json"}}})}]);
appservices.factory("NewAccountService",["$resource",function(c){return c("/register/services/NewAccountService/newaccount/:action",{},{search:{method:"GET",params:{action:"searchCompany"},headers:{"Content-Type":"application/json"},isArray:!0},getApiKey:{method:"GET",params:{action:"getApiKey"},headers:{"Content-Type":"application/json"}},getApiKey2:{method:"GET",params:{action:"getApiKey2"},headers:{"Content-Type":"application/json"}},getCompanyNewAccountData:{method:"GET",params:{action:"getCompanyNewAccountData"},
headers:{"Content-Type":"application/json"}},recaptchasitekey:{method:"GET",params:{action:"recaptchasitekey"},headers:{"Content-Type":"application/json"}},verifyRecaptcha:{method:"POST",params:{action:"verifyRecaptcha"},headers:{"Content-Type":"application/json"}},createAccount:{method:"POST",params:{action:"createAccount"},headers:{"Content-Type":"application/json"}}})}]);appservices.factory("NewsService",["$resource",function(c){return c("rest/news/:id",{id:"@id"})}]);
appservices.factory("SbdrService",["$resource",function(c){return c("/register/services/ActivititestService/rest/activititest",{},{doit:{method:"GET"}})}]);
appservices.factory("SupportService",["$resource",function(c){return c("/register/services/SupportService/support/:action",{},{createsupportticket:{method:"POST",params:{action:"createSupportTicket"},headers:{"Content-Type":"application/json"}},createsupportticketbestand:{method:"POST",params:{action:"createSupportTicketBestand"},transformRequest:angular.identity,headers:{"Content-Type":void 0}},createsupportticketreaction:{method:"POST",params:{action:"createSupportTicketReaction"},headers:{"Content-Type":"application/json"}},
findsupportticketlistforuser:{method:"GET",params:{action:"findSupportTicketListForUser"},headers:{"Content-Type":"application/json"},isArray:!0},findsupportticketsbyreferenceno:{method:"GET",params:{action:"findSupportTicketsByReferenceNo"},headers:{"Content-Type":"application/json"},isArray:!0},pickupsupportticket:{method:"GET",params:{action:"pickUpSupportTicket"},headers:{"Content-Type":"application/json"}},sbdracceptobjection:{method:"POST",params:{action:"sbdrAcceptObjection"},headers:{"Content-Type":"application/json"}},
sbdrdiscardobjection:{method:"POST",params:{action:"sbdrDiscardObjection"},headers:{"Content-Type":"application/json"}}})}]);
appservices.factory("UserNsService",["$resource",function(c){return c("/register/services/UserNsService/user/:action",{},{findActivationCode:{method:"POST",params:{action:"findActivationCode"},headers:{"Content-Type":"application/json"}},forgotPassword:{method:"POST",params:{action:"forgotpassword"},headers:{"Content-Type":"application/json"}},resetPassword:{method:"POST",params:{action:"resetpassword"},headers:{"Content-Type":"application/json"}},activateUser:{method:"POST",params:{action:"activateuser"},
headers:{"Content-Type":"application/json"}}})}]);
appservices.factory("UserService",["$resource",function(c){return c("/register/services/UserService/user/:action",{},{userdata:{method:"GET",params:{action:"userdata"},headers:{"Content-Type":"application/json"}},userdataOfCompany:{method:"GET",params:{action:"userdataOfCompany"},headers:{"Content-Type":"application/json"}},changePassword:{method:"POST",params:{action:"changepassword"},headers:{"Content-Type":"application/json"}},logout:{method:"GET",params:{action:"logout"},headers:{"Content-Type":"application/json"}},
updateShowHelp:{method:"POST",params:{action:"updateShowHelp"},headers:{"Content-Type":"application/json"}}})}]);
appservices.factory("DashboardNumberTags",function(){var c=-1,b=-1,a=-1,d=-1,e=-1,g=-1,h=-1,l=-1,f=-1,n=-1,q=-1,v=-1;return{getNrOfAlerts:function(){return c},setNrOfAlerts:function(a){c=a},getNrOfReportRequested:function(){return b},setNrOfReportRequested:function(a){b=a},getNrOfPortfolio:function(){return a},setNrOfPortfolio:function(b){a=b},getNrOfNotifications:function(){return d},setNrOfNotifications:function(a){d=a},getNrOfRemovedCompanies:function(){return e},setNrOfRemovedCompanies:function(a){e=
a},getNrOfObjectionsAdmin:function(){return g},setNrOfObjectionsAdmin:function(a){g=a},getNrOfSupportTicketsAdmin:function(){return h},setNrOfSupportTicketsAdmin:function(a){h=a},getNrOfCustomersAdmin:function(){return l},setNrOfCustomersAdmin:function(a){l=a},getNrOfNotificationsAdmin:function(){return f},setNrOfNotificationsAdmin:function(a){f=a},getNrOfNotificationsOfProspectAdmin:function(){return n},setNrOfNotificationsOfProspectAdmin:function(a){n=a},getNrOfExceptionCompaniesAdmin:function(){return q},
setNrOfExceptionCompaniesAdmin:function(a){q=a},getNrOfProcesses:function(){return v},setNrOfProcesses:function(a){v=a}}});appservices.factory("NotificationsToSend",function(){var c=[],b=null;return{getNotifications:function(){return c},setNotifications:function(a){c=a},getTelefoonNummerDebiteur:function(){return b},getEmailAdresDebiteur:function(){return null},setDebiteurGegevens:function(a,c){b=a;emailAdresDeb=c}}});
appservices.factory("ReportDataStorage",function(){var c=null;return{getReportData:function(){return c},setReportData:function(b){c=b}}});appservices.factory("ExceptionCompanyDataStorage",function(){var c=null;return{getExceptionCompanyData:function(){return c},setExceptionCompanyData:function(b){c=b}}});
appservices.factory("WebSocketService",["$websocket","DashboardNumberTags",function(c,b){var a=null,d=[];return{openConnection:function(e,g,h){a=c(e+"/"+g+"/"+h);a.onMessage(function(a){var c=JSON.parse(a.data);"undefined"==typeof c.alerts||isNaN(c.alerts)?d.push(JSON.parse(a.data)):b.setNrOfAlerts(parseInt(c.alerts))});a.onError(function(a){0});a.onClose(function(a){0});a.onOpen(function(){0})},collection:d,status:function(){return a.readyState},get:function(){a.send(JSON.stringify({action:"get"}))},
send:function(b){angular.isString(b)?a.send(b):angular.isObject(b)&&a.send(JSON.stringify(b))}}}]);function adBlockDetected(){var c=angular.element(document.querySelector("[data-ng-app]")).injector();if("undefined"!==typeof c&&null!=c){var b=c.get("$rootScope");b.$apply(function(){b.adbEnabled=!0})}$("#main").hide()}function adBlockNotDetected(){var c=angular.element(document.querySelector("[data-ng-app]")).injector().get("$rootScope");c.$apply(function(){c.adbEnabled=!1});$("#main").show()}
appcontrollers.controller("SupportController",["$window","$scope","$rootScope","$location","$filter","SupportService","CompanyService",function(c,b,a,d,e,g,h){0;b.totalItems=0;b.userSupportTickets=[];b.currentPage=1;b.itemsPage=10;b.maxSize=5;h.companyHasNotifications({gebruikerId:JSON.parse(c.sessionStorage.user).userId},function(a){delete b.error;null!=a.errorCode?b.error=a.errorCode+" "+a.errorMsg:b.hasNotificationsToObject=a.val});b.setPage=function(a){b.currentPage=a};b.pageChanged=function(){b.filterCriteria.pageNumber=
b.currentPage;b.getSupportTicketsOfUser(function(){delete a.range})};"undefined"==typeof b.filterCriteria&&(b.filterCriteria={gebruikerId:JSON.parse(c.sessionStorage.user).userId,pageNumber:1,sortDir:"",sortedBy:""});b.filterResult=function(){return b.getSupportTicketsOfUser(function(){b.filterCriteria.pageNumber=1;b.currentPage=1;delete a.range})};b.gotoFAQ=function(){d.path("/support/faq");d.url(d.path())};b.gotoProblem=function(){d.path("/support/problem");d.url(d.path())};b.gotoObjection=function(){d.path("/support/objection");
d.url(d.path())};b.gotoDetails=function(a){d.path("/support/detail/"+a+"/$support");d.url(d.path())};b.getSupportTicketsOfUser=function(){delete b.error;a.range="items\x3d"+((b.filterCriteria.pageNumber-1)*b.itemsPage+1)+"-"+((b.filterCriteria.pageNumber-1)*b.itemsPage+b.itemsPage);g.findsupportticketlistforuser(b.filterCriteria,function(a,c){void 0!=a&&0<a.length?(b.userSupportTickets=a,b.totalItems=paging_totalItems(c("Content-Range"))):(b.userSupportTickets=[],b.totalItems=0)},function(){0;b.error=
"Fout bij ophalen supporttickets";b.userSupportTickets=[];b.totalItems=0})};b.setPage=function(a){b.currentPage=a};b.getSupportTicketsOfUser()}]);
appcontrollers.controller("SupportDetailController",["$window","$routeParams","$scope","$rootScope","$location","supportTicketsDetails","SupportService","CompanyService","backToAlerts",function(c,b,a,d,e,g,h,l,f){searchurl=b.searchurl?b.searchurl:"$dashboard";"undefined"==typeof a.init&&(a.supportredenen=[{id:"BBV",description:"Betwist de vordering"},{id:"BFO",description:"Factuur is ongegrond"},{id:"BOO",description:"Organisatie is onbekend"},{id:"BRG",description:"Regeling is getroffen"},{id:"BAN",
description:"Overig"}],null!=g.supportTicketChain[0].errorCode?(a.showDetailsNotAllowed=!0,a.topError=g.supportTicketChain[0].errorCode+" "+g.supportTicketChain[0].errorMsg):(a.showDetailsNotAllowed=!1,a.supportchain=g.supportTicketChain),a.showDetailsNotAllowed||(a.reaction={betwistBezwaar:null,supportReden:null,bericht:null,gebruiker:{gebruikersId:JSON.parse(c.sessionStorage.user).userId},supportParentId:a.supportchain[a.supportchain.length-1].supportId},a.attachments=[],a.supportTicket=a.supportchain[0],
a.thisUser=JSON.parse(c.sessionStorage.user),a.supportTicket.melding&&(a.meldingVanBedrijf=l.companyData({bedrijfId:a.supportTicket.melding.bedrijfIdGerapporteerd})),a.supportSavedOk=!1,a.obj={}),a.init=!0);a.$on("attachmentControllerEvent",function(b,c){a.attachmenterror=!0;a.error=c});a.downloadAttachment=function(a){return{action:"support_attachment",supportBestandId:a}};a.checkObjectionReactionFormInvalid=function(b){return b.$invalid||a.isInvalid(b,"rbobjection")};a.getStaticSuccessMsg=function(){if("ARC"==
a.supportTicket.supportStatus)if("BZW"==a.supportTicket.supportType){if("undefined"!=typeof a.supportTicket.melding){if("ACT"==a.supportTicket.melding.meldingstatusCode)return"Bezwaar is afgewezen, melding is opgenomen";if("AFW"==a.supportTicket.melding.meldingstatusCode||"DEL"==a.supportTicket.melding.meldingstatusCode)return"Bezwaar is geaccepteerd of kwestie is gearchiveerd, vermelding is verwijderd";if("INB"==a.supportTicket.melding.meldingstatusCode)return"Bezwaar is afgewezen. De vermelding blijft opgenomen in het register."}}else return"Support ticket is reeds afgehandeld";
else if("GST"==a.supportTicket.supportStatus&&!a.hasAdminRole(a.thisUser.roles))return"Het bezwaar is in behandeling bij de afdeling bezwaar. U wordt op de hoogte gehouden van het verloop en indien nodig gevraagd uw kant van het verhaal te belichten."};a.gotoSupport=function(){url=gotoDurl(searchurl);null!=url&&(e.path(url),e.url(e.path()))};a.handleObjectionSbdrReaction=function(b){this.formobjectionsbdrreaction.$invalid||(this.formobjectionsbdrreaction.$setPristine(),a.reaction.supportType="BZW",
b?h.sbdrdiscardobjection(a.reaction,function(b){"undefined"!=typeof b.errorCode||"undefined"!=typeof d.error?a.error=b.errorCode+" "+b.errorMsg:(a.supportSavedOk=!0,a.successMsg="Bezwaar is afgewezen, melding wordt opgenomen",h.findsupportticketsbyreferenceno({refNo:a.supportTicket.referentieNummer},function(b){a.supportchain=b;a.supportTicket=a.supportchain[0]}))}):h.sbdracceptobjection(a.reaction,function(b){"undefined"!=typeof b.errorCode||"undefined"!=typeof d.error?a.error=b.errorCode+" "+b.errorMsg:
(a.supportSavedOk=!0,a.successMsg="Bezwaar is geaccepteerd, melding wordt verwijderd",h.findsupportticketsbyreferenceno({refNo:a.supportTicket.referentieNummer},function(b){a.supportchain=b;a.supportTicket=a.supportchain[0]}))}))};a.hasAdminRole=function(a){return hasRole(a,"SBDR")||hasRole(a,"SBDRHOOFD")||hasRole(a,"admin_sbdr_hoofd")||hasRole(a,"admin_sbdr")};a.isInvalid=function(b,c){if(void 0!=b[c]){var d=b[c].$invalid,e=b[c].$dirty;!e||"undefined"!=typeof a.attachmenterror&&a.attachmenterror||
(delete a.error,delete a.successMsg);"rbobjection"==c&&(d="true"!=b.rbobjection.$modelValue&&"false"!=b.rbobjection.$modelValue);return e&&d}return!0};a.pickUpSupportTicket=function(){h.pickupsupportticket({refNo:a.supportTicket.referentieNummer,userId:a.thisUser.userId},function(b){"undefined"!=typeof b.errorCode?a.error=b.errorCode+" "+b.errorMsg:(a.supportTicketPickUpOK=!0,h.findsupportticketsbyreferenceno({refNo:a.supportTicket.referentieNummer},function(b){a.supportchain=b;a.supportTicket=a.supportchain[0]}))})};
a.showStaticSuccessMsg=function(){if("ARC"==a.supportTicket.supportStatus)if("BZW"==a.supportTicket.supportType){if("undefined"!=typeof a.supportTicket.melding&&("ACT"==a.supportTicket.melding.meldingstatusCode||"INB"==a.supportTicket.melding.meldingstatusCode||"AFW"==a.supportTicket.melding.meldingstatusCode||"DEL"==a.supportTicket.melding.meldingstatusCode))return!0}else return!0;else if("GST"==a.supportTicket.supportStatus&&!a.hasAdminRole(a.thisUser.roles))return!0;return!1};a.submitObjectionReaction=
function(){a.checkObjectionReactionFormInvalid(this.formobjectionreaction)||(this.formobjectionreaction.$setPristine(),h.createsupportticketreaction(a.reaction,function(b){if("undefined"!=typeof b.errorCode||"undefined"!=typeof d.error)a.error=b.errorCode+" "+b.errorMsg;else{var c=[],e=!0;async.each(a.attachments,function(a,d){e&&(a=createFormData(a,b.supportId,b.referentieNummer),h.createsupportticketbestand(a,function(a){"undefined"!=typeof a.errorCode?(e=!1,d(a.errorCode+" "+a.errorMsg)):(c.push(a),
d())}))},function(c){c?a.error=c:(a.supportSavedOk=!0,a.successMsg="Reactie op ticket met referentie "+b.referentieNummer+" wordt behandeld",h.findsupportticketsbyreferenceno({refNo:a.supportTicket.referentieNummer},function(b){a.supportchain=b;a.supportTicket=a.supportchain[0]}))})}}))};a.submitSupportSbdrReaction=function(){delete a.successMsg;this.formsupportsbdrreaction.$invalid||(this.formsupportsbdrreaction.$setPristine(),h.createsupportticket(a.reaction,function(b){"undefined"!=typeof b.errorCode||
"undefined"!=typeof d.error?a.error=b.errorCode+" "+b.errorMsg:(a.supportSavedOk=!0,a.successMsg="Reactie is met succes geplaatst",h.findsupportticketsbyreferenceno({refNo:a.supportTicket.referentieNummer},function(b){a.supportchain=b;a.supportTicket=a.supportchain[0]}))}))};createFormData=function(a,b,c){var d=new FormData;d.append("file",a);d.append("BestandsNaam",a.name);d.append("SupportId",b);d.append("SupportReferentie",c);return d}}]);
appcontrollers.controller("SupporAttachmentController",["$scope",function(c){c.$watch("createFileAttachment",function(b,a){delete c.attachmenterror;if(void 0!=b)if("application/gzip"==b.type||"application/msword"==b.type||"application/pdf"==b.type||"application/vnd.ms-excel"==b.type||"application/vnd.openxmlformats-officedocument.wordprocessingml.document"==b.type||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"==b.type||"application/zip"==b.type||"text/csv"==b.type||"text/plain"==
b.type||"text/rtf"==b.type){if(void 0!=b&&"undefined"!==typeof c.attachments&&2>=c.attachments.length){var d=!1;c.attachments.some(function(a,c,h){a.name==b.name&&(d=!0)});d||c.attachments.push(b)}}else c.$emit("attachmentControllerEvent","Dit type bestand is niet toegestaan, alleen de volgende extensies zijn toegestaan: doc, docx, xls, xlsx, pdf, rtf, gzip, zip en csv")});c.removeAttachment=function(b){c.attachments.splice(b,1)}}]);
appcontrollers.controller("SupportFaqController",["$scope","$location",function(c,b){c.gotoSupport=function(){b.path("/support");b.url(b.path())}}]);
appcontrollers.controller("SupportObjectionController",["$window","$scope","$rootScope","$location","$anchorScroll","maxFieldLengths","$routeParams","$q","SupportService","CompanyService",function(c,b,a,d,e,g,h,l,f,n){b.maxFieldLengths=g;void 0==b.init&&(b.init=!0,b.supportredenen=[{id:"BBV",description:"Betwist de vordering"},{id:"BFO",description:"Factuur is ongegrond"},{id:"BOO",description:"Organisatie is onbekend"},{id:"BRG",description:"Regeling is getroffen"},{id:"BVV",description:"Vordering is voldaan"},
{id:"BAN",description:"Overig"}],b.support={supportType:"BZW",supportReden:null,bericht:null,melding:{meldingId:null},gebruiker:{gebruikersId:JSON.parse(c.sessionStorage.user).userId}},b.attachments=[],b.companymeldingen=[],b.selectedCompany={},b.selectedNotification={},b.meldingBedrijfNaam="-",b.meldingReferentieIntern="-",b.controle={akkoord:!1});b.$watch("createFileAttachment",function(a,c){delete b.attachmenterror;if(void 0!=a)if("application/gzip"==a.type||"application/msword"==a.type||"application/pdf"==
a.type||"application/vnd.ms-excel"==a.type||"application/vnd.openxmlformats-officedocument.wordprocessingml.document"==a.type||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"==a.type||"application/zip"==a.type||"text/csv"==a.type||"text/plain"==a.type||"text/rtf"==a.type){if(void 0!=a&&void 0!=b.attachments&&2>=b.attachments.length){var d=!1;b.attachments.some(function(b,c,e){b.name==a.name&&(d=!0)});d||b.attachments.push(a)}}else b.attachmenterror=!0,b.error="Dit type bestand is niet toegestaan, alleen de volgende extensies zijn toegestaan: doc, docx, xls, xlsx, pdf, rtf, gzip, zip en csv"});
b.checkSupportFormInvalid=function(){return b.formsupportobjection.$invalid||0==b.controle.akkoord};b.fetchMeldingen=function(){b.args={gebruikerId:JSON.parse(c.sessionStorage.user).userId};n.getNotificationsOfCompany(b.args,function(a){void 0!=a.errorCode?b.error=a.errorCode+" "+a.errorMsg:b.companymeldingen=a})};b.gotoSupport=function(){d.path("/support");d.url(d.path())};b.isInvalid=function(a,c){var d=a[c].$invalid;a=a[c].$dirty||b.formSubmitted;!a||"undefined"!=typeof b.attachmenterror&&b.attachmenterror||
delete b.error;return a&&d};b.removeAttachment=function(a){b.attachments.splice(a,1)};b.submitSupport=function(){b.formSubmitted=!0;delete b.supportSavedOk;b.checkSupportFormInvalid()||(b.formsupportobjection.$setPristine(),f.createsupportticket(b.support,function(a){if(void 0!=a.errorCode)b.error=a.errorCode+" "+a.errorMsg;else{var c=[],d=!0;async.each(b.attachments,function(b,e){d&&(b=createFormData(b,a.supportId,a.referentieNummer),f.createsupportticketbestand(b,function(a){void 0!=a.errorCode?
(d=!1,e(a.errorCode+" "+a.errorMsg)):(c.push(a),e())}))},function(d){d?b.error=d:(b.supportSavedOk=!0,b.supportReferentie=a.referentieNummer,1==c.length?b.supportBijlagenMsg=" met 1 bijlage":1<c.length&&(b.supportBijlagenMsg=" met "+c.length+" bijlagen"))})}}),b.formSubmitted=!1)};createFormData=function(a,b,c){var d=new FormData;d.append("file",a);d.append("BestandsNaam",a.name);d.append("SupportId",b);d.append("SupportReferentie",c);return d};meldingChanged=function(a){0<a?n.companyData({bedrijfId:b.companymeldingen[a-
1].bedrijfIdGerapporteerd},function(c){"undefined"!=typeof c.errorCode?b.error=c.errorCode+" "+c.errorMsg:(b.selectedCompany=c,n.companyNotificationData({meldingId:b.companymeldingen[a].meldingId,bedrijfId:b.companymeldingen[a].bedrijfId},function(a){"undefined"!=typeof c.errorCode?b.error=a.errorCode+" "+a.errorMsg:b.selectedNotification=a}))}):(b.selectedCompany={},b.selectedNotification={})};b.fetchMeldingen()}]);
appcontrollers.controller("SupportProblemController",["$window","$scope","$rootScope","$location","maxFieldLengths","SupportService",function(c,b,a,d,e,g){b.maxFieldLengths=e;"undefined"==typeof b.init&&(b.init=!0,b.supporttypes=[{id:"KLT",description:"Klacht"},{id:"PRB",description:"Probleem"},{id:"VRG",description:"Vraag"},{id:"SGT",description:"Suggestie"}],b.supportredenen=[{id:"PAN",description:"Overig"},{id:"PBA",description:"Kan geen melding doen van betalingsachterstand"},{id:"PBD",description:"Kan geen bedrijf opzoeken"},
{id:"PBM",description:"Kan geen monitor op bedrijf plaatsen"},{id:"PGB",description:"Kan geen gebruiker toevoegen"}],b.support={supportType:null,supportReden:null,bericht:null,gebruiker:{gebruikersId:JSON.parse(c.sessionStorage.user).userId}});b.$watch("support.supportType",function(a){if("KLT"==a||"VRG"==a)b.support.supportReden=null});b.gotoSupport=function(){d.path("/support");d.url(d.path())};b.submitSupport=function(){b.formSubmitted=!0;delete b.supportSavedOk;b.checkSupportFormInvalid()||(b.formsupportkpv.$setPristine(),
g.createsupportticket(b.support,function(c){"undefined"!=typeof c.errorCode||"undefined"!=typeof a.error?b.error=c.errorCode+" "+c.errorMsg:(b.supportSavedOk=!0,b.supportReferentie=c.referentieNummer)}),b.formSubmitted=!1)};b.isInvalid=function(a,c){var d=a[c].$invalid;(a=a[c].$dirty||b.formSubmitted)&&delete b.error;return"supportreden"==c&&("PRB"==b.support.supportType&&null==b.support.supportReden||"PRB"!=b.support.supportType&&null!=b.support.supportReden)?!0:a&&d};b.checkSupportFormInvalid=function(){return b.formsupportkpv.$invalid||
b.isInvalid(b.formsupportkpv,"supportreden")}}]);
appcontrollers.controller("SupportTicketsAdminTabController",["$window","$scope","$rootScope","$location","$filter","$timeout","maxFieldLengths","ngTableParams","DashboardNumberTags","DashboardService","AccountService","CompanyService",function(c,b,a,d,e,g,h,l,f,n,q,v){b.maxFieldLengths=h;b.title="Support Tickets Tab";q.getCompanyAccountData({bedrijfId:JSON.parse(c.sessionStorage.user).bedrijfId},function(a){b.account=a});b.totalItems=0;b.currentPage=1;b.itemsPage=20;b.maxSize=5;b.thisUser=JSON.parse(c.sessionStorage.user);
"undefined"==typeof b.filterCriteria&&(b.filterCriteria={bedrijfId:JSON.parse(c.sessionStorage.user).bedrijfId,pageNumber:1,sortDir:"",sortedBy:"",filterValue:""});b.$watch("filterCriteria.filterValue",function(a){"undefined"!=typeof searchCallbackTimeout&&g.cancel(searchCallbackTimeout);searchCallbackTimeout=g(function(){a?2<a.length&&(b.currentPage=1,b.pageChanged(),b.oldSearch=a):isSearchChanged(a)&&(b.currentPage=1,b.pageChanged(),b.oldSearch=a)},1E3)},!0);b.fetchResult=function(c){a.range="items\x3d"+
((b.filterCriteria.pageNumber-1)*b.itemsPage+1)+"-"+((b.filterCriteria.pageNumber-1)*b.itemsPage+b.itemsPage);n.supportticketsadmin(b.filterCriteria,function(a,d){"undefined"!=typeof a&&0<a.length?(b.supportTicketsAdminCollection=a,b.totalItems=paging_totalItems(d("Content-Range"))):(b.supportTicketsAdminCollection=null,b.totalItems=0);f.setNrOfSupportTicketsAdmin(b.totalItems);c()},function(){b.supportTicketsAdminCollection=[];b.totalItems=0;f.setNrOfSupportTicketsAdmin(b.totalItems)})};b.filterResult=
function(){return b.fetchResult(function(){b.filterCriteria.pageNumber=1;b.currentPage=1;delete a.range})};b.hasItems=function(){return 0<f.getNrOfSupportTicketsAdmin()};b.ignorealert=function(a,b,c){"MON"==a?updateMonitoring(c):deleteAlert(b)};b.pageChanged=function(){b.filterCriteria.pageNumber=b.currentPage;b.fetchResult(function(){delete a.range})};b.setPage=function(a){b.currentPage=a};b.viewAdminDetails=function(a){supportDetail(a)};b.viewdetails=function(a,b,c,d,e,f,g){"SUP"==a&&(deleteAlert(b),
supportDetail(g))};deleteAlert=function(a){v.deleteAlert(a,function(a){"undefined"!==typeof a.errorCode?b.error=a.errorCode+" "+a.errorMsg:(b.currentPage=1,b.pageChanged())})};isSearchChanged=function(a){return"undefined"==typeof b.oldSearch?(b.oldSearch=a,!1):b.oldSearch!=a};supportDetail=function(a){delete b.error;d.path("/support/detail/"+a+"/$dashboard$supportticketsadmintab");d.url(d.path())};b.lowercaseFirstLetter=function(a){return a.charAt(0).toLowerCase()+a.slice(1)};b.filterResult()}]);
appcontrollers.controller("AlertsTabController",["$window","$scope","$rootScope","$location","$filter","$timeout","maxFieldLengths","ngTableParams","DashboardNumberTags","DashboardService","AccountService","CompanyService",function(c,b,a,d,e,g,h,l,f,n,q,v){b.maxFieldLengths=h;b.title="Alerts Tab";q.getCompanyAccountData({bedrijfId:JSON.parse(c.sessionStorage.user).bedrijfId},function(a){b.account=a});b.totalItems=0;b.currentPage=1;b.itemsPage=20;b.maxSize=5;b.thisUser=JSON.parse(c.sessionStorage.user);
"undefined"==typeof b.filterCriteria&&(b.filterCriteria={bedrijfId:JSON.parse(c.sessionStorage.user).bedrijfId,pageNumber:1,sortDir:"",sortedBy:"",filterValue:""});b.$watch("filterCriteria.filterValue",function(a){"undefined"!=typeof searchCallbackTimeout&&g.cancel(searchCallbackTimeout);searchCallbackTimeout=g(function(){a?2<a.length&&(b.currentPage=1,b.pageChanged(),b.oldSearch=a):isSearchChanged(a)&&(b.currentPage=1,b.pageChanged(),b.oldSearch=a)},1E3)},!0);b.fetchResult=function(c){a.range="items\x3d"+
((b.filterCriteria.pageNumber-1)*b.itemsPage+1)+"-"+((b.filterCriteria.pageNumber-1)*b.itemsPage+b.itemsPage);n.companiesalert(b.filterCriteria,function(a,d){"undefined"!=typeof a&&0<a.length?(hasRole(b.thisUser.roles,"admin_sbdr")||hasRole(b.thisUser.roles,"admin_sbdr_hoofd")?b.adminAlertsCollection=a:b.alertsCollection=a,b.totalItems=paging_totalItems(d("Content-Range"))):(b.adminAlertsCollection=null,b.alertsCollection=null,b.totalItems=0);f.setNrOfAlerts(b.totalItems);c()},function(){b.adminAlertsCollection=
[];b.alertsCollection=[];b.totalItems=0;f.setNrOfAlerts(b.totalItems)})};b.filterResult=function(){return b.fetchResult(function(){b.filterCriteria.pageNumber=1;b.currentPage=1;delete a.range})};b.hasItems=function(){return 0<f.getNrOfAlerts()};b.ignorealert=function(a,b,c){"MON"==a?updateMonitoring(c):deleteAlert(b)};b.pageChanged=function(){b.filterCriteria.pageNumber=b.currentPage;b.fetchResult(function(){delete a.range})};b.setPage=function(a){b.currentPage=a};b.viewAdminDetails=function(a){supportAlertDetail(a)};
b.viewdetails=function(a,b,c,d,e,f,g){"MON"==a?(updateMonitoring(f),monitoringDetail(c)):"VER"==a?(deleteAlert(b),notificationReadOnly(d,f)):"SUP"==a&&(deleteAlert(b),supportAlertDetail(g))};deleteAlert=function(a){v.deleteAlert(a,function(a){"undefined"!==typeof a.errorCode?b.error=a.errorCode+" "+a.errorMsg:(b.currentPage=1,b.pageChanged())})};isSearchChanged=function(a){return"undefined"==typeof b.oldSearch?(b.oldSearch=a,!1):b.oldSearch!=a};monitoringDetail=function(a){delete b.error;d.path("/monitoringdetails/"+
JSON.parse(c.sessionStorage.user).bedrijfId+"/"+a+"/$dashboard$alertstab");d.url(d.path())};notificationReadOnly=function(a,e){delete b.error;0;d.path("/notifycompany/"+JSON.parse(c.sessionStorage.user).bedrijfId+"/"+e+"/$dashboard$alertstab/"+a+"/true");d.url(d.path())};supportAlertDetail=function(a){delete b.error;d.path("/support/detail/"+a+"/$dashboard$supportticketstab");d.url(d.path())};updateMonitoring=function(a){v.updateMonitoring({vanBedrijfId:a,doorBedrijfId:JSON.parse(c.sessionStorage.user).bedrijfId,
gebruikerId:JSON.parse(c.sessionStorage.user).userId},function(a){"undefined"!==typeof a.errorCode?b.error=a.errorCode+" "+a.errorMsg:(b.currentPage=1,b.pageChanged())})};b.lowercaseFirstLetter=function(a){return a.charAt(0).toLowerCase()+a.slice(1)};b.filterResult()}]);
appcontrollers.controller("VermeldingenInfoController",["$window","$routeParams","$scope","$rootScope","$location","UserService",function(c,b,a,d,e,g){"undefined"==typeof a.init&&(a.init=!0,l=b.eigenBedrijfId&&b.eigenBedrijfId&&null!=b.eigenBedrijfId&&"undefined"!=b.eigenBedrijfId?b.eigenBedrijfId:null,h=b.bedrijfId&&b.bedrijfId&&null!=b.bedrijfId&&"undefined"!=b.bedrijfId?b.bedrijfId:null,f=b.meldingId&&b.meldingId&&null!=b.meldingId&&"undefined"!=b.meldingId?b.meldingId:null,searchurl=b.searchurl?
b.searchurl:"$dashboard",a.nietMeerWeergeven=!d.isShowHelp(d.HELP_VERMELDINGINFO),a.nietMeerWeergeven&&notifyCompany());var h,l,f;a.gotoVermeldingen=function(){a.nietMeerWeergeven&&saveShowHelp(notifyCompany);notifyCompany()};a.returnToSearch=function(){url=gotoDurl(searchurl);null!=url&&(e.path(url),e.url(e.path()))};notifyCompany=function(){null!=f?e.path("/notifycompany/"+l+"/"+h+"/"+searchurl+"/"+f):e.path("/notifycompany/"+l+"/"+h+"/"+searchurl);e.url(e.path())};saveShowHelp=function(b){delete a.error;
d.saveShowHelpDialog(d.HELP_VERMELDINGINFO,a.nietMeerWeergeven,function(c){null!=c.error?a.error=c.error:b()})}}]);
appcontrollers.controller("WebsiteparamController",["$window","$scope","$rootScope","$location","$anchorScroll","$routeParams","maxFieldLengths","websiteparamData","WebsiteService",function(c,b,a,d,e,g,h,l,f){b.maxFieldLengths=h;"undefined"==typeof b.init&&(b.init=!0,b.websiteparam=l.websiteparam);b.submitWebsiteparam=function(){delete b.websiteparamSavedOk;b.checkWebsiteparamFormInvalid()||(b.formwebsiteparam.$setPristine(),f.saveWebsiteparam(b.websiteparam,function(c){"undefined"!=typeof c.errorCode||
"undefined"!=typeof a.error?b.error=c.errorCode+" "+c.errorMsg:b.websiteparamSavedOk=!0}))};b.isInvalid=function(a,c){var d=a[c].$invalid;(a=a[c].$dirty)&&delete b.error;return a&&d};b.checkWebsiteparamFormInvalid=function(){return b.formwebsiteparam.$invalid||b.isInvalid(b.formwebsiteparam,"startupslastweek")||b.isInvalid(b.formwebsiteparam,"startupsthisyear")||b.isInvalid(b.formwebsiteparam,"vermeldingenlastweek")||b.isInvalid(b.formwebsiteparam,"vermeldingenthisyear")||b.isInvalid(b.formwebsiteparam,
"storingen")}}]);